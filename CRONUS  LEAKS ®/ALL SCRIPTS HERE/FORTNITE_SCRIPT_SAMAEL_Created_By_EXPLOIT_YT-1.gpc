
/*
███████╗ ██████╗ ██████╗ ████████╗███╗   ██╗██╗████████╗███████╗                                                                                             
██╔════╝██╔═══██╗██╔══██╗╚══██╔══╝████╗  ██║██║╚══██╔══╝██╔════╝                                                                                             
█████╗  ██║   ██║██████╔╝   ██║   ██╔██╗ ██║██║   ██║   █████╗                                                                                               
██╔══╝  ██║   ██║██╔══██╗   ██║   ██║╚██╗██║██║   ██║   ██╔══╝                                                                                               
██║     ╚██████╔╝██║  ██║   ██║   ██║ ╚████║██║   ██║   ███████╗                                                                                             
╚═╝      ╚═════╝ ╚═╝  ╚═╝   ╚═╝   ╚═╝  ╚═══╝╚═╝   ╚═╝   ╚══════╝                                                                                             
                                                                                                                                                             
 ██████╗██████╗ ███████╗ █████╗ ████████╗███████╗██████╗     ██████╗ ██╗   ██╗    ███████╗██╗  ██╗██████╗ ██╗      ██████╗ ██╗████████╗    ██╗   ██╗████████╗
██╔════╝██╔══██╗██╔════╝██╔══██╗╚══██╔══╝██╔════╝██╔══██╗    ██╔══██╗╚██╗ ██╔╝    ██╔════╝╚██╗██╔╝██╔══██╗██║     ██╔═══██╗██║╚══██╔══╝    ╚██╗ ██╔╝╚══██╔══╝
██║     ██████╔╝█████╗  ███████║   ██║   █████╗  ██║  ██║    ██████╔╝ ╚████╔╝     █████╗   ╚███╔╝ ██████╔╝██║     ██║   ██║██║   ██║        ╚████╔╝    ██║   
██║     ██╔══██╗██╔══╝  ██╔══██║   ██║   ██╔══╝  ██║  ██║    ██╔══██╗  ╚██╔╝      ██╔══╝   ██╔██╗ ██╔═══╝ ██║     ██║   ██║██║   ██║         ╚██╔╝     ██║   
╚██████╗██║  ██║███████╗██║  ██║   ██║   ███████╗██████╔╝    ██████╔╝   ██║       ███████╗██╔╝ ██╗██║     ███████╗╚██████╔╝██║   ██║          ██║      ██║   
 ╚═════╝╚═╝  ╚═╝╚══════╝╚═╝  ╚═╝   ╚═╝   ╚══════╝╚═════╝     ╚═════╝    ╚═╝       ╚══════╝╚═╝  ╚═╝╚═╝     ╚══════╝ ╚═════╝ ╚═╝   ╚═╝          ╚═╝      ╚═╝   
                                                                                                                                                             

                                        .d8888b.        d8888 888b     d888        d8888 8888888888 888      
                                       d88P  Y88b      d88888 8888b   d8888       d88888 888        888      
                                       Y88b.          d88P888 88888b.d88888      d88P888 888        888      
88888b.   8888b.  888d888 8888b.        "Y888b.      d88P 888 888Y88888P888     d88P 888 8888888    888      
888 "88b     "88b 888P"      "88b          "Y88b.   d88P  888 888 Y888P 888    d88P  888 888        888      
888  888 .d888888 888    .d888888            "888  d88P   888 888  Y8P  888   d88P   888 888        888      
888 d88P 888  888 888    888  888      Y88b  d88P d8888888888 888   "   888  d8888888888 888        888      
88888P"  "Y888888 888    "Y888888       "Y8888P" d88P     888 888       888 d88P     888 8888888888 88888888 
888                                                                                                          
888                                                                                                          
888        

/*
 .~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~.
(                    In Game Buttons                 )
 `-~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-*
*/
define Fire     = XB1_RT;
define Ads      = XB1_LT;
define Pickaxe  = XB1_Y;
define Build    = XB1_B;
define Wall     = XB1_RT;
define Floor    = XB1_RB;
define Ramp     = XB1_LT;
define Roof     = XB1_LB;
define Strafe   = XB1_LX;
define Walk     = XB1_LY;
define AimX     = XB1_RX;
define AimY     = XB1_RY;
define On       = TRUE;
define Off      = FALSE;
/*
 .~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~. 
(                Mod Values/Times                    ) 
 `-~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-* 
*/ 

int BuildSyncTime = 4000;

/*
 .~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~. 
(                   Mod Toggles                      ) 
 `-~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-* 
*/ 

int AimAssist = TRUE;   // Aim Assist [ On / Off ]
int Power = 1;         // Aim Assist Power [1,2,3] 	==> (>> 1 = 10 , 2 = 20 , 3 = 30  <<) 

int AntiRecoil = TRUE;  // Anti Recoil [ On / Off ]
int Vertical = 17;     // Anti-Recoil Power [1 - 50]

int BuildTracker    =  TRUE;

int BlockRumble     =  TRUE;

/*
 .~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~.
(                 Script Variables                   )
 `-~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-*
*/

int BuildTrack,BuildCount;
int AAT,Axis;

/*
 .~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~. 
(                       Main                         ) 
 `-~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-* 
*/ 

main {
   
    if (BlockRumble) {
        block_rumble();
    }

//BUILD TRACK	
	if (BuildTracker) {
        
        if (event_press(Build)) {
            BuildTrack = !BuildTrack;
        }
    
        if (BuildTrack) {
            BuildCount += get_rtime();
            
            if (event_press(Pickaxe) || BuildCount == BuildSyncTime) {
                BuildTrack = Off;
                BuildCount = Off;
            }
            
                if (get_ival(Roof) || get_ival(Floor) || get_ival(Ramp) || get_ival(Wall)) 
                    BuildCount = Off;
        }
    }

    if (!BuildTrack) { 

//AIM ASSIST LINEAL  
  if (AimAssist) {
	    
	    	if (get_ival(Ads) || get_ival(Fire)) {
	        	
	        	AimAssist();
	        }
	        
	        if (!get_ival(Ads) && !get_ival(Fire)) {
	        
	        	AAT = 0;
	        	Axis = 0;
	        }
	    }
	    
//ANTI RECOIL	  
   if (AntiRecoil) {        
	    
            if (get_ival(Ads) && get_ival(Fire)) { 
                
            	set_Val(AimY,Vertical);
            }
        }
     }
 }

/*
 .~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~. 
(                   Functions                        ) 
 `-~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-* 
*/ 
function AimAssist () {

	AAT += get_rtime();
	
	if (!Axis) 
		
		set_Val(AimY,AAT * Power / 10 * 2);
		
	if (Axis == 1)  
		
		set_Val(AimX,AAT * Power / 10 * 2);
	
	if (Axis == 2)  
		
		set_Val(AimY,inv(AAT * Power / 10 * 2));

	if (Axis == 3) {
		
		set_Val(AimX,inv(AAT * Power / 10 * 2));
	
		if (AAT > 50) {
		
			AAT = 0;
			Axis = 0;
		}
	
	} else if (AAT > 50) {
		
		AAT = 0;
		Axis += 1;
	}
}

function set_Val(Input,Output) {

    set_val(Input,clamp(Output * (100 - abs(get_ival(Input))) / 100 + get_val(Input),-100,100));
        
    return; 
}