/*
     _    ____ ___ ____ _____ _____ _   _  ____ ___    _      ____  _____      _    ____  _   _ _   _ _____  _    ____   ___     __   __      _    _   _ _____ ___      ____  _____ _____ ____   ___   ____ _____ ____   ___  
    / \  / ___|_ _/ ___|_   _| ____| \ | |/ ___|_ _|  / \    |  _ \| ____|    / \  |  _ \| | | | \ | |_   _|/ \  |  _ \ / _ \    \ \ / /     / \  | \ | |_   _|_ _|    |  _ \| ____|_   _|  _ \ / _ \ / ___| ____/ ___| / _ \ 
   / _ \ \___ \| |\___ \ | | |  _| |  \| | |    | |  / _ \   | | | |  _|     / _ \ | |_) | | | |  \| | | | / _ \ | | | | | | |    \ V /     / _ \ |  \| | | |  | |     | |_) |  _|   | | | |_) | | | | |   |  _| \___ \| | | |
  / ___ \ ___) | | ___) || | | |___| |\  | |___ | | / ___ \  | |_| | |___   / ___ \|  __/| |_| | |\  | | |/ ___ \| |_| | |_| |     | |     / ___ \| |\  | | |  | |     |  _ <| |___  | | |  _ <| |_| | |___| |___ ___) | |_| |
 /_/   \_\____/___|____/ |_| |_____|_| \_|\____|___/_/   \_\ |____/|_____| /_/   \_\_|    \___/|_| \_| |_/_/   \_\____/ \___/      |_|    /_/   \_\_| \_| |_| |___|    |_| \_\_____| |_| |_| \_\\___/ \____|_____|____/ \___/ 
                                                                                                                                                                                                                              
                                                                                                                                                                                                                              
   ____ ____  _____    _    ____   ___      ____   ___  ____      _______  ______  _     ___ ___ _____  __   _______ 
  / ___|  _ \| ____|  / \  |  _ \ / _ \    |  _ \ / _ \|  _ \    | ____\ \/ /  _ \| |   / _ \_ _|_   _| \ \ / /_   _|
 | |   | |_) |  _|   / _ \ | | | | | | |   | |_) | | | | |_) |   |  _|  \  /| |_) | |  | | | | |  | |    \ V /  | |  
 | |___|  _ <| |___ / ___ \| |_| | |_| |   |  __/| |_| |  _ <    | |___ /  \|  __/| |__| |_| | |  | |     | |   | |  
  \____|_| \_\_____/_/   \_\____/ \___/    |_|    \___/|_| \_\   |_____/_/\_\_|   |_____\___/___| |_|     |_|   |_|  
                                                                                                                 

  █▀▄▀█ █░█ █░░ ▀█▀ █   █▀█ █░░ ▄▀█ ▀█▀ ▄▀█ █▀▀ █▀█ █▀█ █▀▄▀█ ▄▀█
  █░▀░█ █▄█ █▄▄ ░█░ █   █▀▀ █▄▄ █▀█ ░█░ █▀█ █▀░ █▄█ █▀▄ █░▀░█ █▀█

  █▀█ ▄▀█ █▀█ ▄▀█   ▀█▀ █▀█ █▀▄ █▀█ █▀   █░░ █▀█ █▀   ░░█ █░█ █▀▀ █▀▀ █▀█ █▀   █▀▀ █▀█ █▀
  █▀▀ █▀█ █▀▄ █▀█   ░█░ █▄█ █▄▀ █▄█ ▄█   █▄▄ █▄█ ▄█   █▄█ █▄█ ██▄ █▄█ █▄█ ▄█   █▀░ █▀▀ ▄█
                  
                   
                   
                   ＭＡＮＵＡＬ ＤＥ ＩＮＳＴＲＵＣＣＩＯＮＥＳ

/*    
-----------------------------------------------------------------------------------
        ＥＤＩＴＡＲ ＶＡＬＯＲＥＳ ＡＮＴＩ ＲＥＴＲＯＣＥＳＯ ＣＯＮ ＥＬ ＭＡＮＤＯ​​​​​
-----------------------------------------------------------------------------------
EDITAR VALORES ANTI RETROCESO:

VERTICAL:
CUADRADO/X + FLECHA ARRIBA; PARA AUMENTAR LA FUERZA DEL ANTI RECOIL
             FLECHA ABAJO;  PARA DISMINUIR LA FUERZA DEL ANTI RECOIL


HORIZONTAL:
CUADRADO/X + FLECHA DERECHA;    PARA AUMENTAR LA FUERZA DEL ANTI RECOIL HORIZONTAL
             FLECHA IZQUIERDA;  PARA DISMINUIR LA FUERZA DEL ANTI RECOIL HORIZONTAL

-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------

         
-----------------------------------------------------------------------------------      
         ＥＤＩＴＡＲ ＶＡＬＯＲＥＳ ＤＥ ＡＳＩＳＴＥＮＣＩＡ ＤＥ ＡＰＵＮＴＡＤＯ​​​​​
-----------------------------------------------------------------------------------
EDITAR VALORES ASISTENCIA DE APUNTADO:

FUERZA:
CUADRADO/X + FLECHA ARRIBA; PARA AUMENTAR LA FUERZA DE LA ASISTENCIA DE APUNTADO
             FLECHA ABAJO;  PARA DISMINUIR LA FUERZA DE LA ASISTENCIA DE APUNTADO


HORIZONTAL:
R3/RS + FLECHA DERECHA;    PARA AUMENTAR EL TIEMPO DE LA ASISTENCIA DE APUNTADO
        FLECHA IZQUIERDA;  PARA DISMINUIR EL TIEMPO DE LA ASISTENCIA DE APUNTADO

-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------*/

//BOTONES/JYOSTICK // SI TENEMOS OTROS BOTONES DEBEMOS CAMBIARLOS AQUI.
define Disparar = PS4_R2: 
define Apuntar  = PS4_L2; 
define RY       = PS4_RY;
define RX       = PS4_RX;

//ON/OFF
define encendido   = TRUE;
define desactivado = FALSE;

/*
▄▀█ █▀ █ █▀ ▀█▀ █▀▀ █▄░█ █▀▀ █ ▄▀█   █▀▄ █▀▀   ▄▀█ █▀█ █░█ █▄░█ ▀█▀ ▄▀█ █▀▄ █▀█
█▀█ ▄█ █ ▄█ ░█░ ██▄ █░▀█ █▄▄ █ █▀█   █▄▀ ██▄   █▀█ █▀▀ █▄█ █░▀█ ░█░ █▀█ █▄▀ █▄█*/
                              
                              
                              //encendido 
                              //desactivado
define Asistencia_de_Apuntado = encendido;// AQUI PONEMOS encendido PARA ACTIVAR EL MOD Y desactivado PARA DESACTIVAR EL MOD, DEBE PONERSE EN MINUSCULAS

int Fuerza    = 20; // FUERZA DE LA ASISTENCIA DE APUNTADO / MAS VALOR MAS TEMBLARA, EDITALO HASTA QUE TE SIENTAS COMODO
int Tiempo    = 10; // TAMAÑO DE ASISTENCIA DE APUNTADO // ALTO = MÁS FUERZA - MÁS MOVIMIENTO DE LA PANTALLA // BAJO = MENOS FUERZA - MENOS MOVIMIENTO DE LA PANTALLA
                       
                       
/*
▄▀█ █▄░█ ▀█▀ █   █▀█ █▀▀ ▀█▀ █▀█ █▀█ █▀▀ █▀▀ █▀ █▀█
█▀█ █░▀█ ░█░ █   █▀▄ ██▄ ░█░ █▀▄ █▄█ █▄▄ ██▄ ▄█ █▄█*/                    
                      
                
                      //encendido
                      //desactivado  
define Anti_Retroceso = encendido; // AQUI PONEMOS encendido PARA ACTIVAR EL MOD Y desactivado PARA DESACTIVAR EL MOD, DEBE PONERSE EN MINUSCULAS

int Vertical   = 27;// VALORES ANTI RETROCESO VERTICAL
int Horizontal = 0; // VALORES ANTI RETROCESO HORIZONTAL

define SoloAlDisparar = desactivado; // SI ACTIVAMOS ESTA OPCION EN ANTI RETROCESO SE ACTIVARA SOLO AL DISPARAR
define InvertidoRY = desactivado; // SI ACTIVAMOS ESTA OPCION EL EJE RY SERA INVERTIDO



//PRINCIPAL / AQUI EMPIEZA EL CODIGO DEL GUION.
main {


/*
─█▀▀█ ░█▀▀▀█ ▀█▀ ░█▀▀▀█ ▀▀█▀▀ ░█▀▀▀ ░█▄─░█ ░█▀▀█ ▀█▀ ─█▀▀█ 　 ░█▀▀▄ ░█▀▀▀ 　 ─█▀▀█ ░█▀▀█ ░█─░█ ░█▄─░█ ▀▀█▀▀ ─█▀▀█ ░█▀▀▄ ░█▀▀▀█ 
░█▄▄█ ─▀▀▀▄▄ ░█─ ─▀▀▀▄▄ ─░█── ░█▀▀▀ ░█░█░█ ░█─── ░█─ ░█▄▄█ 　 ░█─░█ ░█▀▀▀ 　 ░█▄▄█ ░█▄▄█ ░█─░█ ░█░█░█ ─░█── ░█▄▄█ ░█─░█ ░█──░█ 
░█─░█ ░█▄▄▄█ ▄█▄ ░█▄▄▄█ ─░█── ░█▄▄▄ ░█──▀█ ░█▄▄█ ▄█▄ ░█─░█ 　 ░█▄▄▀ ░█▄▄▄ 　 ░█─░█ ░█─── ─▀▄▄▀ ░█──▀█ ─░█── ░█─░█ ░█▄▄▀ ░█▄▄▄█*/
    
    if (Asistencia_de_Apuntado) {

       if (get_ival(Apuntar)) {
   
           combo_run(Asistencia);
        
       } else {
       
           combo_stop(Asistencia);
           
          }
     }

     if(get_val(PS4_R3)){
                
        if(event_press(PS4_UP)){
             
           Fuerza += 1;
           combo_run(Rumble);
                
       }
        if(event_press(PS4_DOWN)) {
           
           Fuerza -= 1;
           combo_run(Rumble);
       }
       set_val(PS4_UP,0); set_val(PS4_DOWN,0);
                                                       
        
        if(event_press(PS4_LEFT)){
            
            Tiempo -= 1;
            combo_run(Rumble2);
        }
                
        if(event_press(PS4_RIGHT)) {
            
            Tiempo +=  1;
            combo_run(Rumble2);
        }
        set_val(PS4_LEFT,0); set_val(PS4_RIGHT,0);
    }

/* 
─█▀▀█ ░█▄─░█ ▀▀█▀▀ ▀█▀ 　 ░█▀▀█ ░█▀▀▀ ▀▀█▀▀ ░█▀▀█ ░█▀▀▀█ ░█▀▀█ ░█▀▀▀ ░█▀▀▀█ ░█▀▀▀█ 
░█▄▄█ ░█░█░█ ─░█── ░█─ 　 ░█▄▄▀ ░█▀▀▀ ─░█── ░█▄▄▀ ░█──░█ ░█─── ░█▀▀▀ ─▀▀▀▄▄ ░█──░█ 
░█─░█ ░█──▀█ ─░█── ▄█▄ 　 ░█─░█ ░█▄▄▄ ─░█── ░█─░█ ░█▄▄▄█ ░█▄▄█ ░█▄▄▄ ░█▄▄▄█ ░█▄▄▄█*/
   
   if (Anti_Retroceso) {
       
       if (SoloAlDisparar && get_ival(Disparar)) {
          
           AntiRetroceso();
      
     } else if (get_ival(Apuntar) && get_ival(Disparar)) {
    
           AntiRetroceso();
       }
   }

     if(get_val(PS4_SQUARE)){
                
        if(event_press(PS4_UP)){
             
           Vertical += 1;
           combo_run(Rumble);
                
       }
        if(event_press(PS4_DOWN)) {
           
           Vertical -= 1;
           combo_run(Rumble);
       }
       set_val(PS4_UP,0); set_val(PS4_DOWN,0);
                                                       
        
        if(event_press(PS4_LEFT)){
            
            Horizontal -= 1;
            combo_run(Rumble2);
        }
                
        if(event_press(PS4_RIGHT)) {
            
            Horizontal +=  1;
            combo_run(Rumble2);
        }
        set_val(PS4_LEFT,0); set_val(PS4_RIGHT,0);
    }
}

/*
░█▀▀█ ░█▀▀▀█ ░█▀▄▀█ ░█▀▀█ ░█▀▀▀█ ░█▀▀▀█ 
░█─── ░█──░█ ░█░█░█ ░█▀▀▄ ░█──░█ ─▀▀▀▄▄ 
░█▄▄█ ░█▄▄▄█ ░█──░█ ░█▄▄█ ░█▄▄▄█ ░█▄▄▄█*/

combo Asistencia {

   set_val(RY,get_ival(RY) + inv(Fuerza));
   wait(Tiempo):
   set_val(RX,get_ival(RX) + Fuerza):
   wait(Tiempo);
   set_val(RY,get_ival(RY) + Fuerza);
   wait(Tiempo);
   set_val(RX,get_ival(RX) + inv(Fuerza));
   wait(Tiempo);
}
 
combo Rumble {
    
    if (event_press(PS4_UP))
        
        set_rumble(RUMBLE_A,70);
        
    else if (event_press(PS4_DOWN))
            
        set_rumble(RUMBLE_B,35);
    
        wait(250);
    
        reset_rumble();
}

combo Rumble2 {
    
    if (event_press(PS4_RIGHT))
        
       set_rumble(RUMBLE_A,70);
        
    else if (event_press(PS4_LEFT))
         
       set_rumble(RUMBLE_B,35);
    
       wait(250);
    
       reset_rumble();
}

/*
░█▀▀▀ ░█─░█ ░█▄─░█ ░█▀▀█ ▀█▀ ░█▀▀▀█ ░█▄─░█ ░█▀▀▀ ░█▀▀▀█ 
░█▀▀▀ ░█─░█ ░█░█░█ ░█─── ░█─ ░█──░█ ░█░█░█ ░█▀▀▀ ─▀▀▀▄▄ 
░█─── ─▀▄▄▀ ░█──▀█ ░█▄▄█ ▄█▄ ░█▄▄▄█ ░█──▀█ ░█▄▄▄ ░█▄▄▄█*/

function AntiRetroceso () {

   if (InvertidoRY) {
  
       set_Val(RY,inv(Vertical));
       set_Val(RX,Horizontal);
  
   } else {

       set_Val(RY,Vertical);
       set_Val(RX,Horizontal);
  
    }
}

function set_Val(Input,Output) {

  set_val(Input,clamp(Output * (100 -abs(get_ival(Input))) / 100 + get_ival(Input),-100,100));
  
  return;
}