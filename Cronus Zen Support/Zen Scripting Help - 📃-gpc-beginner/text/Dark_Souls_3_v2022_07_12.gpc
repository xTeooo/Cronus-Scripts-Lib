//———————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————
//———————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————
int	SCRIPT_ON 			= FALSE;
int SCREEN_TIME_OUT		= FALSE;
int SCREEN_TIME			= FALSE;


//———————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————
//———————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————
main
{
//———————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————
	if(abs(get_val(PS4_LX)) <= 10 && abs(get_val(PS4_LY)) <= 10)//DEADZONE
	{
		set_val(PS4_LX,0);
		set_val(PS4_LY,0);
	}
	if(abs(get_val(PS4_RX)) <= 10 && abs(get_val(PS4_RY)) <= 10)
	{
		set_val(PS4_RX,0);
		set_val(PS4_RY,0);
	}
//———————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————
	if(!get_val(PS4_L3) && event_press(PS4_PS) && get_brtime(PS4_PS) < 100)//SCRIPT_ON&OFF
	{
		SCRIPT_ON = !SCRIPT_ON;
		if(SCRIPT_ON)
		{
			set_rgb(0,0,255);//BLUE
			combo_run(RUMBLE_NOTIFIER_BIG);
		}
		else
		{
			set_rgb(255,0,0);//RED
			combo_run(RUMBLE_NOTIFIER_SMALL);
		}
	}
	if(get_val(PS4_PS) && get_ptime(PS4_PS) < 100)
		{
		set_val(PS4_PS,0);
		}
//———————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————
	if(SCRIPT_ON)
	{
//———————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————
		if(SCREEN_TIME_OUT)
		{
    		SCREEN_TIME += get_rtime();
    		if(SCREEN_TIME >= 1000)
    		{
        		SCREEN_TIME -= 1000;
        		SCREEN_TIME_OUT -= 1;
    		}
		}
		if(!SCREEN_TIME_OUT)
		{
    		cls_oled(OLED_BLACK);
		}
//———————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————
		deadzone(PS4_L2,PS4_R2,99,99);//HAIR_TRIGGER
//———————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————
		swap (XB1_VIEW, XB1_SYNC);
//———————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————
		if(get_ival(XB1_VIEW))
		{
			combo_run(LEFT_TOUCHPAD);
		}
//———————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————
		if(get_val(XB1_PR2))
		{
			set_val(PS4_CROSS,100);
		}
	}
//———————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————
}


//———————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————
//———————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————
combo LEFT_TOUCHPAD
{
	set_val(PS4_FINGER1X,-70);
	set_val(PS4_FINGER1Y,-10);
	set_val(PS4_FINGER1,100);
	set_val(PS4_TOUCH,100);
	wait(80);
}
//———————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————
combo RUMBLE_NOTIFIER_BIG
{
    set_rumble(RUMBLE_A,100); //100 is max rumble
    wait(300);
    reset_rumble();
}
//———————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————
combo RUMBLE_NOTIFIER_SMALL
{
    set_rumble(RUMBLE_B,100); //100 is max rumble
    wait(300);
    reset_rumble();
}