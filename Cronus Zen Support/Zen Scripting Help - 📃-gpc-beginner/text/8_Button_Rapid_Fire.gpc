// Define Buttons
define BTN_LP = 20; // SQUARE
define BTN_RP = 17; // TRIANGLE
define BTN_LK = 19; // CROSS
define BTN_RK = 18; // CIRCLE
define UP     = 13; // PS4_UP
define DOWN   = 14; // PS4_DOWN
define BTN_R1 = 3;  // R1
define BTN_R2 = 4;  // R2
define BTN_L1 = 6;  // L1
define BTN_L2 = 7;  // L2
define BTN_L3 = 8;  // L3
define BTN_R3 = 5;  // R3

define Speed = 20;



int R1on;
int R2on;
int L1on;
int L2on;
int SQUAREon;
int TRIANGLEon;
int CIRCLEon;
int CROSSon;



main {


   	if(get_val(PS4_TOUCH)) {
   	    if(event_press(PS4_R1))
    	    R1on = !R1on;
    	if(event_press(PS4_R2))
    	    R2on = !R2on;
        if(event_press(PS4_L1))
    	    L1on = !L1on;
    	if(event_press(PS4_L2))
    	    L2on = !L2on;
        if(event_press(PS4_SQUARE))
    	    SQUAREon = !SQUAREon;
    	if(event_press(PS4_CROSS))
    	    CROSSon = !CROSSon;
    	if(event_press(PS4_TRIANGLE))
    	    TRIANGLEon = !TRIANGLEon;
    	if(event_press(PS4_CIRCLE))
    	    CIRCLEon = !CIRCLEon;
    }

    if(R1on)
      	if(get_val(PS4_R1) == 100)
    		combo_run(R1); 
        else combo_stop(R1);
    
	if(R2on)
		if(get_val(PS4_R2) >= 50)
		    combo_run(R2);
	    else combo_stop(R2);
	    
	if(L1on)
	   	if(get_val(PS4_L1) == 100)
		    combo_run(L1); 
	    else combo_stop(L1);
	    
	if(L2on)
	   	if(get_val(PS4_L2) >= 50)
		    combo_run(L2);
	    else combo_stop(L2);

	if(SQUAREon)
	   	if(get_val(PS4_SQUARE))
		    combo_run(SQUARE);
	    else combo_stop(SQUARE);
	
	if(CROSSon)
	   	if(get_val(PS4_CROSS))
		    combo_run(CROSS);
	    else combo_stop(CROSS);

	if(TRIANGLEon)
	   	if(get_val(PS4_TRIANGLE))
		    combo_run(TRIANGLE);
	    else combo_stop(TRIANGLE);
	
	if(CIRCLEon)
	   	if(get_val(PS4_CIRCLE))
		    combo_run(CIRCLE);
	    else combo_stop(CIRCLE);

    if(R1on || R2on || L1on || L2on || CROSSon || SQUAREon || CIRCLEon || TRIANGLEon)
        set_ps4_lbar(0,255,0);
    else set_ps4_lbar(255,0,0);


}



combo R1 {
	set_val(PS4_R1, 0);
	wait(Speed);
	wait(Speed);
}



combo R2 {
	set_val(PS4_R2, 0);
	wait(Speed);
	wait(Speed);
}



combo L1 {
	set_val(PS4_L1, 0);
	wait(Speed);
	wait(Speed);
}



combo L2 {
	set_val(PS4_L2, 0);
	wait(Speed);
	wait(Speed);
}



combo SQUARE {
	set_val(PS4_SQUARE, 0);
	wait(Speed);
	wait(Speed);
}



combo TRIANGLE {
	set_val(PS4_TRIANGLE, 0);
	wait(Speed);
	wait(Speed);
}



combo CROSS {
	set_val(PS4_CROSS, 0);
	wait(Speed);
	wait(Speed);
}



combo CIRCLE {
	set_val(PS4_CIRCLE, 0);
	wait(Speed);
	wait(Speed);
}