/* ********************* GPC FILE RECOVERED ********************* */

// GPC Online Library
// oneforall_32bit_2.5.gpc

// GPC Online Library
// oneforall_32bit_beta_2.5.gpc

/*to use the script, the latest beta of the Zen firmware and Studio version is required
                                         

OneForAll is written to have the best possible accessibility in each game, so that everyone can play games according to their needs. there are some classic mods included and many that simplify commands and movements to execute. 

if you find bugs, suggestions for improvement or would like to support me with a donation so i can buy new popular games to find possible simplifications.

for the best experince, set under menu Controller the button same as the in game buton

feel free to write me on discord username: newjack or in the official zen forum sehathabib

Thanks to Swizzy, Taylordrift and Fadexz who helped me to integrate the new storage system from Swizzy.


The script includes some special accessibility features and all the classic ones. AimAssist, SlideCancel, Switchstick, Loot Run, AutoRun, Remap, auto Cam adjustment, Doubltap mods, dpad to stick, stick switch. invert stickt, easy double jump, reload mods, R2 L2 Mods and easyhold BTN.
—————————————————————————————————————————————————————————————

New are, in Mods
—————————————————————————————————————————————————————————————

switschstick swaps the left and right stick, can be set so that it is on ly swapped when aiming. e.g. you are walking normally with the left stick and want to aim, the right stick is placed on the left when aiming.

Easyrun lets you run forward automatically if you either press more than 95% LY forward or press L3/LS, or aim twice fast. every time you press a direction or press the crouch button longer and fire, it ends easyrun.

Cam Angle, lets you automatically move the right stick to the left and right with individually set deadzone and strength when you move the left stick, so that you don't have to keep adjusting the camera everytime.

L2 Activ/ R2 Activ , lets you select an invidual button under the controller menu that is activated when an adjustable sensitivity of the trigger button is pressed. for example, L2 activates the shoot button or ping when 95% of the button is pressed, or deadeye as in Readdead redemption.

Dpad to, changes the Dpad to the left or right stick.

Autorun Loot, spam the Loot button (adjustable under Conttroller) while running.

Autorun Parkour, spams the jump button when running (adjustable under Conttroller)

VM Speed speeds up the actions of the zen, for example, the movement of the aim assist is accelerated and is almost no longer visible.

Cancel PolarAngle from Crescens, cancels reload when aiming or firing

Autoreload after fire

Double jump, you can setup in millisecond, when hold the jump button it will press again. example hold jump button and it will press again the jump button after the selected time.

R2 and L2 mod, can set it up under Controller as 

R2 & L2 mods can be selected as a button under the controller menu item when the button is pressed after a preset button. 

Gyro only works with a gyro controller, like the PS4 controller. 

 - Press a button set under Controller in the menu item ACCX Left or right respective button when the controller is tilted. 

 - Turbo will automatically press this button repeatedly as long as the controller is tilted.

 - Race and drift, turns the controller into a steering wheel, for fast movements the drift button can be selected under controller Accx left and right.

 - side walk, lets you walk left and right, under ACCX left and right a button can be selected to make a roll in some games.
 
 Polar V2 is a very smooth aim from Dogz
 
Quick mode can be selected between FPS, Third Party and Recoil on the fly by pressing L2/LT + PS button/Xbox button.

Recoil on the fly, works via L2/LT + Dpad for standard and rumble.

—————————————————————————————————————————————————————————————

Menu item Controller, all buttons are used as in the game.
—————————————————————————————————————————————————————————————

Bumper combo lets you press L1+R1 simultaneously when you briefly press an individually set button. 

Hold BTN lets you keep a button pressed if you press it briefly, a second quick press switches the button off again.

DB Tap LY and LX lets you press a button individually when you press a direction twice. e.g. the B button is on the left and right, so you can quickly move to one side. THX FADEXZ♥

Invert, inverts the right stick

—————————————————————————————————————————————————————————————

Menu item Profile/Remap, triangle/Y changes the mods below.
—————————————————————————————————————————————————————————————
DB Tap, lets you select two individual buttons. pressing one twice activates the other. THX FADEXZ♥

Remap, lets you select two individual buttons to be swapped.
If you select L2 -> R2,( R2 -> L2 is automatically activated.)
—————————————————————————————————————————————————————————————
i hope you like the script and you can play all the games you want.
—————————————————————————————————————————————————————————————

Enter Menü = L2 + Options
Go back = Circle/B
Switch mods on Profile/Remap = Triangle/Y
Save = PS/Xbox Button in Menu
Killswitch = L2 + View
Touch on XBox = XBox Share
—————————————————————————————————————————————————————————————
version: 2.2 Beta 
Device: CronusZEN newest Beta with 32bit Support ONLY
Controller tested: DS4 - Elite 2
Console tested: PS4 (XBOX and PC compatible)
Author: SehatHabib Discord Newjack

Changelog 
—————————————————————————————————————————————————————————————
1.1 
- Sensshot is now more adjustable and work with L2 and R2. is named now as L2 Acctive
- Switcstick works now for the left and the right stick.
- Autorun got an speed on of mode (L2+Dpad down) doubletfap down let you switch between normal, loot and parkour
- little fixes and clean up
1.2
- Fixed Some Save issues 
- DPAD and Speed toggle fix
2.0
VM Speed speeds 
Cancel Reload
Gyro only works with a gyro controller, like the PS4 controller. 
 - Press 
 - Turbo
 - Race and drift
 - side walk
Polar V2 
Quick mode 
Recoil on the fly
2.01
stick aim fix
2.2
- save with Circle or B press and L2 & Options now in the menu
- Auto reload
- Adjustable polar v2
- easy Doble Jump
- small fixes
2.21
 PS4/PS5 Touch fix
2.3
 - added Stealth Polar
 - added Crescens Polar
 - Fixed Antirecoil
 - Fixed Autoreload & Cancel
2.51
 - Save system
 - added double tap to easyrun and Run and fire(Db tap up the stick and its stop running at fire and continiue running after fire.
The repeat time of the loot button for Lootrun and Jump button for Parkour can be individual settetup, it was 30 ms now its default as 150 ms
Thanks to Cronus community and staff                                                             © 2022 CronusMax & CronusZen. All rights reserved.
———————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————

This script has most of the mods that are essential to most shooter games (FPS or TPS)

It is not plug and play, the user will have to activate the mods they are interested in and also define their button layout from the OLED menu.

Compatible with PS4 and XBOX controllers, this script will replace:

	- VIEW button on XBOX controller with the TOUCHPAD button when playing on PlayStation (to capture (SHARE button on PlayStation controllers), press RS + VIEW)

	- TOUCHPAD button on PlayStation controller with the VIEW button when playing on XBOX or PC




It will disable Dynamic Sens if you activate AIM Assist on one of the 3 profiles or disable AIM Assist on all profiles if you activate Dynamic Sens (because these mods are not compatible)

It will display the PlatStation buttons in the menu if your controller is a PlatStation controller, otherwise it will display the XBOX buttons

It will allow you to enter Mod Edit only if the displayed mod is activated and if it has one or more adjustable values

The AntiRecoil + AIM Assist combination has been reworked for maximum compatibility between these two mods

In short, a lot of work has been put into this script and I think I've managed to counter most of the possible manipulation errors... have fun

———————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————

◹◺◿◸ ◹◺◿◸ ◹◺◿◸ ◹◺◿◸ ◹◺◿◸ ◹◺◿◸ ◹◺◿◸ ◹◺◿◸ ◹◺◿◸ ◹◺◿◸ ◹◺◿◸ ◹◺◿◸ ◹◺◿◸ ◹◺◿◸ ◹◺◿◸ ◹◺◿◸ ◹◺◿◸ ◹◺◿◸ ◹◺◿◸ ◹◺◿◸ ◹◺◿◸ ◹◺◿◸ ◹◺◿◸
————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————
											INSTRUCTIONS - IMPORTANT, PLEASE READ CAREFULLY
											INSTRUCTIONS - IMPORTANT, PLEASE READ CAREFULLY
											INSTRUCTIONS - IMPORTANT, PLEASE READ CAREFULLY
————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————
◹◺◿◸ ◹◺◿◸ ◹◺◿◸ ◹◺◿◸ ◹◺◿◸ ◹◺◿◸ ◹◺◿◸ ◹◺◿◸ ◹◺◿◸ ◹◺◿◸ ◹◺◿◸ ◹◺◿◸ ◹◺◿◸ ◹◺◿◸ ◹◺◿◸ ◹◺◿◸ ◹◺◿◸ ◹◺◿◸ ◹◺◿◸ ◹◺◿◸ ◹◺◿◸ ◹◺◿◸ ◹◺◿◸										
	
How to use the Main Menu:

		Open Main Menu 
			- hold L2/LT and tap OPTIONS/MENU to open or exit the menu
			
		Navigate between the different Menus
			- tap UP or DOWN 
			- tap CROSS/A to enter in the submenu
			
〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜	

How to use the Mod Menu:
	
		Choose which profile you want to modify (Primary, Secondary or Custom) 
			- tap TRIANGLE/Y 
			
		Navigate between the different MODS with LEFT or RIGHT (D pad)
			- tap UP or DOWN to turn ON or OFF or switch mod Type
		
		Activate the mods you want on each profile...
		
		If the mod displayed is active and has one or more editable value(s): 
			- tap CROSS/A to close Mod Menu and go to Mod Edit
		
		To exit Mod Menu and go back to Main Menu, tap CIRCLE/B
			
〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜	

How to use the Mod Edit: (while in Mod Menu, tap CROSS/A to close Mod Menu and go to Mod Edit - if the mod displayed is active and has one or more editable value(s))

		Navigate between the different value name with LEFT or RIGHT
		Change/edit the value:
			- Hold CROSS/A and 
				- tap UP or RIGHT to increase value 
				- tap DOWN or LEFT to decrease value
		
		To exit Mod Edit and go back to Mod Menu, tap CIRCLE/B
		
		Hold L2/LT and tap OPTIONS/MENU to close every Menu
	
〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜	

How to use the Controller Menu:
	
		Choose which button you want to modify (ADS, Fire, Jump ... ... ...) - or the toggle you want to activate (Hair Trigger or Block Rumble)
			- Tap LEFT or RIGHT
			
		Assign the corresponding button - or toggle Hair Trigger or Block Rumble
			- tap UP or DOWN 
		
		To exit Controller Menu and go back to Main Menu, tap CIRCLE/B
		
		Hold L2/LT and tap OPTIONS/MENU to close every Menu
			
〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜	

How to use the Profile Menu:
	
		Navigate through the different Profile Menu options
			- Tap TRIANGLE/Y
			
			Prim/Sec btn: Change the way you switch between profile 1 and 2
				- tap LEFT or RIGHT
				
			Custom Profile: Change the way you go to the Custom Profile
				- tap LEFT or RIGHT to select the button you need to hold
				- tap UP or DOWN to select the button you need to tap
				
			Resync BTNs: Define how to resync profiles
				- tap LEFT or RIGHT to select the button you need to hold
				- tap UP or DOWN to select the button you need to tap
			
		To exit Profile Menu and go back to Main Menu, tap CIRCLE/B
		
		Hold L2/LT and tap OPTIONS/MENU to close every Menu
			
〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜	
				           
	Save every values and exit any menus (only available if you are in any Menu)		
		- Tap PS/XBOX to save EVERY values, toggles, independently for EACH profiles 

〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜	〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜	
		
	Speed toggles for the active profile (outside any Menu) - Disable the mod or go back to the type you chose before
		- Hold aiming button and hold 500ms
			- UP for	AntiRecoil 
			- DOWN for	AIM Assist
			- RIGHT for	RapidFire
			- LEFT for	ShotMod
			
		- Hold aiming button and
			- DOUBLE TAP UP to switch between every AntiRecoil Type
			- DOUBLE TAP DOWN to switch between every AIM Assist Shapes
			- DOUBLE TAP RIGHT to switch between every RapidFire Type
			- DOUBLE TAP LEFT to switch between every ShotMod Type

〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜	〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜	
		
	Kill Switch (disable everything)
		- Turn ON to OFF or OFF to ON
			- Hold L2/LT button and tap SHARE/VIEW 
			or
			- Tap PS/XBOX 
			
		- Turn ON (disable everything)
			- Tap OPTIONS/MENU
			
		- Turn OFF (enable everything)
			- Double tap CIRCLE/B
		
————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————

														M O D S   D E S C R I P T I O N
														
AntiRecoil: allows to control the recoil of a weapon

	There are 3 types of Vertical AntiRecoil:
	- Progressive: the most precise but also the most difficult to adjust. It is composed of 3 adjustable values:
		- AR Start is the value that will allow you to counter the kick of your weapon on the first 5 bullets, on the first burst
		- AR End is the value that allows you to stabilize the weapon when you hold the fire button to empty your magazine on the enemy
		- AR Time is a time value and defines the duration of the progression, the time you will take to progressively increase or decrease your AntiRecoil

For example Start = 48, End = 25 and Time = 1000
When you fire, your AntiRecoil will compensate your recoil at 48 to counter the kick and then it will start to progressively go down to 25 and reach 25 in 1 second (1000ms)
This is exactly what you do with your finger on the stick when you don't have ZEN, you pull back hard to counter the kick and then release progressively (in a few seconds) the pressure on the stick to stabilize the weapon

	- Standard: less precise but easier to adjust. It has only one adjustable value:
		- AR Vertical is the value that allows you to stabilize the weapon when you hold the fire button to empty your magazine on the enemy
	
	- On Rumble: quite precise and very simple to set, it is based on the vibrations sent to the controller by the game. It has only one adjustable value:
		- Rumble Power is a value (coefficient) that allows you to finely adjust the recoil of the weapon if the default value is too high or too low

Each of these 3 types of AntiRecoil Vertical also has an AntiRecoil Horizontal value which is composed of a single value:
		- AR Horiz is a value that allows you to correct the horizontal recoil of your weapon, if it goes left or right when you shoot


Each weapon is different and will have different AntiRecoil values
AntiRecoil On Rumble is the one that will work best for most weapons without you having to change the mod value

You need to increase the value if your weapon keeps going up to the sky, and decrease the value if you shoot into your feet

If you play with the right stick inverted, set your Vertical AntiRecoil to negative values

————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————

RapidFire: turns a single shot weapon into an automatic weapon by spamming the trigger for you when you hold it down
	There are 3 types of RapidFire
	- Dynamic: no adjustment to make, the more you pull the trigger, the more the rate increases
	- Rounds per min: has only one adjustable value:
		- Rate of Fire defines the number of rounds fired in one minute (RPM or BPM of your weapon)
	- Rounds per sec: has only one adjustable value:
		- Rate of Fire defines the number of rounds fired in one second (RPS or BPS of your weapon)

Do not use RapidFire with a full automatic weapon, you will slow down the rate!

————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————

sensshot: turns a full auto weapon into a burst weapon by firing in short bursts as you hold the trigger down - allows you to have less recoil and save bullets - It has 2 adjustable values
	- BF Hold is the length of time the trigger is held down
	- BF Release is the length of time the trigger is released

————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————

AIM Assist draws a small circle (or other shape) with the right stick to make it easier for your sight to stay in the virtual bubble around your enemy
	There are 6 different types of AIM Assist
	- Sticky (non-polar)
	- Circular 
	- Tall Oval
	- Wide Oval
	- Spiral
	- Helix
	- Polar V2 by Dogz 
	
These different types have 2 adjustable values:
	- Radius which defines the radius or size of the drawn shape
	
The bigger the Radius, the more you will have a shaking screen sensation, but the stronger the assist will be
The smaller it is, the more the shaking sensation will disappear, but the assist will be less strong

	- Steps is the rate at which shapes are drawn
	
With Sticky, the higher the value, the slower the rate
With other shapes, the higher the value, the faster the rate
A too fast rate can create slowdowns in the character's movements/moves.

————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————

AIM Abuse will spam the aim button to try to abuse the autosnap present in the game (works well with games like GTA)
	We have 2 adjustable values:
		- Hold Time is the time the button will remain pressed
		- Release Time is the time the button will be released

————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————

Shot Mod:
	There are 3 types of Shot Mod:
	- Strafe Shot allows you to step sideways (from right to left)
	- Jump Shot allows you to jump when you shoot (you have to set the JUMP button in the menu)
	- Crouch Shot allows you to crouch or lie down when you shoot (you must set the CROUCH button in the menu)

————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————

Shot Activator allows you to define when and how the Shot Mod you have chosen will start up
	There are 3 possible options:
	- ADS + FIRE: the chosen Shot Mod will start when you press both triggers
	- ADS Only: the chosen Shot Mod will start when you press ADS and stop when you press FIRE
	- FIRE Only: the chosen Shot Mod will start when you press FIRE and stop when you press ADS

————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————

Hold Breath allows you to automatically hold your breath with Sniper

————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————

Turbo Melee allows you to spam the melee button when you hold it down

————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————

Auto ADS allows to press ADS when you press FIRE

————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————

Auto FIRE allows you to press FIRE when you press ADS

————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————

Sensitivity: allows you to modify the sensitivity of your right stick
	There are 2 possible choices:
	- Custom Sens allows you to define your sensitivity in 4 different situations (so 4 adjustable values)
		- General changes your general sensitivity, without holding down ADS or FIRE
		- ADS changes your sensitivity when you hold down ADS
		- FIRE changes your sensitivity when you hold down FIRE
		- ADS + FIRE changes your sensitivity when you hold down ADS and FIRE at the same time


	- Dynamic Sens allows you to create a sensitivity curve like the ones available with the Elite controllers - this mod is complicated to set, see the example below

		"Initial Sens" is your initial X and Y sensitivity (value range 0 - 100)
			While aiming, I want my sensitivity which is set to 100% in my game to be reduced by half as long as the stick input does not exceed "Increase Point"
			So "Initial Sens" = 50 on the OLED screen
	
		"Increase Point" is the stick input point from which the sensitivity increases or decreases (value range 0 - 100)
			When the stick input exceeds 65 (my "Increase Point" value), it gradually increases the sensitivity from 50 (my "Initial Sens" value) to 100 (my "Max Sens" value)
			The sensitivity increase rate is defined by "Increase Rate"
	
		"Restart Point" stick input point where sensitivity will reset back to "Initial Sens" (value range 0 - 100)
			When stick input goes down below 30 (my "Restart Point" value), stick sensitivity return to 50 (my "Initial Sens" value)
	
		"Max Sens" is the maximum sensitivity value you want
			100 means that your maximum sensitivity will be the one you set in your game
	
		"Increase Rate" defines at which rate the sensitivity increases or decreases
			1 = 10ms delay between increase / decreases

————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————

- AutoRun allows you to run automatically when you push the stick forward (or to the sides)
	The mod maintains R3 (or RS on XBOX) when you push the left stick more than 90%.

————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————

Slide Cancel allows you to stop slide animation in CoD
	There are 2 types
		- Modern Warfare
		- Cold War

————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————

- Hair Trigger allows you to increase the sensitivity of your trigger for unparalleled responsiveness

————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————

- Block Rumble allows you to block the vibrations of the controller if you don't like playing with vibrations
	Leave the vibrations enabled in the game options as AntiRecoil On Rumble needs the vibrations to be enabled in the game

————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————

															THANK YOU FOR READING
															THANK YOU FOR READING
															THANK YOU FOR READING
											_
◿◸◹◺ ◿◸◹◺ ◿◸◹◺ ◿◸◹◺ ◿◸◹◺ ◿◸◹◺ ◿◸◹◺ ◿◸◹◺ ◿◸◹◺ ◿◸◹◺ ◿◸◹◺ ◿◸◹◺ ◿◸◹◺ ◿◸◹◺ ◿◸◹◺ ◿◸◹◺ ◿◸◹◺ ◿◸◹◺ ◿◸◹◺ ◿◸◹◺ ◿◸◹◺ ◿◸◹◺ ◿◸◹◺
———————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————*

/*---------------------------------------------------------------------- AUTORUN ON/OFF---------L2 + R1---------RIGHT JOYSTICK UP AND DOWN TO RUN
 ------------------------------------------------------- 
 /*--------------------------------------------------------------------------------------------------------------------------------------*/
   define LYA = PS4_LY;
 
   int AIMBOT = TRUE;
 
/*------------------------------------------------*/

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////

// M A I N   M E N U   N A M E  

// Main Menu Name
	const string MENUNAME[] = {
			"Mod Menu"    ,   "Controller"   ,  "Profiles/Remap"  ,  "WheelMode" // add as many as you want
// menuName_idx = 0       |        1         |      2             |      3
	};
	
// Text: _MM mean Main Menu
	define 	MODMENU_MM = 0 , CONTROLLER_MM = 1 ,   PROFILES_MM = 2 ,  WHEELMODE_MM = 3; // add as many as there are MENUNAME[]
	
// Index
	int menuName_idx;

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////// M O D S   N A M E   A N D   T O G G L E S

// Mod Name
	const string MODNAME[] = {
			"AntiRecoil"     , "RapidFire"    , "AIM Assist"  , "Polar Assist"	 , "Double Jump", "Reload Mod" ,
// modName_idx = 0           |      1         |       2       |       3       |      4      |     5
			 " Hold Breath" ,"Cam Angle"	, "Quick Mod"    , "GYRO ACCX",  "AutoRun"   , "Switch Stick" , "Dpad to", "Easy Run" , "Slide Cancel", "AIM Abuse"  , "L2/LT Mod", "R2/RT MOD" , "VM Speed" , "Hair/Rumble" 
// modName_idx = 6           |       7        |       8       |       9       |      10     |       11      |     12      |     13      |      14
	};        
	
// Text: _M mean Mod name
	define 	ANTIRECOIL_M = 0, RAPIDFIRE_M = 1   , AIMASSIST_M = 2 , polar_M = 3  , jump_M = 4      ,
	        cr_M = 5 , HOLDBREATH_M = 6  , camangle_M = 7 , quick_M = 8   , gyro_M = 9  , AUTORUN_M = 10 , switchstick_M = 11 , dpad_M = 12, easyrun_M = 13 , SLIDECANCEL_M = 14,  AIMABUSE_M = 15,  sensshot_M = 16,  sensshot2_M = 17,   vm_M = 18, hair_M = 19;  // add as many as there are MODNAME[]
	
// Index
	int modName_idx;
	
// Text 	
	const string ANTIRECOIL[] = { "OFF", "Progressive", "Standard", "On Rumble" };
	define PROGRESSIVE = 1, STANDARD = 2, ONRUMBLE = 3;
	
	const string RAPIDFIRE[] = { "OFF", "Dynamic", "Rounds per min", "Rounds per sec" };
	define DYNAMIC = 1, RPM = 2, RPS = 3;

	const string SHAPES[] = { "OFF", "Sticky", "Circular", "Tall Oval", "Wide Oval", "Spiral", "Helix"};
	define STICKY = 1, CIRCULAR = 2, TALLOVAL = 3, WIDEOVAL = 4, SPIRAL = 5, HELIX = 6;
	
	const string jump[] = { "OFF", "One Time Hold", "Repeat Hold", "DBtap LY UP" };
	define ont = 1, rep = 2, dbj = 3;
	
	const string SHOT_ACTIVATOR[] = { "ADS + FIRE", "ADS Only", "FIRE Only" };
	define ADSFIRE = 0, ADSONLY = 1, FIREONLY = 2;
	
	const string SENSITIVITY[] = { "OFF", "Custom Sens", "Dynamic Sens" };
	define CUSTOMSENS = 1, DYNAMICSENS = 2;
	
	const string dpad[] = { "OFF", "Left Stick", "Right Stick" };
	define lfs = 1, rfs = 2;
	
	const string lootrun[] = { "OFF", "Normal", "Loot Run" , "Parkour" };
	define nm = 1, lr = 2, pr=3;
	
	const string SLIDECANCEL[] = { "OFF", "ModernWarfare", "ColdWar" };
	define MW = 1, CW = 2;
	
		const string easyrun[] = { "OFF", "LY 95" , "DB LY", "L3/LS", "LY 95 & DB ADS", "L3/LS & DB ADS" , "Run & Fire" };
	define lyn = 1, dby = 2, l3n = 3,lyd = 34, l3d = 5, rnf = 6;
	
	const string switchstick[] = { "OFF", "Left and Right", "Left Stick ADS", "Right Stick ADS" };
	define ltorsw = 1, leftsw = 2, rightsw = 3;
	
	const string quick[] = { "OFF", "FPS",  "Thirdperson", "OnTheFly Recoil" };
	define fps=1, qm = 2, otf = 3;
	
	const string gyro[] = { "OFF", "Press", "Turbo", "Race and Drift" , "Side Walk/Press"  };
	define press=1, turbo = 2, race = 3, side = 4;
	
	const string reload[] = { "OFF","Cancel", "Automatic", "Canc and Auto"};
	define cr=1, aut = 2 ,cra = 3;
	
	const string lmod[] = { "OFF", "Press Both", "Turbo", "Press Only", "Auto Fire", "Strafe" , "Jump" , "Crouch"  };
	define pressl=1, turbol = 2,switchl = 3,firel = 4, strafel = 5, jumpl = 6,  crouchl = 7;
	
	const string rmod[] = { "OFF", "Press Both", "Turbo", "Press Only", "Auto ADS", "Strafe" , "Jump" , "Crouch"  };
	define pressr=1, turbor = 2,switchr = 3,firer = 4, strafer = 5 , jumpr = 6, crouchr = 7;
	
	const string hair[] = { "OFF", "Hair Trigger", "Block Rumble" , "Hair & Rumble" };
	define hairr = 1, rumble = 2, hr=3;
	
	const string polar[] = { "OFF",   "Polar V2", "Stealth", "Crescens" , "Polar Mix"};
	define  polarv2 = 1, stealthp = 2, Cresce = 3, mixp = 4;
	
// Toggles for [3] Profiles: [profile_idx] = 0, 1 and 2
	int toggle_antirecoil[3];    // #1
	int toggle_rapidfire[3];     // #2
	int toggle_sensshot[3];     // #3
	int toggle_sensshot2[3];     // #4
	int toggle_camangle[3];      // #6
	int toggle_holdBreath[3];    // #9
	int toggle_easyrun[3];		// #13
	int toggle_polar[3]; 	// #14
	int toggle_aimabuse[3];      // #15
	int toggle_switchstick[3]; 
	int toggle_aimassist[3]; 
	int toggle_quick[3];       // #11
	int toggle_gyro[3];      // #12
	int toggle_autorun[3];		// #10
// Amount of multi toggle - Used for display profiles
	define AMOUNT_OF_MULTI_TOGGLE = 14;

// Toggles
	int toggle_dpad;
	int toggle_slideCancel;
	int toggle_vm;
	int toggle_reload;
	int toggle_hairTrigger;
	int toggle_jump;
	int toggle_burstfire;
	


//////////////////////////////////////////////////////////////////////////////////////////////////////////////////// V A L U E S   N A M E   A N D   V A R I A B L E S   F O R   V A L U E S

// Value Name
	const string VALNAME [] = {
			"AR Start"     , "AR End"         , "AR Time"       , "AR Horiz" , "Rumble Power"  , "Rate of Fire" , 
// valName_idx = 0         |       1          |      2          |       3    |       4         |       5
 			"Sensitivity ADS"     , "Radius"        , "Steps"    , "Strenght"     , "Release LX" , "Strafe Time",
// valName_idx = 6         |       7          |      8          |       9    |       10        |     11         |   
 			"Initial Sens" , "Increase Point" , "Restart Point" , "Max Sens" , "Increase Rate" , "General"      , "ADS"        , "FIRE" , "ADS + FIRE" ," LY Time", "Repeat Time", "fire stop time", "Cancel Time",  "Hold Time"   , "Release Time" , "ADS Sens", "Jump Time","Reload Time", "Radius", "Steps"  , "PolarAngle", "PolarRadius" , "PolarAngle", "PolarRadius" 
// valName_idx = 12        |      13          |      14         |      15    |      16         |       17       |      18      |   19   |      20      |    21		 |    22		 |    23		 |    24		 |    25			 |    26	 |    27
	};	
	
// Text: _V mean VALNAME
	define 	START_V = 0      , END_V = 1        , TIME_V = 2       , HORIZ_V = 3     , RUMBLEPOWER_V = 4, RATE_V = 5        ,
	        sens_V = 6  , RADIUS_V = 7     , STEPS_V = 8     , lstors_V = 9  , deadzonerx_V = 10,  
	        STRAFETIME_V = 11, DSINITIAL_V = 12 , DSINCREASE_V = 13, DSRESTART_V = 14, DSMAX_V = 15     , DSRATE_V = 16     , 
	        GENERAL_V = 17   , ADS_V = 18       , FIRE_V = 19      , ADSFIRE_V = 20,  startrun_V = 21,loottime_V = 22,   stop_V = 23 , 
	        CANCELTIME_V = 24,  HOLDTIME_V = 25  , RELEASETIME_V = 26 , adsswitch_V = 27 , jumptime_V = 28, rltime_V = 29, DAMRadius_V = 30     , DAMAngle_V = 31  
	        , PolarABoost_v = 32     , PolarRBoost_V = 33, PolarABoostc_v = 34     , PolarRBoostc_V = 35;  // add as many as there are VALNAME[]

// Index 
	int valName_idx;

// Adjustable values for [3] profiles: [profile_idx] = 0, 1 and 2 
	int antirecoil_start[3];
	int antirecoil_end[3];
	int antirecoil_time[3];
	int antirecoil_horizontal[3];
	int rumble_power[3];
	int rate_of_fire[3];

// Adjustable values
	// sensshot values
	int sens; // BurstFire has toggle for each profile BUT the same values for each profile
	
	// AIM Assist values
	int aimassist_radius = 20; // AIM Assist has toggle for each profile BUT the same values for each profile
	int aimassist_angle = 15;
	int DAMRadius = 20;
	int DAMAngle = 25;
	int DAMRadiusBoost = 8;
	int DAMAngleBoost = 12;
	int DamAngle,DamCos,DamSin,DamX,DamY,ActualMagnitude,MaxMagnitude,RadiusDam,AngleDam;
	const int8 DamPolar[]= {
    100,100,100,100,100,100,100,100,99,99,99,99,98,98,97,97,97,96,95,95,94,94,93,92,92,91,90,89,89,88,87,86,85,84,83,82,81,80,79,78,77,75,74,73,72,
    71,70,69,67,66,65,63,62,61,59,58,56,55,53,52,50,49,47,46,44,43,41,40,38,36,35,33,31,30,28,26,25,23,21,20,18,16,14,13,11,9,7,6,4,2,0,-1,-3,-5,-7,
    -8,-10,-12,-13,-15,-17,-19,-20,-22,-24,-25,-27,-29,-30,-32,-34,-35,-37,-39,-40,-42,-43,-45,-46,-48,-50,-51,-53,-54,-55,-57,-58,-60,-61,-62,-64,
    -65,-66,-68,-69,-70,-71,-73,-74,-75,-76,-77,-78,-79,-80,-81,-82,-83,-84,-85,-86,-87,-88,-89,-89,-90,-91,-92,-92,-93,-93,-94,-95,-95,-96,-96,-97,
    -97,-97,-98,-98,-99,-99,-99,-99,-100,-100,-100,-100,-100,-100,-100,-100,-100,-100,-100,-100,-100,-100,-99,-99,-99,-98,-98,-98,-97,-97,-96,-96,-95,
    -94,-94,-93,-93,-92,-91,-90,-90,-89,-88,-87,-86,-85,-84,-83,-82,-81,-80,-79,-78,-77,-76,-75,-74,-72,-71,-70,-69,-67,-66,-65,-63,-62,-61,-59,-58,
    -56,-55,-53,-52,-50,-49,-47,-46,-44,-43,-41,-40,-38,-36,-35,-33,-31,-30,-28,-26,-25,-23,-21,-20,-18,-16,-14,-13,-11,-9,-7,-6,-4,-2,0,2,4,6,7,9,
    11,13,14,16,18,20,21,23,25,26,28,30,31,33,35,36,38,40,41,43,44,46,47,49,51,52,54,55,56,58,59,61,62,63,65,66,67,69,70,70,72,73,74,75,77,78,79,80,
    81,82,83,84,85,86,87,88,89,89,90,91,92,92,93,94,94,95,95,96,97,97,97,98,98,99,99,99,99,100,100,100,100,100,100,100
};
	define DamPolarBoost  = 2;
	define DAMPolarAAHip  = 3;
	int DamPolarAssist_On_Off = DAMPolarAAHip 
	int RadiusBoost = TRUE;
int AngleBoost = TRUE;
int PolarRadius = 10;
int PolarAngle = 15;

int PolarRadiusc = 15;
int PolarAnglec = 20;
int PolarRBoost = 6;
int PolarABoost = 10;
int Angle; int Speed; int Radius;

int POLARBOOSTER     = TRUE;
int PrBoost = 6;
int mn=326, mx=328; 
int rnd;
int RS_gr;
int stick_input
	// cam angle values;
	int lstors;
	int deadzonerx;
	int onOffcam ;
	
	// Strafe Shot value
	int strafe_time = 400; // StrafeShot has a toggle for each profile BUT the same value for each profile
	
  // Custom Sens values
	int genSens;
	int adsSens;
	int hipSens;
	int adsfireSens;
	int customsens;

	

// easyrun
	int onOffeasyrun; 

define Max_Double_Tap_Time_uply= 500;
define Min_Sprint_up_Activation_Speed_uply = -80;
define Max_Sprint_up_Deactivation_Speed_uply= -30;
 
 
 
int tap_count_uply;
int double_tap_timer_uply;
int released_ly_uply;

// dbup values
define Max_Double_Tap_Time_up= 400;
define Min_Sprint_up_Activation_Speed_up = -80;
define Max_Sprint_up_Deactivation_Speed_up= -30;
int tap_count_up;
int double_tap_timer_up;
int released_ly_up;
 
// dbdown values
define Max_Double_Tap_Time_down= 400;
define Min_Sprint_up_Activation_Speed_down = 80;
define Max_Sprint_up_Deactivation_Speed_down= 30;
int tap_count_down;
int double_tap_timer_down;
int released_ly_down;
// dbleft values
define Max_Double_Tap_Time_left= 400;
define Min_Sprint_up_Activation_Speed_left = -80;
define Max_Sprint_up_Deactivation_Speed_left= -30;
int tap_count_left;
int double_tap_timer_left;
int released_ly_left;
// dbright values
define Max_Double_Tap_Time_right= 400;
define Min_Sprint_up_Activation_Speed_right = 80;
define Max_Sprint_up_Deactivation_Speed_right= 30;
int tap_count_right;
int double_tap_timer_right;
int released_ly_right;
// time
int startrun; 
int stop;

// hold
int onOffhold1;
int onOffhold2;

int loottime; 

// Slide Cancel Time
	int cancel_time;
	
	int aimabuse_hold;
	int aimabuse_release;

int adsswitch = 5;
int jumptime;
int VMSpeed;

//cancel reload
int rld_1 = 4000; 
int rld_2 = 4000;
int rof1 = 50; 
int rof2 = 50;
int rld_time; 
int b_reload=FALSE;
int WPN_1=TRUE;
int rof;

// Pvars
int p_current_bit
int p_current_slot
int p_current_value
int p_temp
int p_bits

int P_Full_Bitmask = -1;

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////// C O N T R O L L E R   M E N U   N A M E  

// Controller Menu Name
	const string CONTROLLERNAME[] = {
			       		 "ADS "    , "Fire " 		,"Jump" ,	 "Crouch" , "Reload" 	, "Loot/Switch WPN"   		 , "Sprint "  ,"SPAM 1" , "Spam 2" 
// controllerName_idx = 0        |      1      |         2      |       3      |      4         |        5        |         6        |        7        |  
           			 , "Hold BTN1"  , "Hold BTN2" ,		"DBTap LY UP"	, "DBTap LY Down", "DBTap LX Left", "DBTap LX Right"  , "BumperCombo" , "Invert"  , "L2 Mod BTN", "R2 Mod BTN", "ACCX Left", "ACCX Right"
// controllerName_idx =   8      |       9   			  |       10   			  |       11     		|       12      |     13				|     14			|     15		 |     16	  		|     17		 	  |     18				 |     19				|     20	  		|     21
	};

// Text: _C mean Controller menu
	define ADS_BTN_C = 0    , FIRE_BTN_C = 1  ,JUMP_BTN_C = 2    , CROUCH_BTN_C = 3, reload_BTN_C=4 ,loot_BTN_C = 5,   SPRINT_BTN_C = 6,MELEE_BTN_C = 7 , MELEE2_BTN_C = 8
	   		,hold1_C=9, hold2_C=10 ,dbup_C=11	 , dbdown_C=12, dbleft_C=13, dbright_C=14, bumper_BTN_C = 15, invert_M=16   , deadshot_M = 17, deadshot2_M = 18, accxl_M = 19, accxr_M = 20; // add as many as there are CONTROLLERNAME[]
	
	int controllerName_idx;
	
	const string LAYOUT_BTN_PS[] = {"L2"  , "R2" , "L1"  , "R1"  , "CROSS"   , "CIRCLE"  , "SQUARE" , "TRIANGLE"  , "R3"  , "L3"     , "Dpad UP", "Dpad Down", "Dpad Left", "Dpad Right", "OFF"   };
	const string LAYOUT_BTN_XB[] = {"LT"  ,  "RT"   , "LB"  , "RB"  , "A"       , "B"       , "X"  , "Y"           , "RS"  , "LS"      , "Dpad UP", "Dpad Down", "Dpad Left", "Dpad Right"  , "OFF"  };
	const uint8 BTN[]            = { PS4_L2,  PS4_R2, PS4_L1, PS4_R1, PS4_CROSS , PS4_CIRCLE, PS4_SQUARE,  PS4_TRIANGLE, PS4_R3, PS4_L3, PS4_UP, PS4_DOWN, PS4_LEFT, PS4_RIGHT};
	
	
	int toggle_fire_btn = 1;
	int toggle_jump_btn = 4;
	int toggle_crouch_btn = 5;
	int toggle_melee_btn = 14;
	int toggle_melee2_btn = 14;
	int toggle_sprint_btn = 9;
	int toggle_reload_btn = 6;
	int toggle_bumper = 14;
	int	toggle_dbup = 14;
	int	toggle_dbdown = 14;
	int	toggle_dbleft = 14;
	int	toggle_dbright = 14;
	int	toggle_loot_btn = 7;
	int toggle_invert;
	int toggle_hold1 = 14;
	int toggle_unuse;
	int toggle_ads_btn = 0;
	int toggle_deadshot = 14;
	int toggle_deadshot2 = 14;
	int toggle_accxl = 14;
	int toggle_accxr = 14;
	int toggle_hold2 = 14;



//////////////////////////////////////////////////////////////////////////////////////////////////////////////////// P R O F I L E S   M E N U   N A M E 

// Profiles Menu Name
	const string PROFILESNAME[] = {
			        "Prim/Sec BTN" ,   "Custom Profile" ,   "Resync BTNs",   "Doubltap BTN 1",   "Doubltap BTN 2"	,   "Remap 1",   "Remap 2",   "Remap 3",   "Remap 4"	}; // add as many as you want
// controllerName_idx = 0          |        1           |           2				3				4					5				6

// Text: _P mean Profile menu
	define 	       PRIM_SEC_P = 0  ,    CUSTOM_P= 1    ,    RESYNC_P = 2 ,br1_C = 3    ,   br2_C = 4, remap1_C = 5    ,   remap2_C = 6, remap3_C = 7    ,   remap4_C = 8,  presstime_C = 9;  // add as many as there are PROFILESNAME[]	
	
	int profilesName_idx;

	const string PROFILEBTN_PS[] = { "" ,  "L2" , "R2"  , "L1"  , "R1"  , "CROSS"  , "CIRCLE"  , "SQUARE"  , "TRIANGLE"  , "R3"  , "L3"  , "Dpad UP", "Dpad DOWN", "Dpad LEFT", "Dpad RIGHT"};
	const string PROFILEBTN_XB[] = { "" ,  "LT" , "RT"  , "LB"  , "RB"  , "A"      , "B"       , "X"       , "Y"         , "RS"  , "LS"  , "Dpad UP", "Dpad DOWN", "Dpad LEFT", "Dpad RIGHT"};
	//         toggle_xxxxxBTN[] =   0  |    1  |   2   |   3   |   4   |    5     |     6     |     7     |      8      |   9   |   10  |     11   |      12    |      13    |      14
	const int8 PROFILE_BTN[]   = { -1  , PS4_L2, PS4_R2, PS4_L1, PS4_R1, PS4_CROSS, PS4_CIRCLE, PS4_SQUARE, PS4_TRIANGLE, PS4_R3, PS4_L3, PS4_UP   , PS4_DOWN   , PS4_LEFT   , PS4_RIGHT   };
	
	int toggle_pressBTN [3];
	int toggle_holdBTN[3]; 
	int	toggle_br1[3];
	int	toggle_br1activat[3];
	int	toggle_br2[3];
	int	toggle_br1activat2[3];

	int	toggle_remap1[3];
	int	toggle_to1[3];
	int	toggle_remap2[3];
	int	toggle_to2[3];
	int	toggle_remap3[3];
	int	toggle_to3[3];
	int	toggle_remap4[3];
	int	toggle_to4[3];
	int	toggle_presstime[3];
	int	toggle_press[3];


//////////////////////////////////////////////////////////////////////////////////////////////////////////////////// M I S C   V A R I A B L E S

// Constant bytes - Convert numbers array - ASCII_NUM[column number]
	const uint8 ASCII_NUM[] = 
//	  0  1  2  3  4  5  6  7  8  9  (column numbers)
  	{48,49,50,51,52,53,54,55,56,57};
	
// Variables for functions 
	int i;

data(
//  0 Blue    1 Pink   2 SkyBlue  3 Green         
    1,0,0,0,  0,0,0,1,  1,0,1,0,  0,0,1,0,
//  4 Yellow  5 White   6 Red      7 OFF         
    0,1,1,0,  1,1,1,0,  0,1,0,0,  0,0,0,0 );     
     
// Refresh OLED
	int display_title = TRUE;
	int display_new; 
	int display_info;
	int display_black;

// ModMenu / ModEdit / KillSwitch ...
	int MainMenu;
	int ModMenu;	
	int ModEdit;
	int ControllerMenu;
	int ProfilesMenu;
	int WheelModeMenu;
	int KillSwitch;

// Anti Recoil  
	//int rumble;
	int rumble_recoil;
	int antirecoil_boost;
	
// RapidFire / sensshot
	int hold_time;                                                    
	int rest_time;
	int led_on;
	int led_off;
	
// Counter / Timer
	int count_black; 
	int info_timer;
	
// Profiles
	int custom_profile;
	int profile_idx; 
 	
//Misc
	int currentSlot;
	int current_info;
	
//BR time
define Max_Double_Tap_Time_br= 400;
define Min_Sprint_up_Activation_Speed_br = 95;
define Max_Sprint_up_Deactivation_Speed_br= 80;
 
 
 
int tap_count_br;
int double_tap_timer_br;
int released_ly_br;
 
define Max_Double_Tap_Time_br2= 400;
define Min_Sprint_up_Activation_Speed_br2 = 95;
define Max_Sprint_up_Deactivation_Speed_br2= 80;
 
 
 
int tap_count_br2;
int double_tap_timer_br2;
int released_ly_br2;
 

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////// I N I T   S E C T I O N 

init {   
    load_spvars();
    
} 

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////// M A I N   S E C T I O N   S T A R T   
main { // main section start
////////////////////////////////////////////////////////////////////////////////////////////////////////// D E B U G   

	set_val(TRACE_1, toggle_antirecoil[profile_idx]);
	set_val(TRACE_2, speed_toggle_UP[profile_idx]);
	set_val(TRACE_3, toggle_rapidfire[profile_idx]);
	set_val(TRACE_4, speed_toggle_RIGHT[profile_idx]);
	set_val(TRACE_5, speed_toggle_quick[profile_idx]);

////////////////////////////////////////////////////////////////////////////////////////////////////////// C R O S S O V E R   P S 4  /  X B O X

    // If PS4 console:
    if(get_console() == PIO_PS4)
    {
    	if(get_controller() != PIO_PS4) // If not PS4 controller:
    	{
        	if(get_ival(PS4_SHARE)) // View
        	{
        		if(get_ival(PS4_R3)) // RS + View =  ScreenShot
        		{
					set_val(PS4_SHARE,100);
                	set_val(PS4_TOUCH,0);
                	set_val(PS4_R3,0);
        		}
        		else // View only = Touch Pad
        		{
        			set_val(PS4_TOUCH, 100);
        			set_val(PS4_SHARE, 0);
        		}
        	}
    	}
    }
    // If XBOX console:
    else if(get_console() == PIO_XB360)
	{
		if(get_controller() == PIO_PS4) // If PS4 controller:
			swap(PS4_TOUCH, PS4_SHARE);
	}
	
////////////////////////////////////////////////////////////////////////////////////////////////////////// K I L L S W I T C H   T O G G L E 

	if(!MainMenu && !ModMenu && !ModEdit && !ControllerMenu && !ProfilesMenu)
	{
	// KillSwitch ON or OFF method
		if(get_ival(PS4_L2) && event_press(PS4_SHARE)) 
		{			
			KillSwitch = !KillSwitch;
			
			if(KillSwitch) 
				combo_run(RUMBLE_OFF);	
				
			else
			{
				combo_run(RUMBLE_ON);
				display_title = TRUE;	
			}
		}
	
  
	// KillSwitch - exit method (FALSE, script is actived)
		if(KillSwitch) 
		{

	
			if(event_press(PS4_CIRCLE) && get_brtime(PS4_CIRCLE) < 200) // Double tap CIRCLE/B  to exit
			{
				KillSwitch = FALSE;
				combo_run(RUMBLE_ON);
				display_title = TRUE; 
			}
			combo_run(KILLSWITCH);
		}
		else 
			combo_stop(KILLSWITCH);
			
	// Block button	
		if(get_ival(PS4_L2))
		{
			if(get_controller() != PIO_PS4) 
				set_val(PS4_TOUCH, 0);
			else
				set_val(PS4_SHARE, 0);
		}
	}
	
////////////////////////////////////////////////////////////////////////////////////////////////////////// S C R I P T   A C T I V E 

	if(!KillSwitch)
	{
/////////////////////////////////////////////////////////////////////////////////////////// M A I N   M E N U   T O G G L E

		if(get_ival(PS4_L2))
		{	
			if(event_release(PS4_OPTIONS))
			{
				cls_oled(OLED_BLACK);
    			
				if(ModEdit)
				{
					ModEdit = FALSE;
					save();
					
				}
				else if(ModMenu)
				{
					ModMenu = FALSE;
					save();
					
				}
				else if(ControllerMenu)
				{
					ControllerMenu = FALSE;
					save();
				}
				else if(ProfilesMenu)
				{
					ProfilesMenu = FALSE;
					save();
					
				}
				else if(WheelModeMenu)
				{
				    WheelModeMenu = FALSE;
					save();
					
				}
				
				else 
					MainMenu = !MainMenu;
					
					
				if(!MainMenu)
				{
					combo_run(RUMBLE_OFF); 
					save(); 
				}
				else if(MainMenu)
				{
					menuName_idx = MODMENU_MM;        
					current_info = 0;		
					combo_run(RUMBLE_ON);
					draw_main_menu();
					display_new = TRUE;
					display_info = TRUE;
					
				}
			}
			set_val(PS4_OPTIONS, 0);
		} // L2/LT section end

/////////////////////////////////////////////////////////////////////////////////////////// A N Y   M E N U   A C T I V E

		if(ModMenu || ModEdit || MainMenu || ControllerMenu || ProfilesMenu || WheelModeMenu)  
		{		
		// Buttons animation / Menus Navigation
			button_animation(); 
			
		//Stop screen Saver

			
		// Timer to display user infos
			info_timer += get_rtime();
	
			if(info_timer > 2000)
			{
				current_info ++;
				display_info = TRUE;
			}
			
		// Save everything and EXIT
			if(!get_ival(PS4_L2) && event_release(PS4_PS) || event_press(XB1_B) && get_ptime(XB1_B)> 300)
				save();
				
		// block ALL inputs 
			block_btn(); // user function
		}
		
/////////////////////////////////////////////////////////////////////////////////////////// M A I N   M E N U   A C T I V E

		/*if(MainMenu){}*/
		
/////////////////////////////////////////////////////////////////////////////////////////// M O D S   M E N U   A C T I V E

		if(ModMenu) 
		{
////////////////////////////////////////////////////////// TOGGLE FOR MODS

		// Tap UP or DOWN to turn ON/OFF
	   		// Mods that may have different ON/OFF status depending on the active Profile
			toggle_antirecoil[profile_idx]    = toggle( modName_idx, ANTIRECOIL_M , ANTIRECOIL_TXT     , toggle_antirecoil[profile_idx]    );
			toggle_rapidfire[profile_idx]     = toggle( modName_idx, RAPIDFIRE_M  , RAPIDFIRE_TXT      , toggle_rapidfire[profile_idx]     );
			toggle_aimassist[profile_idx]     = toggle( modName_idx, AIMASSIST_M  , SHAPES_TXT         , toggle_aimassist[profile_idx]     );
			toggle_sensshot[profile_idx]     = toggle( modName_idx, sensshot_M  , lmod_TXT          , toggle_sensshot[profile_idx]     );
			toggle_sensshot2[profile_idx]     = toggle( modName_idx, sensshot2_M  , rmod_TXT          , toggle_sensshot2[profile_idx]     );
			toggle_camangle[profile_idx]      = toggle( modName_idx, camangle_M   , ONOFF_TXT          , toggle_camangle[profile_idx]      );
			toggle_holdBreath[profile_idx]    = toggle( modName_idx, HOLDBREATH_M , ONOFF_TXT          , toggle_holdBreath[profile_idx]    );
			toggle_polar[profile_idx]    = toggle( modName_idx, polar_M , polar_TXT          , toggle_polar[profile_idx]    );
			toggle_quick[profile_idx]       = toggle( modName_idx, quick_M    , quick_TXT          , toggle_quick[profile_idx]       );
			toggle_gyro[profile_idx]      = toggle( modName_idx, gyro_M   , gyro_TXT          , toggle_gyro[profile_idx]      );
			toggle_easyrun[profile_idx]	      = toggle( modName_idx, easyrun_M    , easyrun_TXT          ,  toggle_easyrun[profile_idx]    );
			toggle_autorun[profile_idx]	     = toggle( modName_idx, AUTORUN_M     , lootrun_TXT       , toggle_autorun[profile_idx]	     );
			toggle_aimabuse[profile_idx]      = toggle( modName_idx, AIMABUSE_M   , ONOFF_TXT          , toggle_aimabuse[profile_idx]      );
			toggle_switchstick[profile_idx]    = toggle( modName_idx, switchstick_M    , switchstick_TXT       , toggle_switchstick[profile_idx]    );
		// Mods that have same ON/OFF status on every Profiles
			toggle_dpad = toggle( modName_idx, dpad_M , dpad_TXT , toggle_dpad );
			toggle_slideCancel = toggle( modName_idx, SLIDECANCEL_M , SLIDECANCEL_TXT , toggle_slideCancel );
			toggle_vm = toggle( modName_idx, vm_M , ONOFF_TXT , toggle_vm );
			toggle_reload = toggle( modName_idx, cr_M , cr_TXT , toggle_reload );
			toggle_jump = toggle( modName_idx, jump_M , jump_TXT , toggle_jump );
			toggle_hairTrigger = toggle( modName_idx, hair_M , hair_TXT , toggle_hairTrigger );
			
		} // ModMenu section end
		
/////////////////////////////////////////////////////////////////////////////////////////// E D I T   M E N U   A C T I V E

		if(ModEdit) 
		{
////////////////////////////////////////////////////////// EDIT ADJUSTABLE VALUES

		// Edit value: hold CROSS/A + UP (+1 or +10) or DOWN (-1 or -10) or RIGHT (+10 or +100) or LEFT (-10 or -100)	
			if(get_ival(PS4_CROSS)) 
			{
			// Mods that may have different values depending on the active Profile                                 val min, val max, inc/dec R/L, increase/decrease UP/DOWN 
				antirecoil_start[profile_idx]      = edit_val( START_V       , antirecoil_start[profile_idx]     ,    -99 ,     99 ,          1 ,          10               ); 
				antirecoil_end[profile_idx]        = edit_val( END_V         , antirecoil_end[profile_idx]       ,    -99 ,     99 ,          1 ,          10               ); 
				antirecoil_time[profile_idx]       = edit_val( TIME_V        , antirecoil_time[profile_idx]      ,      0 ,  10000 ,        100 ,        1000               );  
				antirecoil_horizontal[profile_idx] = edit_val( HORIZ_V       , antirecoil_horizontal[profile_idx],    -99 ,     99 ,          1 ,          10               ); 
				rumble_power[profile_idx]          = edit_val( RUMBLEPOWER_V , rumble_power[profile_idx]         ,    -60 ,     60 ,          1 ,          10               );
				if(toggle_rapidfire[profile_idx] == RPM)
					rate_of_fire[profile_idx]      = edit_val( RATE_V        , rate_of_fire[profile_idx]         ,     60 ,    750 ,          1 ,          10               );
				else if(toggle_rapidfire[profile_idx] == RPS)
					rate_of_fire[profile_idx]      = edit_val( RATE_V        , rate_of_fire[profile_idx]         ,      1 ,     25 ,          1 ,          10               );
					
				
			// Mods that have same value on every Profiles
				sens			       = edit_val( sens_V  		 , sens  			    , 0 ,  1000 , 1 , 10 );
				aimassist_radius       = edit_val( RADIUS_V      , aimassist_radius       , 0 ,    50 ,  1 ,  10 );
				aimassist_angle        = edit_val( STEPS_V       , aimassist_angle        , 0 ,   50 ,  1 ,  10 );
				DAMRadius       = edit_val( DAMRadius_V      , DAMRadius       , 0 ,    50 ,  1 ,  10 );
				DAMAngle        = edit_val( DAMAngle_V       , DAMAngle        , 0 ,   50 ,  1 ,  10 ); 
				PolarAngle       = edit_val( PolarABoost_v      , PolarAngle       , 0 ,    50 ,  1 ,  10 );
				PolarRadius        = edit_val( PolarRBoost_V       , PolarRadius        , 0 ,   50 ,  1 ,  10 );
				PolarAnglec       = edit_val( PolarABoostc_v      , PolarAnglec       , 0 ,    50 ,  1 ,  10 );
				PolarRadiusc        = edit_val( PolarRBoostc_V       , PolarRadiusc        , 0 ,   500 ,  1 ,  10 ); 
				lstors     			   = edit_val( lstors_V      , lstors          , 0 ,   500 , 1 , 10 );
				deadzonerx     		   = edit_val( deadzonerx_V , deadzonerx       , 0 ,   500 , 1 , 10 );
				genSens                = edit_val( GENERAL_V     , genSens                , 1 ,   327 , 1  , 10  );
				adsSens                = edit_val( ADS_V         , adsSens                , 1 ,   327 , 1  , 10  );
				hipSens                = edit_val( FIRE_V        , hipSens                , 1 ,   327 , 1  , 10  );
				adsfireSens            = edit_val( ADSFIRE_V     , adsfireSens            , 1 ,   327 , 1  , 10  );
				startrun            = edit_val( startrun_V      , startrun		      , 0 , 100, 1 , 10 );
				adsswitch            = edit_val( adsswitch_V      , adsswitch		      , 0 , 100, 1 , 10 );
				jumptime            = edit_val( jumptime_V      , jumptime		      , 50 , 1000, 50 , 100 );
				stop	               = edit_val( stop_V        , stop     		      , 0 , 10000 , 100 , 1000 );
				cancel_time            = edit_val( CANCELTIME_V  , cancel_time            , 1 ,   200 , 1  , 10  );
				aimabuse_hold          = edit_val( HOLDTIME_V    , aimabuse_hold          , 0 ,   500 , 10 , 100 );
				aimabuse_release       = edit_val( RELEASETIME_V , aimabuse_release       , 0 ,   500 , 10 , 100 );
				loottime            = edit_val( loottime_V      , loottime		      , 10 , 1000, 10 , 100 );
				rld_1            = edit_val( rltime_V      , rld_1		      , 100 , 10000, 100 , 1000 );
			} // CROSS/A section end	
			
////////////////////////////////////////////////////////// FINDS THE VALUES AVAILABLE FOR EACH OF THE MODS

			else // if NOT CROSS/A
			{	
				if(modName_idx == ANTIRECOIL_M)  
				{
				// AntiRecoil On Rumble
					if(toggle_antirecoil[profile_idx] == ONRUMBLE) 
						valName_idx = cycle(valName_idx, HORIZ_V, RUMBLEPOWER_V );   // from HORIZ_V to RUMBLEPOWER_V
				// AntiRecoil Standard
					else if(toggle_antirecoil[profile_idx] == STANDARD)
						valName_idx = cycle(valName_idx, END_V , HORIZ_V  ); // END_V and HORIZ_V only
				// AntiRecoil Progressive
					else 
						valName_idx = cycle(valName_idx, START_V  , HORIZ_V     ); // from START_V to HORIZ_V
				}
				if(modName_idx == polar_M)  
				{
					 if(toggle_polar[profile_idx] == 1)
						valName_idx = cycle(valName_idx, DAMRadius_V , DAMAngle_V  ); // END_V and HORIZ_V only
					else if(toggle_polar[profile_idx] == 2)
						valName_idx = cycle(valName_idx, PolarABoost_v , PolarRBoost_V  ); // END_V and HORIZ_V only
					else if(toggle_polar[profile_idx] == 3)
						valName_idx = cycle(valName_idx, PolarABoostc_v , PolarRBoostc_V  ); // END_V and HORIZ_V only
					else if(toggle_polar[profile_idx] == 4)
						valName_idx = cycle(valName_idx, DAMRadius_V , PolarRBoost_V  ); // END_V and HORIZ_V only
				}
				if(modName_idx == RAPIDFIRE_M)   valName_idx = cycle(valName_idx, RATE_V      , RATE_V        ); // RATE_V only
				if(modName_idx == sensshot_M)   valName_idx = cycle(valName_idx, sens_V    , sens_V   ); // from BFHOLD_V to sens_V
				if(modName_idx == sensshot2_M)   valName_idx = cycle(valName_idx, sens_V    , sens_V   ); // from BFHOLD_V to sens_V
				if(modName_idx == camangle_M )   valName_idx = cycle(valName_idx, lstors_V  , deadzonerx_V ); // lstors_V and  deadzonerx_V
				if(modName_idx == AUTORUN_M )   valName_idx = cycle(valName_idx, startrun_V  , loottime_V );
				if(modName_idx == easyrun_M)     valName_idx = cycle(valName_idx, stop_V    , stop_V   );
				if(modName_idx == switchstick_M) valName_idx = cycle(valName_idx, adsswitch_V    , adsswitch_V   );
				if(modName_idx == AIMASSIST_M) valName_idx = cycle(valName_idx, RADIUS_V    , STEPS_V   );
				if(modName_idx == jump_M) valName_idx = cycle(valName_idx, jumptime_V    , jumptime_V   );
				if(modName_idx == AIMABUSE_M )   valName_idx = cycle(valName_idx, HOLDTIME_V  , RELEASETIME_V ); // HOLDTIME_V and  RELEASETIME_V
				if(modName_idx == cr_M )   valName_idx = cycle(valName_idx, rltime_V  , rltime_V ); // HOLDTIME_V and  RELEASETIME_V
				
				
				
				if(modName_idx == SLIDECANCEL_M  )   valName_idx = cycle(valName_idx, CANCELTIME_V, CANCELTIME_V  ); // CANCELTIME_V only
			} // NOT EDIT_BTN section end
			
		} // ModEdit section end	
		
/////////////////////////////////////////////////////////////////////////////////////////// C O N T R O L L E R   M E N U   A C T I V E

		if(ControllerMenu)
		{
////////////////////////////////////////////////////////// CHOOSE THE LAYOUT OF THE BUTTONS / TOGGLE HAIR TRIGGER AND BLOCK RUMBLE

			toggle_ads_btn      = toggle( controllerName_idx, ADS_BTN_C      , LAYOUT_BTN_PS_TXT, toggle_ads_btn      );
			toggle_fire_btn     = toggle( controllerName_idx, FIRE_BTN_C     , LAYOUT_BTN_PS_TXT, toggle_fire_btn     );
			toggle_jump_btn     = toggle( controllerName_idx, JUMP_BTN_C     , LAYOUT_BTN_PS_TXT, toggle_jump_btn     );
			toggle_crouch_btn   = toggle( controllerName_idx, CROUCH_BTN_C   , LAYOUT_BTN_PS_TXT, toggle_crouch_btn   );
			toggle_melee_btn    = toggle( controllerName_idx, MELEE_BTN_C    , LAYOUT_BTN_PS_TXT, toggle_melee_btn    );
			toggle_bumper    = toggle( controllerName_idx, bumper_BTN_C    , LAYOUT_BTN_PS_TXT, toggle_bumper    );
			toggle_sprint_btn   = toggle( controllerName_idx, SPRINT_BTN_C   , LAYOUT_BTN_PS_TXT, toggle_sprint_btn   );
			toggle_reload_btn  = toggle( controllerName_idx, reload_BTN_C  , LAYOUT_BTN_PS_TXT        , toggle_reload_btn  );
			toggle_melee2_btn       = toggle( controllerName_idx, MELEE2_BTN_C       , LAYOUT_BTN_PS_TXT        , toggle_melee2_btn       );
			toggle_dbup   = toggle( controllerName_idx, dbup_C  			 , LAYOUT_BTN_PS_TXT, toggle_dbup  		  );
			toggle_dbdown   = toggle( controllerName_idx, dbdown_C 			 , LAYOUT_BTN_PS_TXT, toggle_dbdown		  );
			toggle_dbleft   = toggle( controllerName_idx, dbleft_C  		 , LAYOUT_BTN_PS_TXT, toggle_dbleft  	  );
			toggle_dbright   = toggle( controllerName_idx, dbright_C 		 , LAYOUT_BTN_PS_TXT, toggle_dbright	  );
			toggle_loot_btn    = toggle( controllerName_idx, loot_BTN_C    , LAYOUT_BTN_PS_TXT, toggle_loot_btn    );
			toggle_hold1   = toggle( controllerName_idx, hold1_C 		 , LAYOUT_BTN_PS_TXT, toggle_hold1	  );
			toggle_hold2   = toggle( controllerName_idx, hold2_C 		 , LAYOUT_BTN_PS_TXT, toggle_hold2	  );
			toggle_invert   = toggle( controllerName_idx, invert_M    , ONOFF_TXT       ,  toggle_invert    );
			toggle_deadshot = toggle( controllerName_idx, deadshot_M  , LAYOUT_BTN_PS_TXT          , toggle_deadshot );
			toggle_deadshot2 = toggle( controllerName_idx, deadshot2_M  , LAYOUT_BTN_PS_TXT          , toggle_deadshot2 );
			toggle_accxl = toggle( controllerName_idx, accxl_M  , LAYOUT_BTN_PS_TXT          , toggle_accxl );
			toggle_accxr = toggle( controllerName_idx, accxr_M  , LAYOUT_BTN_PS_TXT          , toggle_accxr );
		}
		
		
		/////////////////////////////////////////////////////////////////////////////////////////// W H E E L M O D E   M E N U   A C T I V E


		if(WheelmodeMenu)
		{
//////////////////////////////////////////////////////////  TOGGLE ON\OFF


			if(!ModEdit)
			{
			// WheelMode
				if(toggle_WheelMode)
				{
				if(toggle_Wheelmode ==1)
					{
if (get_val (PS4_RX)) { set_val (PS4_R2); }

if (get_val (PS4_RY)) { set_val (PS4_CROSS); }

if (get_val (PS4_LY)) { set_val (PS4_L2); }

if (get_val (PS4_CROSS)) { set_val (PS4_TOUCH); }

sensitivity(PS4_R2, 1, 327);
	sensitivity(PS4_LX, 144, 327);
	deadzone(PS4_LX, PS4_L2, DZ_CIRCLE, 59);
	sensitivity(PS4_L2, 13, 1);
	
	 if (get_val(PS4_UP)) { set_val(PS4_LY, -100); }
  else if (get_val(PS4_DOWN)) { set_val(PS4_LY, 100); }
  else { set_val(PS4_LY, get_val(PS4_L2, 100)); }
  set_val(PS4_UP, 0);
  set_val(PS4_DOWN, 0);}
				if(toggle_WheelMode ==2)
					{off(); }
					
		
		
		
		
/////////////////////////////////////////////////////////////////////////////////////////// P R O F I L E   M E N U   A C T I V E

		/*if(ProfilesMenu){}*/
		
/////////////////////////////////////////////////////////////////////////////////////////// M O D S   S E C T I O N
		if(!MainMenu && !ModMenu && !ControllerMenu && !ProfilesMenu) 
		{
		
////////////////////////////////////////////////////////// MODS THAT ONLY WORK OUTSIDE ALL MENUS

			if(!ModEdit)
			{
			// Hair Trigger
				if(toggle_hairTrigger)
				{
				if(toggle_hairTrigger ==1)
					{
					deadzone(PS4_L2, PS4_R2, 99, 99);}
				if(toggle_hairTrigger ==2)
					{block_rumble();}
				if(toggle_hairTrigger ==3)
					{block_rumble();	
					deadzone(PS4_L2, PS4_R2, 99, 99);}
					}
		// 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜
		
			// Auto ADS / Auto FIRE
				
				if(toggle_gyro[profile_idx])
	{
	if(toggle_gyro == 1){		
				if(get_val(PS4_ACCX) <=-3)
				set_val(BTN[toggle_accxl], 100);
				if(get_val(PS4_ACCX) >=3)
				set_val(BTN[toggle_accxr], 100);
				}
if(toggle_gyro == 2){

				if(get_val(PS4_ACCX) >=3)
				{set_val(BTN[toggle_accxr], 100);
				combo_btn = BTN[toggle_accxr];
						combo_wait = 40;
						combo_run(SPAM);}
				
				if(get_val(PS4_ACCX) <=-3)
				{set_val(BTN[toggle_accxl], 100);
				combo_btn = BTN[toggle_accxl];
						combo_wait = 40;
						combo_run(SPAM);}
				}
				if(toggle_gyro == 3)
	{
	if(get_val(PS4_LX) > 5)
 {set_val(PS4_LX,get_ival (PS4_LX))}
  else if(get_val(PS4_ACCX) >=1)
 {set_val(PS4_LX,get_ival(PS4_ACCX) ); // Deadzone of the Xaxis, small movements are not processed.
 {sensitivity(PS4_LX,6,200);set_val(PS4_LX, (get_val(PS4_LX))); // in Red is the sensitivity 
}}
 if(get_val(PS4_LX) < -5)
 {set_val(PS4_LX,get_ival (PS4_LX))}
 else if(get_val(PS4_ACCX)<= -1)
 {set_val(PS4_LX,get_ival(PS4_ACCX) ); // Deadzone of the Xaxis, small movements are not processed.
 {sensitivity(PS4_LX,6,200);set_val(PS4_LX, (get_val(PS4_LX))); // in Red is the sensitivity 
}}

if(get_val(PS4_ACCX) >=1)
	 {set_val(BTN[toggle_accxl], 0);}
 if(get_val(PS4_GYROY) <=-8)
	 {set_val(BTN[toggle_accxr], 100);}
	  
	 
	 
	 if(get_val(PS4_ACCX)<= -1)
  {set_val(BTN[toggle_accxr], 0);}
 if(get_val(PS4_GYROY) >=8)
 {set_val(BTN[toggle_accxl], 100);}
 
}
if(toggle_gyro == side){		
				if(get_val(PS4_ACCX) <=-3)
				{set_val(PS4_LX, -100);}
				if(get_val(PS4_ACCX) <=-3)
				
				{
				set_val(BTN[toggle_accxl], 100);}
				
				if(get_val(PS4_ACCX) >=3)
				{set_val(PS4_LX, 100);}
				if(get_val(PS4_ACCX) >=3)
				
				{
				set_val(BTN[toggle_accxr], 100);}
				}
				}
				
				

				
				

				vm_tctrl(VMSpeed);	
		// 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜
		
			// Switch profile
				// ReSync
				if(get_val(PROFILE_BTN[toggle_holdBTN[RESYNC_P]]) )
				{
					if(event_press(PROFILE_BTN[toggle_pressBTN[RESYNC_P]]) )
					{
						profile_idx = cycle(profile_idx++, 0, 2);
						display_title = TRUE;
					}
					set_val(PROFILE_BTN[toggle_pressBTN[RESYNC_P]], 0)
				}
				
				// Custom
				else if(get_val(PROFILE_BTN[toggle_holdBTN[CUSTOM_P]]) )
				{
					
					if(event_press(PROFILE_BTN[toggle_pressBTN[CUSTOM_P]]) )
					{
						if(custom_profile == 0)
							custom_profile = 2;
						else
							custom_profile = 0;
							
						profile_idx = custom_profile;
						display_title = TRUE;
					}
					set_val(PROFILE_BTN[toggle_pressBTN[CUSTOM_P]], 0)
					
				}
				
				// Primary / Secondary
				else if(event_press(PROFILE_BTN[toggle_pressBTN[PRIM_SEC_P]]) )
				{
					if(custom_profile < 2)
						profile_idx = !profile_idx;
						
					display_title = TRUE;
				}
				if(profile_idx < 2)
					custom_profile = 0;
				else 
					custom_profile = 2;
					
		// 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜
		// share to touch
		if(get_controller() == PIO_XB1)
			    {if(get_val(XB1_SHARE)) {
							        set_val(XB1_SHARE,0);
							        set_val(PS4_TOUCH,100);
							    }}

							    

			// Hold Breath
				if(toggle_holdBreath[profile_idx])
				{
				
						if(get_val(BTN[toggle_ads_btn]) && get_ptime(BTN[toggle_ads_btn])>200)
							set_val(BTN[toggle_sprint_btn], 100);
							

					
				}
	
				
		// 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜
			
			// switchstick
				if(toggle_switchstick)
								
				{
								if(toggle_switchstick == ltorsw)
				{
		if(get_val(XB1_LX)) {
		set_val((XB1_RX),get_ival(XB1_LX));
		}
		if(get_val(XB1_RX)) {
		set_val((XB1_LX),get_ival(XB1_RX));
		
    }
		
			if(get_val(XB1_RX)) {
		set_val((XB1_LX),get_ival(XB1_RX));
		}
		if(get_val(XB1_LX)) {
		set_val((XB1_RX),get_ival(XB1_LX));
		}
		if(get_val(XB1_LY)) {
		set_val((XB1_RY),get_ival(XB1_LY));
		}
		if(get_val(XB1_RY)) {
		set_val((XB1_LY),get_ival(XB1_RY));
    }
    }
		
			if(get_val(XB1_RY)) {
		set_val((XB1_LY),get_ival(XB1_RY));
		if(get_val(XB1_LY)) {
		set_val((XB1_RY),get_ival(XB1_LY));
		}
		}
				if(toggle_switchstick == leftsw)
				{
			    if(get_val(BTN[toggle_ads_btn]) > adsswitch) 
			    set_val(XB1_RX,get_ival(XB1_LX)) 
			    
			    if(get_val(BTN[toggle_ads_btn]) > adsswitch) 
			    set_val(XB1_LX,0);
				
			    if(get_val(BTN[toggle_ads_btn]) > adsswitch) 
			    set_val(XB1_RY,get_ival(XB1_LY)) 
			    
			    if(get_val(BTN[toggle_ads_btn]) > adsswitch)  
			    set_val(XB1_LY,0);
	}
					if(toggle_switchstick == rightsw)
				{
			    if(get_val(BTN[toggle_ads_btn]) < adsswitch) 
			    set_val(XB1_LX,get_ival(XB1_RX)) 
			    
			    if(get_val(BTN[toggle_ads_btn]) < adsswitch) 
			    set_val(XB1_RX,0);
				
			    if(get_val(BTN[toggle_ads_btn]) < adsswitch) 
			    set_val(XB1_LY,get_ival(XB1_RY)) 
			    
			    if(get_val(BTN[toggle_ads_btn]) < adsswitch)  
			    set_val(XB1_RY,0);
	}}
	
						// easyrun
				if(toggle_easyrun[profile_idx])
	{
							if(toggle_easyrun == 1)
{
 if(get_val(PS4_LY) <-95)
 {onOffeasyrun = TRUE}
 
    if(onOffeasyrun) {
        {combo_run(CLICK_LY)}
        if(get_val(XB1_LY) >=15)
        onOffeasyrun = FALSE;      
        
        if(get_val(XB1_LX) >15)
        onOffeasyrun = FALSE; 
        
         if(get_val(XB1_LX) <-15)
        onOffeasyrun = FALSE; 
        
        if(get_val(XB1_RT) && get_ptime(XB1_RT) > stop)
        onOffeasyrun = FALSE; 


    }}
   if(toggle_easyrun == 2)
	{
 if(!tap_count_uply&& get_ival(PS4_LY) <= Min_Sprint_up_Activation_Speed_uply) {
  tap_count_uply= 1;
  double_tap_timer_uply = Max_Double_Tap_Time_uply;
 }
 
 if(tap_count_uply== 1 && double_tap_timer_uply > 0) {
  double_tap_timer_uply -= get_rtime();
  if(!released_ly_uply && get_ival(PS4_LY) >= Max_Sprint_up_Deactivation_Speed_uply)
   released_ly_uply = TRUE;
  if(released_ly_uply && get_ival(PS4_LY) <= Min_Sprint_up_Activation_Speed_uply) {
   tap_count_uply= 2;
     }
 }
 if (tap_count_uply== 2 && get_ival(PS4_LY) <= -80)  onOffeasyrun = TRUE  
 if((tap_count_uply== 2 || double_tap_timer_uply <= 0) && get_ival(PS4_LY) >= Max_Sprint_up_Deactivation_Speed_uply) {
  tap_count_uply= 0;
  double_tap_timer_uply = 0;
  released_ly_uply = FALSE;
 }
 


    if(onOffeasyrun) {
        {combo_run(CLICK_LY)}
        if(get_val(XB1_LY) >=15)
        onOffeasyrun = FALSE;      
        
        if(get_val(XB1_LX) >15)
        onOffeasyrun = FALSE; 
        
         if(get_val(XB1_LX) <-15)
        onOffeasyrun = FALSE; 
        
        if(get_val(BTN[toggle_fire_btn]) && get_ptime(XB1_RT) > stop)
        onOffeasyrun = FALSE; 

        

}}
							 if(toggle_easyrun == 3)
{
 if(event_press(PS4_L3))
 onOffeasyrun = TRUE;  
    if(onOffeasyrun) {
        combo_run(CLICK_LY);
        if(get_val(XB1_LY) >=10)
        onOffeasyrun = FALSE;      
        
        if(get_val(XB1_LX) >10)
        onOffeasyrun = FALSE; 
        
         if(get_val(XB1_LX) <-10)
        onOffeasyrun = FALSE; 
        
        if(get_val(XB1_RT) && get_ptime(XB1_RT) > stop)
        onOffeasyrun = FALSE; 



        
    }}   
    
 							if(toggle_easyrun == 4)
{
  if(event_press(BTN[toggle_ads_btn]) && get_brtime(BTN[toggle_ads_btn]) < 300) 
 onOffeasyrun = TRUE;
 if(get_val(PS4_LY) <-95)
 onOffeasyrun = TRUE;  
    if(onOffeasyrun) {
        combo_run(CLICK_LY);
        if(get_val(XB1_LY) >=10)
        onOffeasyrun = FALSE;      
        
        if(get_val(XB1_LX) >10)
        onOffeasyrun = FALSE; 
        
         if(get_val(XB1_LX) <-10)
        onOffeasyrun = FALSE; 
        
        if(get_val(XB1_RT) && get_ptime(XB1_RT) > stop)
        onOffeasyrun = FALSE; 
        
    }}   
    
    							 if(toggle_easyrun == 5)
{
  if(event_press(BTN[toggle_ads_btn]) && get_brtime(BTN[toggle_ads_btn]) < 300) 
 onOffeasyrun = TRUE;
 if(event_press(PS4_L3))
 onOffeasyrun = TRUE;  
    if(onOffeasyrun) {
        combo_run(CLICK_LY);
        if(get_val(XB1_LY) >=10)
        onOffeasyrun = FALSE;      
        
        if(get_val(XB1_LX) >10)
        onOffeasyrun = FALSE; 
        
         if(get_val(XB1_LX) <-10)
        onOffeasyrun = FALSE; 
        
        if(get_val(XB1_RT) && get_ptime(XB1_RT) > stop)
        onOffeasyrun = FALSE; 
        
    }}
    if(toggle_easyrun == 6)
	{
 if(!tap_count_uply&& get_ival(PS4_LY) <= Min_Sprint_up_Activation_Speed_uply) {
  tap_count_uply= 1;
  double_tap_timer_uply = Max_Double_Tap_Time_uply;
 }
 
 if(tap_count_uply== 1 && double_tap_timer_uply > 0) {
  double_tap_timer_uply -= get_rtime();
  if(!released_ly_uply && get_ival(PS4_LY) >= Max_Sprint_up_Deactivation_Speed_uply)
   released_ly_uply = TRUE;
  if(released_ly_uply && get_ival(PS4_LY) <= Min_Sprint_up_Activation_Speed_uply) {
   tap_count_uply= 2;
     }
 }
 if (tap_count_uply== 2 && get_ival(PS4_LY) <= -80)  onOffeasyrun = TRUE  
 if((tap_count_uply== 2 || double_tap_timer_uply <= 0) && get_ival(PS4_LY) >= Max_Sprint_up_Deactivation_Speed_uply) {
  tap_count_uply= 0;
  double_tap_timer_uply = 0;
  released_ly_uply = FALSE;
 }
 


    if(onOffeasyrun) {
        {combo_run(CLICK_LY)}
        if(get_val(XB1_LY) >=15)
        onOffeasyrun = FALSE;      
        
        if(get_val(XB1_LX) >15)
        onOffeasyrun = FALSE; 
        
         if(get_val(XB1_LX) <-15)
        onOffeasyrun = FALSE; 
        
 		
        if(get_val(BTN[toggle_fire_btn]) || toggle_sensshot[profile_idx] == 4 && get_val(PS4_L2))
        combo_stop(CLICK_LY); 

        

}}
    }


    	if(toggle_invert)
    	{
		set_val(XB1_RX,inv(get_val(XB1_RX)));
		set_val(XB1_RY,inv(get_val(XB1_RY)));
			}
		
    
    //BR Double
{

 
 
 if(!tap_count_br&& get_ival(PROFILE_BTN[toggle_br1activat[br1_C]]) >= Min_Sprint_up_Activation_Speed_br) {
  tap_count_br= 1;
  double_tap_timer_br = Max_Double_Tap_Time_br;
 }
 
 if(tap_count_br== 1 && double_tap_timer_br > 0) {
  double_tap_timer_br -= get_rtime();
  if(!released_ly_br && get_ival(PROFILE_BTN[toggle_br1activat[br1_C]]) <= Max_Sprint_up_Deactivation_Speed_br)
   released_ly_br = TRUE;
  if(released_ly_br && get_ival(PROFILE_BTN[toggle_br1activat[br1_C]]) >= Min_Sprint_up_Activation_Speed_br) {
   tap_count_br= 2;
     }
 }
  
if (tap_count_br== 2 && get_ival(PROFILE_BTN[toggle_br1activat[br1_C]]) >= 80) set_val (PROFILE_BTN[toggle_br1[br1_C]], 100);
 if((tap_count_br== 2 || double_tap_timer_br <= 0) && get_ival(PROFILE_BTN[toggle_br1activat[br1_C]]) <= Max_Sprint_up_Deactivation_Speed_br) {
  tap_count_br= 0;
  double_tap_timer_br = 0;
  released_ly_br = FALSE;
  
 }
 
 
}

{

 
 
 if(!tap_count_br2&& get_ival(PROFILE_BTN[toggle_br1activat2[br2_C]]) >= Min_Sprint_up_Activation_Speed_br2) {
  tap_count_br2= 1;
  double_tap_timer_br2 = Max_Double_Tap_Time_br2;
 }
 
 if(tap_count_br2== 1 && double_tap_timer_br2 > 0) {
  double_tap_timer_br2 -= get_rtime();
  if(!released_ly_br2 && get_ival(PROFILE_BTN[toggle_br1activat2[br2_C]]) <= Max_Sprint_up_Deactivation_Speed_br2)
   released_ly_br2 = TRUE;
  if(released_ly_br2 && get_ival(PROFILE_BTN[toggle_br1activat2[br2_C]]) >= Min_Sprint_up_Activation_Speed_br2) {
   tap_count_br2= 2;
     }
 }
  
if (tap_count_br2== 2 && get_ival(PROFILE_BTN[toggle_br1activat2[br2_C]]) >= 80) set_val (PROFILE_BTN[toggle_br2[br2_C]], 100);
 if((tap_count_br2== 2 || double_tap_timer_br2 <= 0) && get_ival(PROFILE_BTN[toggle_br1activat2[br2_C]]) <= Max_Sprint_up_Deactivation_Speed_br2) {
  tap_count_br2= 0;
  double_tap_timer_br2 = 0;
  released_ly_br2 = FALSE;
  
 }
 
 
}

				if(get_val(PROFILE_BTN[toggle_remap1[remap1_C]])) {
		set_val((PROFILE_BTN[toggle_to1[remap1_C]]),get_ival(PROFILE_BTN[toggle_remap1[remap1_C]]));
		}
		if(get_val(PROFILE_BTN[toggle_to1[remap1_C]])) {
		set_val((PROFILE_BTN[toggle_remap1[remap1_C]]),get_ival(PROFILE_BTN[toggle_to1[remap1_C]]));
		
    }
		
			if(get_val(PROFILE_BTN[toggle_to1[remap1_C]])) {
		set_val((PROFILE_BTN[toggle_remap1[remap1_C]]),get_ival(PROFILE_BTN[toggle_to1[remap1_C]]));
		if(get_val(PROFILE_BTN[toggle_remap1[remap1_C]])) {
		set_val((PROFILE_BTN[toggle_to1[remap1_C]]),get_ival(PROFILE_BTN[toggle_remap1[remap1_C]]));
		}
	
		
    }
		
					if(get_val(PROFILE_BTN[toggle_remap2[remap2_C]])) {
		set_val((PROFILE_BTN[toggle_to2[remap2_C]]),get_ival(PROFILE_BTN[toggle_remap2[remap2_C]]));
		}
		if(get_val(PROFILE_BTN[toggle_to2[remap2_C]])) {
		set_val((PROFILE_BTN[toggle_remap2[remap2_C]]),get_ival(PROFILE_BTN[toggle_to2[remap2_C]]));
		
    }
		
			if(get_val(PROFILE_BTN[toggle_to2[remap2_C]])) {
		set_val((PROFILE_BTN[toggle_remap2[remap2_C]]),get_ival(PROFILE_BTN[toggle_to2[remap2_C]]));
		if(get_val(PROFILE_BTN[toggle_remap2[remap2_C]])) {
		set_val((PROFILE_BTN[toggle_to2[remap2_C]]),get_ival(PROFILE_BTN[toggle_remap2[remap2_C]]));
		}
	
		
    }

				if(get_val(PROFILE_BTN[toggle_remap3[remap3_C]])) {
		set_val((PROFILE_BTN[toggle_to3[remap3_C]]),get_ival(PROFILE_BTN[toggle_remap3[remap3_C]]));
		}
		if(get_val(PROFILE_BTN[toggle_to3[remap3_C]])) {
		set_val((PROFILE_BTN[toggle_remap3[remap3_C]]),get_ival(PROFILE_BTN[toggle_to3[remap3_C]]));
		
    }
		
			if(get_val(PROFILE_BTN[toggle_to3[remap3_C]])) {
		set_val((PROFILE_BTN[toggle_remap3[remap3_C]]),get_ival(PROFILE_BTN[toggle_to3[remap3_C]]));
		if(get_val(PROFILE_BTN[toggle_remap3[remap3_C]])) {
		set_val((PROFILE_BTN[toggle_to3[remap3_C]]),get_ival(PROFILE_BTN[toggle_remap3[remap3_C]]));
		}
	
		
    }
		
					if(get_val(PROFILE_BTN[toggle_remap4[remap4_C]])) {
		set_val((PROFILE_BTN[toggle_to4[remap4_C]]),get_ival(PROFILE_BTN[toggle_remap4[remap4_C]]));
		}
		if(get_val(PROFILE_BTN[toggle_to4[remap4_C]])) {
		set_val((PROFILE_BTN[toggle_remap4[remap4_C]]),get_ival(PROFILE_BTN[toggle_to4[remap4_C]]));
		
    }
		
			if(get_val(PROFILE_BTN[toggle_to4[remap4_C]])) {
		set_val((PROFILE_BTN[toggle_remap4[remap4_C]]),get_ival(PROFILE_BTN[toggle_to4[remap4_C]]));
		if(get_val(PROFILE_BTN[toggle_remap4[remap4_C]])) {
		set_val((PROFILE_BTN[toggle_to4[remap4_C]]),get_ival(PROFILE_BTN[toggle_remap4[remap4_C]]));
		}
	
		
    }

     
         if(event_press(PROFILE_BTN[toggle_presstime[presstime_C]])  && get_ptime(PROFILE_BTN[toggle_presstime[presstime_C]]) > 300) {
    set_val(PROFILE_BTN[toggle_press[presstime_C]], 100)    //--double tap
    }
    
    if(toggle_hold1)
    { 


 if(get_val(BTN[toggle_hold1]) && get_ptime(BTN[toggle_hold1]) > 250)
        onOffhold1= TRUE;      
    if(onOffhold1) 
    {set_val(BTN[toggle_hold1],100)}

if(get_val(BTN[toggle_hold1]) && get_ptime(BTN[toggle_hold1]) < 250)
        onOffhold1= FALSE;      
    }
        if(toggle_hold2)
    { 


 if(get_val(BTN[toggle_hold2]) && get_ptime(BTN[toggle_hold2]) > 250)
        onOffhold2= TRUE;      
    if(onOffhold2) 
    {set_val(BTN[toggle_hold2],100)}

if(get_val(BTN[toggle_hold2]) && get_ptime(BTN[toggle_hold2]) < 250)
        onOffhold2= FALSE;      
    }
       
		// dbup
		if(toggle_dbup)
		 {
 
 
 if(!tap_count_up&& get_ival(PS4_LY) <= Min_Sprint_up_Activation_Speed_up) {
  tap_count_up= 1;
  double_tap_timer_up = Max_Double_Tap_Time_up;
 }
 
 if(tap_count_up== 1 && double_tap_timer_up > 0) {
  double_tap_timer_up -= get_rtime();
  if(!released_ly_up && get_ival(PS4_LY) >= Max_Sprint_up_Deactivation_Speed_up)
   released_ly_up = TRUE;
  if(released_ly_up && get_ival(PS4_LY) <= Min_Sprint_up_Activation_Speed_up) {
   tap_count_up= 2;
     }
 }
 if (tap_count_up== 2 && get_ival(PS4_LY) <= -80) set_val (BTN[toggle_dbup], 100);
 if((tap_count_up== 2 || double_tap_timer_up <= 0) && get_ival(PS4_LY) >= Max_Sprint_up_Deactivation_Speed_up) {
  tap_count_up= 0;
  double_tap_timer_up = 0;
  released_ly_up = FALSE;
 }
 
}
		// dbdown
		if(toggle_dbdown)
		 {
  
  
 if(!tap_count_down&& get_ival(PS4_LY) >= Min_Sprint_up_Activation_Speed_down) {
  tap_count_down= 1;
  double_tap_timer_down = Max_Double_Tap_Time_down;
 }
 
 if(tap_count_down== 1 && double_tap_timer_down > 0) {
  double_tap_timer_down -= get_rtime();
  if(!released_ly_down && get_ival(PS4_LY) <= Max_Sprint_up_Deactivation_Speed_down)
   released_ly_down = TRUE;
  if(released_ly_down && get_ival(PS4_LY) >= Min_Sprint_up_Activation_Speed_down) {
   tap_count_down= 2;
     }
 }
  
if (tap_count_down== 2 && get_ival(PS4_LY) >= 80) set_val (BTN[toggle_dbdown], 100);
 if((tap_count_down== 2 || double_tap_timer_down <= 0) && get_ival(PS4_LY) <= Max_Sprint_up_Deactivation_Speed_down) {
  tap_count_down= 0;
  double_tap_timer_down = 0;
  released_ly_down = FALSE;
  
 }
}
		// dbleft
		if(toggle_dbleft)
{
 if(!tap_count_left&& get_ival(PS4_LX) <= Min_Sprint_up_Activation_Speed_left) {
  tap_count_left= 1;
  double_tap_timer_left = Max_Double_Tap_Time_left;
 }
 
 if(tap_count_left== 1 && double_tap_timer_left > 0) {
  double_tap_timer_left -= get_rtime();
  if(!released_ly_left && get_ival(PS4_LX) >= Max_Sprint_up_Deactivation_Speed_left)
   released_ly_left = TRUE;
  if(released_ly_left && get_ival(PS4_LX) <= Min_Sprint_up_Activation_Speed_left) {
   tap_count_left= 2;
     }
 }
 if (tap_count_left== 2 && get_ival(PS4_LX) <= -80) set_val (BTN[toggle_dbleft], 100);
 if((tap_count_left== 2 || double_tap_timer_left <= 0) && get_ival(PS4_LX) >= Max_Sprint_up_Deactivation_Speed_left) {
  tap_count_left= 0;
  double_tap_timer_left = 0;
  released_ly_left = FALSE;
 }
 
 
}

		// dbright
		if(toggle_dbright)
 {
 if(!tap_count_right&& get_ival(PS4_LX) >= Min_Sprint_up_Activation_Speed_right) {
  tap_count_right= 1;
  double_tap_timer_right = Max_Double_Tap_Time_right;
 }
 
 if(tap_count_right== 1 && double_tap_timer_right > 0) {
  double_tap_timer_right -= get_rtime();
  if(!released_ly_right && get_ival(PS4_LX) <= Max_Sprint_up_Deactivation_Speed_right)
   released_ly_right = TRUE;
  if(released_ly_right && get_ival(PS4_LX) >= Min_Sprint_up_Activation_Speed_right) {
   tap_count_right= 2;
     }
 }
  
if (tap_count_right== 2 && get_ival(PS4_LX) >= 80) set_val (BTN[toggle_dbright], 100);
 if((tap_count_right== 2 || double_tap_timer_right <= 0) && get_ival(PS4_LX) <= Max_Sprint_up_Deactivation_Speed_right) {
  tap_count_right= 0;
  double_tap_timer_right = 0;
  released_ly_right = FALSE;
  
 }}
 
 
		

if(toggle_vm)
	{ if(get_console() == PIO_PS4)
        VMSpeed = -3; // PS4

    if(get_console() == PIO_XB1)
        VMSpeed = -3; // XB1

    if(get_console() == !PIO_PS4 || !PIO_XB1)
        VMSpeed = -4; // PC}
        }

if(toggle_vm == FALSE)
 			{VMSpeed = 0}
 			
 			if(toggle_reload)
 			{
 			if(toggle_reload == 1){
if (!WPN_1)
    				{
    				rld_time = rld_2;
    				rof = rof2
    				} 
    			else 
    				{
    				rld_time = rld_1;
    				rof = rof1
    				}
   if (event_release(BTN[toggle_reload_btn]) && get_ptime(BTN[toggle_reload_btn]) < 300) 
   										{
   										b_reload = rld_time;
   										}
    if (toggle_reload == 1 && b_reload) 
								{
      							b_reload -= get_rtime();
      							if (b_reload < 0) 
      											{
      											b_reload = 0;
      											}
      							if (event_press(BTN[toggle_fire_btn]) || event_press(BTN[toggle_ads_btn]))
      											{
      											combo_run(CANCEL_RLD);
      											}
    							}}
    							
    		if(toggle_reload == 2){
    		 if(event_release(BTN[toggle_fire_btn]) || toggle_sensshot[profile_idx] == 4 && event_release(PS4_L2)) 
    		 combo_run(AUTO_RELOAD_cmb);
    		}
    
    	if(toggle_reload == 3)
    	{if(event_release(BTN[toggle_fire_btn]) || toggle_sensshot[profile_idx] == 4 && event_release(PS4_L2)) combo_run(AUTO_RELOAD_cmb);
if (!WPN_1)
    				{
    				rld_time = rld_2;
    				rof = rof2
    				} 
    			else 
    				{
    				rld_time = rld_1;
    				rof = rof1
    				}
   if ((event_release(BTN[toggle_reload_btn]) && get_ptime(BTN[toggle_reload_btn]) < 300) || (event_release(BTN[toggle_fire_btn])) || toggle_sensshot[profile_idx] == 4 && event_release(PS4_L2))
   										{
   										b_reload = rld_time;
   										}
    if (toggle_reload == 3 && b_reload) 
								{
      							b_reload -= get_rtime();
      							if (b_reload < 0) 
      											{
      											b_reload = 0;
      											}
      							if (event_press(BTN[toggle_fire_btn]) || event_press(BTN[toggle_ads_btn]))
      											{
      											combo_run(CANCEL_RLD);
      											}
    							}}}
    							
 			// Turbo Melee
				if(toggle_polar[profile_idx])
							{
	if(toggle_polar[profile_idx] == 1) // Batts Sticky
				{
if(toggle_polar[profile_idx] >=1)
toggle_aimassist[profile_idx] = 0;
combo_run(dam);
if(get_val(BTN[toggle_ads_btn]) || get_val(BTN[toggle_fire_btn]) && (isqrt(pow(abs(get_ival(PS4_RY)),2) + pow(abs(get_ival(PS4_RX)),2)) < 100) )
{combo_run(damrec)}
			}
 if(toggle_polar[profile_idx] == 2) // Batts Sticky
 {  
 if(toggle_polar[profile_idx] >=1)
toggle_aimassist[profile_idx] = 0;
 combo_run(stealth);
} 
 if(toggle_polar[profile_idx] == 3) // Batts Sticky
 { if(toggle_polar[profile_idx] >=1)
toggle_aimassist[profile_idx] = 0;                               
combo_run(Crescens);
}
	if(toggle_polar[profile_idx] == 4) // Batts Sticky
				{if(toggle_polar[profile_idx] >=1)
							toggle_aimassist[profile_idx] = 0;
if(get_val(BTN[toggle_fire_btn]) && get_val(BTN[toggle_ads_btn])>5)
{combo_stop(dam)
 combo_run(stealth)}
if(get_val(BTN[toggle_ads_btn]) && get_val(BTN[toggle_fire_btn])<5) 
{combo_run(dam)}
if(get_val(BTN[toggle_ads_btn]) || get_val(BTN[toggle_fire_btn]) && (isqrt(pow(abs(get_ival(PS4_RY)),2) + pow(abs(get_ival(PS4_RX)),2)) < 100) )
{combo_run(damrec)}}
}


					if(get_val(BTN[toggle_bumper]) && get_ptime(BTN[toggle_bumper]) > 200)
					{set_val(PS4_L1,100)
					set_val(PS4_R1,100);
					set_val(BTN[toggle_bumper],0)}
					
					if(get_val(BTN[toggle_melee_btn]))
					{
						combo_btn = BTN[toggle_melee_btn];
						combo_wait = 40;
						combo_run(SPAM);
					}
					if(get_val(BTN[toggle_melee2_btn]))
					{
						combo_btn = BTN[toggle_melee2_btn];
						combo_wait = 40;
						combo_run(SPAM);
					}
			/* AutoRun 
			   push the left stick 90% forward or to the sides to run - hold to sprint must be enable */
				if(toggle_autorun[profile_idx])
				{
				if(toggle_autorun == 1)
				{
					if((isqrt(pow(abs(get_ival(PS4_LX)),2) + pow(abs(get_ival(PS4_LY)),2)) >= startrun) && get_ival(PS4_LY) < 20 && !get_val(BTN[toggle_ads_btn]) && !get_val(BTN[toggle_fire_btn]))
						set_val(BTN[toggle_sprint_btn], 100);
				}
				if(toggle_autorun == 2)
				{
					if((isqrt(pow(abs(get_ival(PS4_LX)),2) + pow(abs(get_ival(PS4_LY)),2)) >= startrun) && get_ival(PS4_LY) < 20 && !get_val(BTN[toggle_ads_btn]) && !get_val(BTN[toggle_fire_btn]))
						set_val(BTN[toggle_sprint_btn], 100);
						
						if(get_val(PS4_LY) <-90)
						{set_val(BTN[toggle_loot_btn],100); 
						combo_btn1 = BTN[toggle_loot_btn];
						combo_wait = loottime;
						combo_run(SPAM1);}
				}
				if(toggle_autorun == 3)
				{
					if((isqrt(pow(abs(get_ival(PS4_LX)),2) + pow(abs(get_ival(PS4_LY)),2)) >= startrun) && get_ival(PS4_LY) < 20 && !get_val(BTN[toggle_ads_btn]) && !get_val(BTN[toggle_fire_btn]))
						set_val(BTN[toggle_sprint_btn], 100);
						
						if(get_val(PS4_LY) <-99)
						{set_val(BTN[toggle_jump_btn],100); 
						combo_btn1 = BTN[toggle_jump_btn];
						combo_wait = loottime;
						combo_run(SPAM1);}
				}
				
				}
				
		// 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜
		
			// jump Mods
if(toggle_jump)
				{
		 			// If Strafe Shot is enable for the curent profile
					if(toggle_jump == 1)
					{
if((get_val(BTN[toggle_jump_btn]) && get_ptime(BTN[toggle_jump_btn]) > jumptime))
    combo_run(jump)
if((get_val(BTN[toggle_jump_btn]) && get_ptime(BTN[toggle_jump_btn]) > jumptime*2 + 100))
    combo_stop(jump)
    if(get_lval(BTN[toggle_jump_btn])&& get_ptime(BTN[toggle_jump_btn]) > jumptime*2 + 100)
	set_val(BTN[toggle_jump_btn],0)
					}
			
					// If Jump Shot is enable for the curent profile
					 if(toggle_jump == 2)
					{
if((get_val(BTN[toggle_jump_btn]) && get_ptime(BTN[toggle_jump_btn]) > jumptime))
    combo_run(jump)
    if(get_lval(BTN[toggle_jump_btn])&& get_ptime(BTN[toggle_jump_btn]) > jumptime*2 + 100)
	set_val(BTN[toggle_jump_btn],0)
					}
					 if(toggle_jump == 3)
{
{toggle_dbup = 14}

if(!tap_count_up&& get_ival(PS4_LY) <= Min_Sprint_up_Activation_Speed_up) {
  tap_count_up= 1;
  double_tap_timer_up = Max_Double_Tap_Time_up;
 }
 
 if(tap_count_up== 1 && double_tap_timer_up > 0) {
  double_tap_timer_up -= get_rtime();
  if(!released_ly_up && get_ival(PS4_LY) >= Max_Sprint_up_Deactivation_Speed_up)
   released_ly_up = TRUE;
  if(released_ly_up && get_ival(PS4_LY) <= Min_Sprint_up_Activation_Speed_up) {
   tap_count_up= 2;
     }
 }
 if (tap_count_up== 2 && get_ival(PS4_LY) <= -80)
 {set_val (BTN[toggle_jump_btn], 100);
    combo_run(jump2)
}
 
 
 if((tap_count_up== 2 || double_tap_timer_up <= 0) && get_ival(PS4_LY) >= Max_Sprint_up_Deactivation_Speed_up) {
  tap_count_up= 0;
  double_tap_timer_up = 0;
  released_ly_up = FALSE;
 }
 }
				}
    							
 				if(toggle_slideCancel)
				{
					
					if(isqrt(pow(abs(get_ival(PS4_LX)),2) + pow(abs(get_ival(PS4_LY)),2)) >= 80 && !get_val(BTN[toggle_ads_btn]))
					{
						if(event_release(BTN[toggle_crouch_btn]))
						{
							if(toggle_slideCancel == MW)
								combo_run(SLIDE_CANCEL_MW);
							if(toggle_slideCancel == CW)
								combo_run(SLIDE_CANCEL_CW);
						}
					}
					else
					{
						combo_stop(SLIDE_CANCEL_MW);
						combo_stop(SLIDE_CANCEL_CW);
					}
				}
 
		
				if(toggle_dpad)
	{
							if(toggle_dpad == lfs)
							toggle_quick = FALSE
								{
							    if(get_val(XB1_UP)) {
							        set_val(XB1_UP,0);
							        set_val(XB1_LY,-100);
							        speed_toggle_UP = FALSE
							       
							    }
							    if(get_val(XB1_DOWN)) {
							        set_val(XB1_DOWN,0);
							        set_val(XB1_LY,100);
							        speed_toggle_DOWN = FALSE
							      
							    }
							    if(get_val(XB1_LEFT)) {
							        set_val(XB1_LEFT,0);
							        set_val(XB1_LX,-100);
							        speed_toggle_LEFT = FALSE
							       
							    }
							    if(get_val(XB1_RIGHT)) {
							        set_val(XB1_RIGHT,0);
							        set_val(XB1_LX,100);
							        speed_toggle_RIGHT = FALSE
							       
    }
}
							 if(toggle_dpad == rfs)
							 toggle_quick = FALSE
								{
							
							    if(get_val(XB1_UP)) {
							        set_val(XB1_UP,0);
							        set_val(XB1_RY,-100);
							        speed_toggle_UP = FALSE
							      
							    }
							    if(get_val(XB1_DOWN)) {
							        set_val(XB1_DOWN,0);
							        set_val(XB1_RY,100);
							        speed_toggle_DOWN = FALSE
							       
							    }
							    if(get_val(XB1_LEFT)) {
							        set_val(XB1_LEFT,0);
							        set_val(XB1_RX,-100);
							        speed_toggle_LEFT = FALSE
							      
							    }
							    if(get_val(XB1_RIGHT)) {
							        set_val(XB1_RIGHT,0);
							        set_val(XB1_RX,100);
							        speed_toggle_RIGHT = FALSE
							     
							    }
							}}
				
		// 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜
			
			// Speed Toggles
			toggle_quick[profile_idx] = speed_toggle( PS4_L2, PS4_PS, toggle_quick[profile_idx] , quick_M , quick_TXT , speed_toggle_quick[profile_idx])
			{
			if(get_val(PS4_L2))
			{set_val(PS4_PS, 0);}} 
			if(toggle_quick){
	if(toggle_quick== 1){			
				if(toggle_dpad == FALSE)
				{	toggle_antirecoil[profile_idx] = speed_toggle( PS4_L2, PS4_UP    , toggle_antirecoil[profile_idx] , ANTIRECOIL_M , ANTIRECOIL_TXT , speed_toggle_UP[profile_idx]    );
				toggle_rapidfire[profile_idx]  = speed_toggle( PS4_L2, PS4_RIGHT , toggle_rapidfire[profile_idx]  , RAPIDFIRE_M  , RAPIDFIRE_TXT  , speed_toggle_RIGHT[profile_idx] );
				toggle_aimassist[profile_idx]  = speed_toggle( PS4_L2, PS4_DOWN  , toggle_aimassist[profile_idx]  , AIMASSIST_M  , SHAPES_TXT     , speed_toggle_DOWN[profile_idx]  );
				toggle_sensshot2[profile_idx]    = speed_toggle( PS4_L2, PS4_LEFT  , toggle_sensshot2[profile_idx]    , sensshot2_M    , rmod_TXT   , speed_toggle_LEFT[profile_idx] );
				}}
				
							if(toggle_quick== 2)
								{			
				if(toggle_dpad == FALSE)
				{toggle_antirecoil[profile_idx] = speed_toggle( PS4_L2, PS4_UP    , toggle_antirecoil[profile_idx] , ANTIRECOIL_M , ANTIRECOIL_TXT , speed_toggle_UP[profile_idx]    );
				toggle_rapidfire[profile_idx]  = speed_toggle( PS4_L2, PS4_RIGHT , toggle_rapidfire[profile_idx]  , RAPIDFIRE_M  , RAPIDFIRE_TXT  , speed_toggle_RIGHT[profile_idx] );
				toggle_autorun[profile_idx]  = speed_toggle( PS4_L2, PS4_DOWN  , toggle_autorun[profile_idx]  , AUTORUN_M  , lootrun_TXT     , speed_toggle_DOWN[profile_idx]  );
				toggle_easyrun[profile_idx]    = speed_toggle( PS4_L2, PS4_LEFT  , toggle_easyrun[profile_idx]    , easyrun_M    , easyrun_TXT , speed_toggle_LEFT[profile_idx] );
				}

}
							 if(toggle_quick == 3)
								{
									if(toggle_dpad == FALSE)
if((profile_idx == 0) && toggle_antirecoil == 2)
			{if(get_ival(XB1_LT)){                              
            if(event_press(XB1_UP)) {
                antirecoil_end[0] +=1;
                on_the_fly_display(center_x(sizeof(antirecoil_end)- 1,OLED_FONT_MEDIUM_WIDTH),antirecoil_end[0],antirecoil_end[0]);

            }
            if(event_press(XB1_DOWN)){
                antirecoil_end[0] -=1;
                on_the_fly_display(center_x(sizeof(antirecoil_end)- 1,OLED_FONT_MEDIUM_WIDTH),antirecoil_end[0],antirecoil_end[0]);

            }
            //horizontal------------------------------------   
            if(event_press(XB1_LEFT)){
                antirecoil_horizontal[0]    -=1;
                on_the_fly_display(center_x(sizeof(antirecoil_horizontal)- 1,OLED_FONT_MEDIUM_WIDTH),antirecoil_horizontal[0],antirecoil_horizontal[0]);

            }
            if(event_press(XB1_RIGHT)){
                antirecoil_horizontal[0]     +=1;
                on_the_fly_display(center_x(sizeof(antirecoil_horizontal)- 1,OLED_FONT_MEDIUM_WIDTH),antirecoil_horizontal[0],antirecoil_horizontal[0]);

            }
		}}// get RS  
		if((profile_idx == 1) && toggle_antirecoil == 2)
			{if(get_ival(XB1_LT)){                              
            if(event_press(XB1_UP)) {
                antirecoil_end[1] +=1;
                on_the_fly_display(center_x(sizeof(antirecoil_end)- 1,OLED_FONT_MEDIUM_WIDTH),antirecoil_end[1],antirecoil_end[1]);

            }
            if(event_press(XB1_DOWN)){
                antirecoil_end[1] -=1;
                on_the_fly_display(center_x(sizeof(antirecoil_end)- 1,OLED_FONT_MEDIUM_WIDTH),antirecoil_end[1],antirecoil_end[1]);

            }
            //horizontal------------------------------------   
            if(event_press(XB1_LEFT)){
                antirecoil_horizontal[1]    -=1;
                on_the_fly_display(center_x(sizeof(antirecoil_horizontal)- 1,OLED_FONT_MEDIUM_WIDTH),antirecoil_horizontal[1],antirecoil_horizontal[1]);

            }
            if(event_press(XB1_RIGHT)){
                antirecoil_horizontal[1]     +=1;
                on_the_fly_display(center_x(sizeof(antirecoil_horizontal)- 1,OLED_FONT_MEDIUM_WIDTH),antirecoil_horizontal[1],antirecoil_horizontal[1]);

            }
		}}
		if((profile_idx == 2) && toggle_antirecoil == 2)
			{if(get_ival(XB1_LT)){                              
            if(event_press(XB1_UP)) {
                antirecoil_end[2] +=1;
                on_the_fly_display(center_x(sizeof(antirecoil_end)- 1,OLED_FONT_MEDIUM_WIDTH),antirecoil_end[2],antirecoil_end[2]);

            }
            if(event_press(XB1_DOWN)){
                antirecoil_end[2] -=1;
                on_the_fly_display(center_x(sizeof(antirecoil_end)- 1,OLED_FONT_MEDIUM_WIDTH),antirecoil_end[2],antirecoil_end[2]);

            }
            //horizontal------------------------------------   
            if(event_press(XB1_LEFT)){
                antirecoil_horizontal[2]    -=1;
                on_the_fly_display(center_x(sizeof(antirecoil_horizontal)- 1,OLED_FONT_MEDIUM_WIDTH),antirecoil_horizontal[2],antirecoil_horizontal[2]);

            }
            if(event_press(XB1_RIGHT)){
                antirecoil_horizontal[2]     +=1;
                on_the_fly_display(center_x(sizeof(antirecoil_horizontal)- 1,OLED_FONT_MEDIUM_WIDTH),antirecoil_horizontal[2],antirecoil_horizontal[2]);

            }
		}}
		
else if((profile_idx == 0) && toggle_antirecoil == 3)
			{if(get_ival(XB1_LT)){                              
            if(event_press(XB1_UP)) {
                rumble_power[0] +=1;
                on_the_fly_display(center_x(sizeof(rumble_power)- 1,OLED_FONT_MEDIUM_WIDTH),rumble_power[0],rumble_power[0]);

            }
            if(event_press(XB1_DOWN)){
                rumble_power[0] -=1;
                on_the_fly_display(center_x(sizeof(rumble_power)- 1,OLED_FONT_MEDIUM_WIDTH),rumble_power[0],rumble_power[0]);

            }
            //horizontal------------------------------------   
            if(event_press(XB1_LEFT)){
                antirecoil_horizontal[0]    -=1;
                on_the_fly_display(center_x(sizeof(antirecoil_horizontal)- 1,OLED_FONT_MEDIUM_WIDTH),antirecoil_horizontal[0],antirecoil_horizontal[0]);

            }
            if(event_press(XB1_RIGHT)){
                antirecoil_horizontal[0]     +=1;
                on_the_fly_display(center_x(sizeof(antirecoil_horizontal)- 1,OLED_FONT_MEDIUM_WIDTH),antirecoil_horizontal[0],antirecoil_horizontal[0]);

            }
		}}// get RS  
		if((profile_idx == 1) && toggle_antirecoil == 3)
			{if(get_ival(XB1_LT)){                              
            if(event_press(XB1_UP)) {
                rumble_power[1] +=1;
                on_the_fly_display(center_x(sizeof(rumble_power)- 1,OLED_FONT_MEDIUM_WIDTH),rumble_power[1],rumble_power[1]);

            }
            if(event_press(XB1_DOWN)){
                rumble_power[1] -=1;
                on_the_fly_display(center_x(sizeof(rumble_power)- 1,OLED_FONT_MEDIUM_WIDTH),rumble_power[1],rumble_power[1]);

            }
            //horizontal------------------------------------   
            if(event_press(XB1_LEFT)){
                antirecoil_horizontal[1]    -=1;
                on_the_fly_display(center_x(sizeof(antirecoil_horizontal)- 1,OLED_FONT_MEDIUM_WIDTH),antirecoil_horizontal[1],antirecoil_horizontal[1]);

            }
            if(event_press(XB1_RIGHT)){
                antirecoil_horizontal[1]     +=1;
                on_the_fly_display(center_x(sizeof(antirecoil_horizontal)- 1,OLED_FONT_MEDIUM_WIDTH),antirecoil_horizontal[1],antirecoil_horizontal[1]);

            }
		}}
		if((profile_idx == 2) && toggle_antirecoil == 3)
			{if(get_ival(XB1_LT)){                              
            if(event_press(XB1_UP)) {
                rumble_power[2] +=1;
                on_the_fly_display(center_x(sizeof(rumble_power)- 1,OLED_FONT_MEDIUM_WIDTH),rumble_power[2],rumble_power[2]);

            }
            if(event_press(XB1_DOWN)){
                rumble_power[2] -=1;
                on_the_fly_display(center_x(sizeof(rumble_power)- 1,OLED_FONT_MEDIUM_WIDTH),rumble_power[2],rumble_power[2]);

            }
            //horizontal------------------------------------   
            if(event_press(XB1_LEFT)){
                antirecoil_horizontal[2]    -=1;
                on_the_fly_display(center_x(sizeof(antirecoil_horizontal)- 1,OLED_FONT_MEDIUM_WIDTH),antirecoil_horizontal[2],antirecoil_horizontal[2]);

            }
            if(event_press(XB1_RIGHT)){
                antirecoil_horizontal[2]     +=1;
                on_the_fly_display(center_x(sizeof(antirecoil_horizontal)- 1,OLED_FONT_MEDIUM_WIDTH),antirecoil_horizontal[2],antirecoil_horizontal[2]);

            }
		}
		}
		}
		if(time_to_clear_screen){               
                time_to_clear_screen -= get_rtime();
                if(time_to_clear_screen <= 0 ){     
                    QT_MESSAGE_TIMEOUT();     
                }                              
            }
            
}


				
		// 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜
	
		// DoGz Screen Saver
			    if(display_black)
			    {
			    	count_black += get_rtime();
			    	if(count_black >= 5000)
			    	{
			    		cls_oled(0);
			    		count_black = 0;
			    		time_to_clear_screen = 2000;
			    		display_black = FALSE;
			    	}
			    }
			    
			  }
			    
			 // NOT in Edit Menu
			
////////////////////////////////////////////////////////// MODS THAT ALSO WORK IN MODEDIT

		// cam angle
			if(toggle_camangle[profile_idx])
			{if(get_val(BTN[toggle_ads_btn]) <=5) {  
             onOffcam = TRUE; } 
             if(onOffcam) {
        	combo_run(CAM_LS_to_RS);
  			if(get_val(BTN[toggle_ads_btn])>5) {  
			onOffcam = FALSE;  }  }  }    
			
		// 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜
			// AIM Abuse
			if(toggle_aimabuse[profile_idx])
			{
				if(get_val(BTN[toggle_ads_btn]))
					combo_run(AIM_ABUSE);
				else
					combo_stop(AIM_ABUSE);
			}
			
		// 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜
		
		// AIM Assist
			if(toggle_aimassist[profile_idx])
			{if(toggle_aimassist[profile_idx] >=1)
							toggle_polar[profile_idx] = 0;
				if(toggle_aimassist[profile_idx] == 1) // Batts Sticky
				{	
					if(get_val(BTN[toggle_ads_btn]) || get_val(BTN[toggle_fire_btn]) && (isqrt(pow(abs(get_ival(PS4_RY)),2) + pow(abs(get_ival(PS4_RX)),2)) < 100) )
					    combo_run(STICKY);
				}
				else // Polar Shapes
				{
					if(toggle_antirecoil[profile_idx] && get_val(BTN[toggle_fire_btn]))
					{
						RX = SmartSens(antirecoil_horizontal[profile_idx], PS4_RX);
						RY = SmartSens(ar_y, PS4_RY);
					}
					else
					{
						RX = get_val(PS4_RX);
						RY = get_val(PS4_RY);
					}
					
					actual_Magnitude = isqrt(pow(RX, 2) + pow(RY, 2));	
					max_Magnitude = (actual_Magnitude < 100);
				
					if(!(time++ % 1))
						angle += aimassist_angle;
						
					angle = angle % 360;
					sin_angle = Polar_Array[angle % 360];
					cos_angle = Polar_Array[(angle + 270) % 360];
					
				  
				  	if(get_val(BTN[toggle_fire_btn]) || get_val(BTN[toggle_ads_btn]))
				  	{
				    	if(actual_Magnitude <= aimassist_radius) 
				    	{
							sin_angle -= RY;
				      		cos_angle -= RX;
				    	}
					    else 
					    {
							sin_angle = (sin_angle * (200 - ((abs(RY) + actual_Magnitude) / 10) * 10) / 200) * max_Magnitude;
							cos_angle = (cos_angle * (200 - ((abs(RX) + actual_Magnitude) / 10) * 10) / 200) * max_Magnitude;
					    }
					    
					    GetShapesV1(aimassist_radius);
					    
					    if((!get_val(BTN[toggle_fire_btn]) && toggle_antirecoil[profile_idx]) || !toggle_antirecoil[profile_idx])
					    {
							set_val(PS4_RX, clamp(get_val(PS4_RX) + cos_angle, -100, 100));
							set_val(PS4_RY, clamp(get_val(PS4_RY) + sin_angle, -100, 100));
				  		}
					}
				}}


		// 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜
			
// AntiRecoil
			if(toggle_antirecoil[profile_idx])
			{
			// Antirecoil Standard final value
				if(toggle_antirecoil[profile_idx] == 2)
					antirecoil_start[profile_idx] = antirecoil_end[profile_idx];
					
			// Progressive AntiRecoil vertical		
	    		if(antirecoil_start[profile_idx] < antirecoil_end[profile_idx])
	    	   		i_val = 1; 
	    		else
	    	    	i_val = -1;
	    		i_pnt = (antirecoil_time[profile_idx] / 10) / (abs(antirecoil_start[profile_idx] - antirecoil_end[profile_idx])); 
	    		
	    	// Reset
	    		if(!get_val(BTN[toggle_fire_btn])) 
	    		{
					ar_y = antirecoil_start[profile_idx];
	    	    	i_cnt = 0;
	    	    	i_num = 0;
	    	    	//rumble = 0;
	    	    	rumble_recoil = 0;
	    	    	antirecoil_boost = 0;
	    		}     
	    					
	    		if(get_val(BTN[toggle_fire_btn]))
				{
				// Rumble AntiRecoil Boost
					antirecoil_boost += random(1, 5);
					if(antirecoil_boost > 10)
						antirecoil_boost = 0;
						
/*				// SmartStop
					if(get_ptime(BTN[toggle_fire_btn]) < 500 || get_rumble(RUMBLE_A))
						rumble = 1;
					else if(get_rumble(RUMBLE_A) == 0)
						rumble = 0;
*/						
				// Progression Calculation
			        if(!p_complete())  
						ar_y = p_val();
			        else
			            ar_y = antirecoil_end[profile_idx];
			 
				// Run Rumble Antirecoil
					if(toggle_antirecoil[profile_idx] == 3) 
					{	
						rumble_recoil = max(get_rumble(RUMBLE_A),get_rumble(RUMBLE_B));
					                 				
						if(rumble_recoil > 10 && rumble_recoil < 90) 
						{
							if(!toggle_aimassist[profile_idx])
							{
								set_val(PS4_RY, clamp(SmartSens(rumble_recoil + rumble_power[profile_idx] + antirecoil_boost, PS4_RY), -100, 100));
								set_val(PS4_RX, clamp(SmartSens(antirecoil_horizontal[profile_idx], PS4_RX), -100, 100));
							}
							else if(toggle_aimassist[profile_idx] > 1)
							{
								set_val(PS4_RY, clamp(SmartSens(rumble_recoil + rumble_power[profile_idx] + antirecoil_boost, PS4_RY) + sin_angle, -100, 100));
								set_val(PS4_RX, clamp(SmartSens(antirecoil_horizontal[profile_idx], PS4_RX) + cos_angle, -100, 100));
							}
							else if(toggle_aimassist[profile_idx] == 1)
							{
								recoilAssist = rumble_recoil + rumble_power[profile_idx] + antirecoil_boost;
								combo_run(STICKY);
							}
							else if(toggle_polar[profile_idx] == 1)
							{
								recoilAssist = rumble_recoil + rumble_power[profile_idx] + antirecoil_boost;
								combo_run(damrec);
							}
						}
						else if(rumble_recoil < 10)
						{
							set_val(PS4_RY, clamp(SmartSens(rumble_recoil + rumble_power[profile_idx] + antirecoil_boost, PS4_RY) + sin_angle, -100, 100));
							set_val(PS4_RX, clamp(SmartSens(antirecoil_horizontal[profile_idx], PS4_RX) + cos_angle, -100, 100));
							ar_y = antirecoil_end[profile_idx];
							antirecoil();
						}
					}
				// Run Progressive or Standard AntiRecoil
					else
					{	
				    // If BurstFire
				    	if(toggle_burstfire[profile_idx] == 1 && get_ptime(BTN[toggle_fire_btn]) <= hold_time)
				    	{
							antirecoil();
				    	}
				    // Full auto and RapidFire with smart stop
				        if(toggle_burstfire[profile_idx] == 0  || toggle_rapidfire[profile_idx] >= 1)
				        {
					        //if(rumble)
					        //{
								antirecoil();
					    	//}
				    	}
				    }
		    	}
			}
		// 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜
			
		// RapidFire
			if(toggle_rapidfire[profile_idx])
			{
				if(toggle_rapidfire[profile_idx] == 1)
				{
				// Rate of Fire Calculation
					hold_time = 50;
					rest_time = 35 * 10 - (get_ival(XB1_RT) * 3);
		    	}
				else if(toggle_rapidfire[profile_idx] == 2)
				{
				// Rate of Fire Calculation
		    		rest_time = 5000 / ((rate_of_fire[profile_idx] * 10) / 60); 
		   			hold_time = rest_time;
		    		if(rest_time < 0) rest_time = 0;
		    	}
				else if(toggle_rapidfire[profile_idx] == 3)
				{
				// Rate of Fire Calculation
		    		rest_time = 500 / rate_of_fire[profile_idx]; 
		   			hold_time = rest_time;
		    		if(rest_time < 0) rest_time = 0;
		    	}
	    
	    	// Run combo
	    		if(get_val(BTN[toggle_fire_btn]))
	    			combo_run(RAPIDFIRE);
	    		else
	    			combo_stop(RAPIDFIRE);
	    		
	    		led_on = 150;
	    		led_off = 300;
	    		combo_run(BLINK);
			}
			
		// 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜
		
		//sensshot
			if(toggle_sensshot[profile_idx])
{
if(toggle_sensshot[profile_idx] == 1) 
			 {
			 
			 if((get_lval(XB1_LT)) >= sens)                   
    set_val(BTN[toggle_deadshot], 100);
 
 }
if(toggle_sensshot[profile_idx] == 2) 
			 {
			 
			 if((get_lval(XB1_LT)) >= sens)                   
    set_val(BTN[toggle_deadshot], 100);
    combo_btn2 = BTN[toggle_deadshot];
						combo_wait = 40;
						combo_run(SPAM2);
 }
 if(toggle_sensshot[profile_idx] == 3) 
			 {

			 if((get_lval(XB1_LT)) >= sens)                   
    {set_val(BTN[toggle_deadshot], 100);
    set_val(XB1_LT, 0);}
 
 }
 if(toggle_sensshot[profile_idx] == 4) 
			 {
			 
			 if((get_lval(XB1_LT)) >= sens)                   
    set_val(BTN[toggle_fire_btn], 100);
 
 }
 if(toggle_sensshot[profile_idx] == 5) 
			 {
			 
			 if((get_lval(XB1_LT)) >= sens)                   
						combo_run(STRAFESHOT);
						else
							combo_stop(STRAFESHOT);
 }
  if(toggle_sensshot[profile_idx] == 6) 
			 {
			 
			 if((get_lval(XB1_LT)) >= sens)                   
						combo_run(JUMPSHOT);
 }
 if(toggle_sensshot[profile_idx] == 7) 
			 {
			 
			 if((get_lval(XB1_LT)) >= sens)                   
			combo_run(CrouchShotCmb);
 }
}
 			if(toggle_sensshot2[profile_idx])
{
if(toggle_sensshot2[profile_idx] == 1) 
			 {
			 
			 if((get_lval(XB1_RT)) >= sens)                   
    set_val(BTN[toggle_deadshot2], 100);
 
 }
if(toggle_sensshot2[profile_idx] == 2) 
			 {
			 
			 if((get_lval(XB1_RT)) >= sens)                
    set_val(BTN[toggle_deadshot2], 100);
    combo_btn3 = BTN[toggle_deadshot2];
						combo_wait = 40;
						combo_run(SPAM3);
 }
  if(toggle_sensshot2[profile_idx] == 3) 
			 {

			 if((get_lval(XB1_RT)) >= sens)                   
    {set_val(BTN[toggle_deadshot2], 100);
    set_val(XB1_RT, 0);}
 
 }
 if(toggle_sensshot2[profile_idx] == 4) 
			 {
			 
			 if((get_lval(XB1_RT)) >= sens)                   
    set_val(BTN[toggle_ads_btn], 100);
 
 }
 if(toggle_sensshot2[profile_idx] == 5) 
			 {
			 
			 if((get_lval(XB1_RT)) >= sens)                   
						combo_run(STRAFESHOT);
						else
							combo_stop(STRAFESHOT);
 }
  if(toggle_sensshot2[profile_idx] == 6) 
			 {
			 
			 if((get_lval(XB1_RT)) >= sens)                   
						combo_run(JUMPSHOT);
 }
 if(toggle_sensshot2[profile_idx] == 7) 
			 {
			 
			 if((get_lval(XB1_RT)) >= sens)                   
			combo_run(CrouchShotCmb);
 }
}
		// 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜 〜
		
		} // Mods end  
		
/////////////////////////////////////////////////////////////////////////////////////////// D I S P L A Y   M O D S   A N D   V A L U E S

		if(display_new) 
		{

			
			if(ModEdit) // Display editable value 
			{
				display_edit_line1();
				display_values();
			}
			else if(ModMenu || ControllerMenu) // Display Profile, mod name, toggle
			{
				display_edit_line1();
				display_edit_line2();
				display_edit_line3();
			}
			else if(MainMenu) // Display Main Menu
			{
				display_mainMenu();
			}
			else if(ProfilesMenu)
			{
				display_edit_line1();
				display_edit_profiles();
			}
			else // Quick Toggle Display (outside any menus)
			{
				cls_oled(OLED_BLACK);
			// Display mod name
				print(center_x(get_string_length(get_string(MODNAME_TXT, modName_idx)), OLED_FONT_SMALL_WIDTH),LINE_2_Y,OLED_FONT_SMALL,OLED_WHITE,get_string(MODNAME_TXT, modName_idx));
			// Display toggle
				display_edit_line3();
				count_black = 2000;
			}
			
			display_black = TRUE;
	        display_new = FALSE;
	       
	    } // display_new section end
	    
/////////////////////////////////////////////////////////////////////////////////////////// D I S P L A Y   U S E R   I N F O  	

		if(display_info) // display navigation infos
		{
			info_timer = 0;
			rect_oled(1, 50, 126, 13, OLED_WHITE, OLED_BLACK); // bottom rectangle (clear)
			current_info = cycle(current_info, 0, entry_count(get_controller_infoTXT()));
			print(center_x(get_string_length(get_string(get_controller_infoTXT(), current_info)), OLED_FONT_SMALL_WIDTH),LINE_4_Y,OLED_FONT_SMALL,OLED_WHITE,get_string(get_controller_infoTXT(), current_info));
			display_info = FALSE;
		}
		
	} // !KillSwitch section end
	
////////////////////////////////////////////////////////////////////////////////////////////////////////// D I S P L A Y   T I T L E   S C R E E N  /  S C R E E N   S A V E R

    if(display_title)
    {

    	
    // Display logo
    	cls_oled(OLED_BLACK);
   		draw_logo();
   			
   	// Display current slot
   		number_to_string(currentSlot, find_digits(currentSlot)); 

   	// Display profile name
		display_profile();
		
   		display_black = TRUE;	
    	display_title = FALSE;
    }
    
////////////////////////////////////////////////////////////////////////////////////////////////////////// L E D S   C O L O R 

	if(KillSwitch)
		led(7);
	else
		led(profile_idx);
		
	if(toggle_rapidfire[profile_idx])
		combo_run(BLINK);	

////////////////////////////////////////////////////////////////////////////////////////////////////////// AIMBOT
    
    if(event_press(PS4_L2))
        combo_run(AIMBOT);
    if(event_release(PS4_L2))
        combo_stop(AIMBOT);
		
}
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////// M A I N   S E C T I O N   E N D

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////// C O M B O S

    
  

combo RUMBLE_ON {					
	set_ledx(2, 2);
	set_rumble(RUMBLE_B, 50);
	wait(150);
	reset_rumble();
	wait(100);
	set_rumble(RUMBLE_B, 50);
	wait(150);
	reset_rumble();
}

combo RUMBLE_OFF {						
	set_ledx(1, 1);
	set_rumble(RUMBLE_A, 50);
	wait(300);
	reset_rumble();
	wait(400);
}

combo KILLSWITCH {
	cls_oled(OLED_BLACK);
    print(center_x(sizeof(MUTE) - 1, OLED_FONT_MEDIUM_WIDTH),8,OLED_FONT_MEDIUM,OLED_WHITE,MUTE[0]);    
    wait(get_rtime());
    wait(250);
    print(center_x(sizeof(HOLD) - 1, OLED_FONT_SMALL_WIDTH),38,OLED_FONT_SMALL,OLED_WHITE,HOLD[0]);     
    print(center_x(sizeof(ACTIVE) - 1, OLED_FONT_SMALL_WIDTH),50,OLED_FONT_SMALL,OLED_WHITE,ACTIVE[0]); 
    wait(get_rtime());
    wait(5000);  
    cls_oled(OLED_BLACK);
    wait(get_rtime());
    wait(5000);  
}

combo SAVE { 
	call(RUMBLE_ON);
	wait(150);
	call(RUMBLE_ON);		
	wait(1000);
	display_title = TRUE;
}

combo RN {
	RN1 = random(65,90);
	RN2 = random(60,90);
	RN3 = random(65,90);
	RN4 = random(65,90); 
	RN5 = random(65,90);
	RN6 = random(65,90);
	RN7 = random(65,90);
	RN8 = random(65,90);
	wait(SAVER);
}

combo BLINK {
	led(profile_idx);
    wait(led_on);
    led(7);
    wait(led_off);
}


combo RAPIDFIRE { 
    wait(hold_time);
    set_val(BTN[toggle_fire_btn], 0);
    wait(rest_time - get_rtime());
    set_val(BTN[toggle_fire_btn], 0);
}  

combo STRAFESHOT { 
    set_val(PS4_LX, 100);
    wait(strafe_time);
    wait(50);
    set_val(PS4_LX, -100);
    wait(strafe_time);
    wait(50);
}

combo JUMPSHOT {
 	set_val(BTN[toggle_jump_btn], 100);
 	wait(50);
 	wait(100);
 }	
combo jump
{
set_val(BTN[toggle_jump_btn],0)
wait(40)
set_val(BTN[toggle_jump_btn], get_ival(BTN[toggle_jump_btn]))
wait(jumptime)
}
combo jump2
{wait(jumptime)
set_val(BTN[toggle_jump_btn],0)
wait(40)
set_val(BTN[toggle_jump_btn], 100)
wait(jumptime)
released_ly_up = FALSE;
 tap_count_up= 0;
  double_tap_timer_up = 0;
  released_ly_up = FALSE;
}
combo SLIDE_CANCEL_MW {              
	set_val(BTN[toggle_crouch_btn], 100);          
	wait(cancel_time);                         
	set_val(BTN[toggle_crouch_btn], 0);            
	wait(60);                          
	set_val(BTN[toggle_crouch_btn], 100);          
	wait(50);                          
	set_val(BTN[toggle_crouch_btn], 100);          
	set_val(BTN[toggle_jump_btn], 100);           
	wait(60);                          
	set_val(BTN[toggle_crouch_btn], 0);            
	set_val(BTN[toggle_jump_btn], 100);          
	wait(10);                        
	set_val(BTN[toggle_jump_btn], 0);
}
combo CrouchShotCmb {
set_val(BTN[toggle_crouch_btn],100);
wait(50);
set_val(BTN[toggle_crouch_btn],0);
wait(60);
}

combo CANCEL_RLD {
set_val(BTN[toggle_loot_btn], 100);
wait(30);
wait(20);
set_val(BTN[toggle_loot_btn], 100);
wait(30);
wait(20);
b_reload=FALSE;
}

combo SLIDE_CANCEL_CW { 
	set_val(BTN[toggle_crouch_btn], 100);
	wait(cancel_time);
	set_val(BTN[toggle_crouch_btn], 0);
	wait(20);
	set_val(BTN[toggle_sprint_btn], 0);
	set_val(BTN[toggle_crouch_btn], 100);
	set_val(BTN[toggle_sprint_btn], 100);
	wait(20);
	set_val(BTN[toggle_crouch_btn], 0);
	set_val(BTN[toggle_sprint_btn], 0);
	wait(20);
}
combo AUTO_RELOAD_cmb {
	set_val(BTN[toggle_reload_btn],100);// Reload Btn
	wait(100);
}
combo CAM_LS_to_RS 
{
 
if((get_val(XB1_LX)) >= deadzonerx) //Deadzone Rightstick looking right,higher number let activate the rightstick later          
set_val(XB1_RX,(get_ival(XB1_LX) * lstors) / 100);

if((get_val(XB1_LX)) <= -deadzonerx/2) //Deadzone Rightstick looking left,higher number let activate the rightstick later                   
set_val(XB1_RX,(get_ival(XB1_LX) * lstors) / 100);
 
 }

int recoilAssist;

combo STICKY {
	if(toggle_antirecoil[profile_idx] && get_val(BTN[toggle_fire_btn]))
    	set_val(PS4_RY, SmartSens(recoilAssist + aimassist_radius, PS4_RY));
    else 
    	set_val(PS4_RY, SmartSens(aimassist_radius, PS4_RY));
    wait(aimassist_angle);
    
	if(toggle_antirecoil[profile_idx] && get_val(BTN[toggle_fire_btn]))
    	set_val(PS4_RY, SmartSens(recoilAssist, PS4_RY));
    set_val(PS4_RX, SmartSens(aimassist_radius, PS4_RX));
    set_val(PS4_LX, SmartSens(aimassist_radius, PS4_LX));
    wait(aimassist_angle);
    
	if(toggle_antirecoil[profile_idx] && get_val(BTN[toggle_fire_btn]))
    	set_val(PS4_RY, SmartSens(recoilAssist + inv(aimassist_radius), PS4_RY));
    else
    	set_val(PS4_RY, SmartSens(inv(aimassist_radius), PS4_RY));
    wait(aimassist_angle);
    
	if(toggle_antirecoil[profile_idx] && get_val(BTN[toggle_fire_btn]))
    	set_val(PS4_RY, SmartSens(recoilAssist, PS4_RY));
    set_val(PS4_RX, SmartSens(inv(aimassist_radius), PS4_RX));
    set_val(PS4_LX, SmartSens(inv(aimassist_radius), PS4_LX));
    wait(aimassist_angle - get_rtime());
    
	if(get_val(PS4_R2))
    	set_val(PS4_RY, SmartSens(recoilAssist, PS4_RY));
    set_val(PS4_RX, SmartSens(inv(aimassist_radius), PS4_RX));
    set_val(PS4_LX, SmartSens(inv(aimassist_radius), PS4_LX));
}
combo stealth
{
   	if (RadiusBoost==TRUE && get_val(BTN[toggle_fire_btn])) {
                Radius = PolarRadius + PolarRBoost;
            }
                else {
                    Radius = PolarRadius;
                }
            
                    if (AngleBoost==TRUE && get_val(BTN[toggle_fire_btn])) {
                        Angle = PolarAngle + PolarABoost;
                    }
                        else {
                            Angle = PolarAngle;
                        }

        if (get_val(BTN[toggle_ads_btn]) && abs(get_ival(PS4_RX)) <= Radius && abs(get_val(PS4_RY)) <= Radius) {         
            
                set_polar(POLAR_RS,Speed = (Speed + Angle) % 360,(abs(get_val(POLAR_RX)) + abs(get_val(POLAR_RY))) / 4 + Radius * 328);
            }
        
}

combo Crescens
		{
		stick_input = (isqrt(pow(get_ival(PS4_RX),2) + pow(get_ival(PS4_RY),2)));
			if (POLARBOOSTER && get_ival(BTN[toggle_fire_btn])) 
			{
				Radius = PolarRadiusc + PrBoost;
			}
			else 
			{
				Radius = PolarRadiusc;
			}
			if (get_ival(BTN[toggle_ads_btn]) || (get_ival(BTN[toggle_fire_btn])))
			{
				if (stick_input <= Radius)
				{ 
					rnd = random(mn, mx);
					RS_gr = (RS_gr + PolarAnglec) % 360;
					set_polar(POLAR_RS, RS_gr, (Radius * rnd));
				
				}
				
			} 
		}
		
combo dam	
{				
				
                if (get_ival(BTN[toggle_ads_btn]) || (DamPolarAssist_On_Off == DAMPolarAAHip && get_ival(BTN[toggle_fire_btn]))) {
                
                    DamX = get_val(PS4_RX);   
                    DamY = get_val(PS4_RY);           
                    ActualMagnitude = isqrt(pow(DamX,2) + pow(DamY,2));  
                    MaxMagnitude = (ActualMagnitude < 100);                      
                
                    if (DamPolarAssist_On_Off >= DamPolarBoost && get_ival(BTN[toggle_fire_btn])) {
                            
                        RadiusDam = DAMRadius + DAMRadiusBoost;
                        AngleDam = DAMAngleBoost;
                        
                    } else {
                            
                        RadiusDam = DAMRadius;
                        AngleDam = 0;
                    }
                    
                    DamAngle += DAMAngle + AngleDam;                                                 
                    DamAngle = DamAngle % 360;                                            
                    DamSin = DamPolar[DamAngle % 360];                           
                    DamCos = DamPolar[(DamAngle + 270) % 360];                  
                    DamCos = (DamCos * RadiusDam) / 100;                         
                    DamSin = (DamSin * RadiusDam) / 100;                          
                
                    if (ActualMagnitude <= 10) {                                                      
                        
                        DamSin -= DamY;                                                              
                        DamCos -= DamX;                                                                 
                    
                    } else {                                                                                       
                            
                        DamSin = (DamSin * (200 - ((abs(DamY) + ActualMagnitude) / 10) * 10) / 200) * MaxMagnitude; 
                        DamCos = (DamCos * (200 - ((abs(DamX) + ActualMagnitude) / 10) * 10) / 200) * MaxMagnitude; 
                    }                                                  
                    
                    set_val(PS4_RX,clamp(DamX + DamCos, -100,100));
                    set_val(PS4_RY,clamp(DamY + DamSin, -100,100)); 
                }
                
            }
            

combo damrec {
    
	if(toggle_polar[profile_idx] && get_val(BTN[toggle_fire_btn]))
    set_val(PS4_LX, SmartSens(DAMRadius, PS4_LX));
    wait(DAMAngle);
    

	if(toggle_polar[profile_idx] && get_val(BTN[toggle_fire_btn]))
    set_val(PS4_LX, SmartSens(inv(DAMRadius), PS4_LX));
    wait(DAMAngle - get_rtime());
    
	if(get_val(PS4_R2))
    set_val(PS4_LX, SmartSens(inv(DAMRadius), PS4_LX));
    
    if(toggle_polar[profile_idx] && get_val(BTN[toggle_ads_btn]))
    set_val(PS4_LX, SmartSens(DAMRadius, PS4_LX));
    wait(DAMAngle);
    

	if(toggle_polar[profile_idx] && get_val(BTN[toggle_ads_btn]))
    set_val(PS4_LX, SmartSens(inv(DAMRadius), PS4_LX));
    wait(DAMAngle - get_rtime());
    
	if(get_val(PS4_L2))
    set_val(PS4_LX, SmartSens(inv(DAMRadius), PS4_LX));
}
            
int combo_btn, combo_btn1,combo_btn2, combo_btn3, combo_btn4, combo_wait;
combo AIM_ABUSE {
    wait(aimabuse_hold);
    set_val(BTN[toggle_ads_btn], 0);
    wait(aimabuse_release - get_rtime());
    set_val(BTN[toggle_ads_btn], 0);
}
combo CLICK_LY 
{ set_val(PS4_LY, -100);  
	set_val(BTN[toggle_sprint_btn],100);
if(get_val(BTN[toggle_crouch_btn]) && get_ptime(BTN[toggle_crouch_btn]) >= 300) 
 onOffeasyrun = FALSE;}
 
combo SPAM {
	wait(combo_wait);
	set_val(combo_btn, 0);
	wait(30);
	set_val(combo_btn, 0);
}

combo SPAM1 {
	wait(combo_wait);
	set_val(combo_btn1, 0);
	wait(30);
	set_val(combo_btn1, 0);
}

combo SPAM2 {
	wait(combo_wait);
	set_val(combo_btn2, 0);
	wait(30);
	set_val(combo_btn2, 0);
}
combo SPAM3 {
	wait(combo_wait);
	set_val(combo_btn3, 0);
	wait(30);
	set_val(combo_btn3, 0);
}

combo SPAM4 {
	wait(combo_wait);
	set_val(combo_btn4, 0);
	wait(30);
	set_val(combo_btn4, 0);
}

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////// F U N C T I O N S 

/////////////////////////////////////////////////////////////////////////////////////////// A N T I R E C O I L

int i_cnt;  

function p_complete() { 

    i_cnt++;
    if(i_cnt > antirecoil_time[profile_idx] / 10) 
    {
        i_cnt = antirecoil_time[profile_idx] / 10;
        return 1;
    }    
    return 0;
}  

int i_num;
int i_pnt;
int ar_y;	
int i_val;

function p_val() { 

    i_num++;
    if(i_num == i_pnt) 
    {
        i_num = 0;
        ar_y += i_val;
    }
    return ar_y;
} 

int SmartVal;	

function SmartSens(f_val, f_axis) { 

	SmartVal = ( (f_val * ( 100 - abs( get_val(f_axis) ) ) ) / 100); 
    return clamp(get_val(f_axis) + SmartVal, -100, 100);
}

function antirecoil() {

	if(!toggle_aimassist[profile_idx])
	{
		set_val(PS4_RY, clamp(SmartSens(ar_y, PS4_RY), -100, 100));   
		set_val(PS4_RX, clamp(SmartSens(antirecoil_horizontal[profile_idx], PS4_RX), -100, 100));
	}
	else if(toggle_aimassist[profile_idx] > 1)
	{
		set_val(PS4_RY, clamp(SmartSens(ar_y, PS4_RY) + sin_angle, -100, 100));   
		set_val(PS4_RX, clamp(SmartSens(antirecoil_horizontal[profile_idx], PS4_RX) + cos_angle, -100, 100));
	}
	else if(toggle_aimassist[profile_idx] == 1)
	{
		recoilAssist = ar_y;
		combo_run(STICKY);
	}
		else if(toggle_polar[profile_idx] == 1)
	{	recoilAssist = ar_y;
		set_val(PS4_RY, clamp(SmartSens(ar_y, PS4_RY) + sin_angle, -100, 100));   
		set_val(PS4_RX, clamp(SmartSens(antirecoil_horizontal[profile_idx], PS4_RX) + cos_angle, -100, 100));
		combo_run(damrec);
	}
}
/////////////////////////////////////////////////////////////////////////////////////////// A I M   A S S I S T

int time;
int RX, RY;
int angle, cos_angle, sin_angle;
int SpiralPosition1,SpiralPosition2,InnerSpiral,OuterSpiral;
int actual_Magnitude, max_Magnitude, Position;

const int8 Polar_Array[]={100,100,100,100,100,100,100,100,99,99,99,99,98,98,97,97,97,96,95,95,94,94,93,92,92,91,90,89,89,88,87,86,85,84,83,82,81,    
80,79,78,77,75,74,73,72,71,70,69,67,66,65,63,62,61,59,58,56,55,53,52,50,49,47,46,44,43,41,40,38,36,35,33,31,30,28,26,25,23,21,20,18,16,14,13,11,9,7, 
6,4,2,0,-1,-3,-5,-7,-8,-10,-12,-13,-15,-17,-19,-20,-22,-24,-25,-27,-29,-30,-32,-34,-35,-37,-39,-40,-42,-43,-45,-46,-48,-50,-51,-53,-54,-55,-57,-58,  
-60,-61,-62,-64,-65,-66,-68,-69,-70,-71,-73,-74,-75,-76,-77,-78,-79,-80,-81,-82,-83,-84,-85,-86,-87,-88,-89,-89,-90,-91,-92,-92,-93,-93,-94,-95,-95, 
-96,-96,-97,-97,-97,-98,-98,-99,-99,-99,-99,-100,-100,-100,-100,-100,-100,-100,-100,-100,-100,-100,-100,-100,-100,-99,-99,-99,-98,-98,-98,-97,-97,   
-96,-96,-95,-94,-94,-93,-93,-92,-91,-90,-90,-89,-88,-87,-86,-85,-84,-83,-82,-81,-80,-79,-78,-77,-76,-75,-74,-72,-71,-70,-69,-67,-66,-65,-63,-62,-61, 
-59,-58,-56,-55,-53,-52,-50,-49,-47,-46,-44,-43,-41,-40,-38,-36,-35,-33,-31,-30,-28,-26,-25,-23,-21,-20,-18,-16,-14,-13,-11,-9,-7,-6,-4,-2,0,2,4,6,7,
9,11,13,14,16,18,20,21,23,25,26,28,30,31,33,35,36,38,40,41,43,44,46,47,49,51,52,54,55,56,58,59,61,62,63,65,66,67,69,70,70,72,73,74,75,77,78,79,80,81,
82,83,84,85,86,87,88,89,89,90,91,92,92,93,94,94,95,95,96,97,97,97,98,98,99,99,99,99,100,100,100,100,100,100,100}; 

int timer;

function GetShapesV1(f_var) {     
   
    if(!SpiralPosition1)                                
	{
		InnerSpiral -= 1;
		if(InnerSpiral < 1)
			SpiralPosition1 = TRUE;
	}
	else
	{
	    InnerSpiral += 1;
		if(InnerSpiral > f_var)
			SpiralPosition1 = FALSE;
	}
	if(!SpiralPosition2)
	{
		OuterSpiral -= 1;
		if(OuterSpiral < 1)
			SpiralPosition2 = TRUE;
	}
	else
	{
		OuterSpiral += 1;
		if(OuterSpiral >  f_var)
			SpiralPosition2 = FALSE;
	} 
	if(toggle_aimassist[profile_idx] == 2)                    
	{ 
        RY = (sin_angle * f_var) /100;
        RX = (cos_angle * f_var) /100;  
	} 
	if(toggle_aimassist[profile_idx] == 3)        
	{ 
        RY = (sin_angle * f_var) /100;
        RX = (cos_angle * (f_var / 2)) /100; 
	}
	if(toggle_aimassist[profile_idx] == 4)                     
	{ 
        RY = (sin_angle * (f_var / 2)) /100;
        RX = (cos_angle * f_var) /100;  
	} 
	if(toggle_aimassist[profile_idx] == 5)                  
	{
        RY = (sin_angle * InnerSpiral) /100;
        RX = (cos_angle * OuterSpiral) /100;  
	}
    if(toggle_aimassist[profile_idx] == 6)
	{
		RX = (cos_angle * Position) /100;
		RY = (sin_angle * Position) /100;
	
		if(Position == 0)
		    RX = (cos_angle * f_var) /100;
		    
		if(Position == 1)
			RY = (sin_angle * f_var) /100;
			
		if(Position == 2) 
			RX = (cos_angle * f_var) /100 * -1;
			
		if(Position == 3)
			RY = (sin_angle * f_var) /100 * -1;
			
		timer++;
		if(timer >= aimassist_angle)
		{
			Position++;
			timer = 0;
		}
				
		if(Position == 4)
			Position = 0;
    }
    cos_angle = RX;
	sin_angle = RY;

   }  

	


/////////////////////////////////////////////////////////////////////////////////////////// D Y N A M I C   S E N S I T I V I T Y 

int sens_x;
int sens_y;
int sens_xcnt,sens_ycnt;

function set_sens () { // Dynamic Sens by Batts

    if(abs(get_lval(PS4_RX)) >= dynasens_limit) 
    {
	    sens_xcnt += 1;
	    
		if(sens_xcnt >= dynasens_increase_rate && sens_x < dynasens_max_sens) 
		{ 
		    sens_x += 1; 
		    sens_xcnt = 0; 
		} 
			else if(sens_x >= dynasens_max_sens) 
				sens_xcnt = 0;  
	}
	
    else if(abs(get_val(PS4_RX)) < dynasens_restart) 
    {
	    sens_xcnt = 0; 
	    sens_x = dynasens_initial_sens;
	} 
	
    if(abs(get_lval(PS4_RY)) >= dynasens_limit) 
    {
	    sens_ycnt += 1;
		if(sens_ycnt >= dynasens_increase_rate && sens_y < dynasens_max_sens) 
		{ 
		    sens_y += 1; 
		    sens_ycnt = 1; 
		} 
			else if(sens_y >= dynasens_max_sens) 
				sens_ycnt = 0; 
	}
	
    else if(abs(get_val(PS4_RY)) < dynasens_restart) 
    {
	    sens_y = dynasens_initial_sens; 
	    sens_ycnt = 0;
	}
	
	sensitivity(PS4_RX,NOT_USE,sens_x);
    sensitivity(PS4_RY,NOT_USE,sens_y);
}

/////////////////////////////////////////////////////////////////////////////////////////// C H E C K   A C T I V A T O R 


/////////////////////////////////////////////////////////////////////////////////////////// D I S P L A Y   F U N C T I O N S 

function display_mainMenu() {

// Clears text emplacement (emplacement for lines 1, 2, 3, without arrows)
	rect_oled(13, 1, 102, 47, OLED_WHITE, OLED_BLACK); 
// Drop-down menu
	PrintMenu(MODMENU_MM,CONTROLLER_MM,PROFILES_MM,WHEELMODE_MM);
	PrintMenu(CONTROLLER_MM,PROFILES_MM,MODMENU_MM,WHEELMODE_MM);
	PrintMenu(PROFILES_MM,MODMENU_MM,CONTROLLER_MM,WHEELMODE_MM);
}

function PrintMenu(f_active,f_line3,f_line1){  
 
	if(menuName_idx == f_active) 
	{ 
		print(center_x(get_string_length(get_string(MENUNAME_TXT, f_active)), OLED_FONT_SMALL_WIDTH),LINE_2_Y,OLED_FONT_SMALL,OLED_WHITE,get_string(MENUNAME_TXT,f_active));
		print(center_x(get_string_length(get_string(MENUNAME_TXT, f_line3)) , OLED_FONT_SMALL_WIDTH),LINE_3_Y,OLED_FONT_SMALL,OLED_WHITE,get_string(MENUNAME_TXT,f_line3) ); 
		print(center_x(get_string_length(get_string(MENUNAME_TXT, f_line1)) , OLED_FONT_SMALL_WIDTH),LINE_1_Y,OLED_FONT_SMALL,OLED_WHITE,get_string(MENUNAME_TXT,f_line1) );
	} 
}

function display_edit_line1() {

// Clears text emplacement line 1
	rect_oled(13, 1, 102, OLED_FONT_SMALL_HEIGHT + 5, OLED_WHITE , OLED_BLACK);
	
	if(ModMenu)
	{				
	// Display Profile only on mods that may have different ON/OFF status depending on the active Profile
		if(modName_idx < AMOUNT_OF_MULTI_TOGGLE) 
			display_profile ();
		else // Mods that have the same toggle on every profiles, display EVERY PROFILE
    		print(center_x(sizeof(ALL) - 1, OLED_FONT_SMALL_WIDTH),4,OLED_FONT_SMALL,OLED_WHITE,ALL[0]);
	}
	
	else if(ModEdit) 
	{
	// Display Value Name
    	if(valName_idx == END_V && toggle_antirecoil[profile_idx] == STANDARD)
    		print(center_x(sizeof(ANTIRECOIL_VERTICAL) - 1, OLED_FONT_SMALL_WIDTH),LINE_1_Y,OLED_FONT_SMALL,OLED_WHITE,ANTIRECOIL_VERTICAL[0]);  
    	else
    		print(center_x(get_string_length(get_string(VALNAME_TXT, valName_idx)), OLED_FONT_SMALL_WIDTH),LINE_1_Y,OLED_FONT_SMALL,OLED_WHITE,get_string(VALNAME_TXT, valName_idx));  
	}
	else if(ControllerMenu)
	{
	// Display Value Name
    	print(center_x(sizeof(CONTROLLER) - 1, OLED_FONT_SMALL_WIDTH),LINE_1_Y,OLED_FONT_SMALL,OLED_WHITE,CONTROLLER[0]);  
	}
	else if(ProfilesMenu)
	{
	// Display Value Name
    	print(center_x(get_string_length(get_string(PROFILESNAME_TXT, profilesName_idx)), OLED_FONT_SMALL_WIDTH),LINE_1_Y,OLED_FONT_SMALL,OLED_WHITE,get_string(PROFILESNAME_TXT, profilesName_idx));
	}
	
	else if(wWheelMode)
	{
	// Display Value Name
    	print(center_x(get_string_length(get_string(PROFILESNAME_TXT, profilesName_idx)), OLED_FONT_SMALL_WIDTH),LINE_1_Y,OLED_FONT_SMALL,OLED_WHITE,get_string(PROFILESNAME_TXT, profilesName_idx));
	}
}

function display_edit_line2() {
	
// Clears text emplacement line 2
	rect_oled(13, 17, 102, OLED_FONT_SMALL_HEIGHT + 5, OLED_WHITE , OLED_BLACK);
		
	if(ModMenu)
	{
	// Display Mod Name
		print(center_x(get_string_length(get_string(MODNAME_TXT, modName_idx)), OLED_FONT_SMALL_WIDTH),LINE_2_Y,OLED_FONT_SMALL,OLED_WHITE,get_string(MODNAME_TXT, modName_idx));  // small size
	}
	else if(ControllerMenu)
	{
	// Display Controller Name
		print(center_x(get_string_length(get_string(CONTROLLERNAME_TXT, controllerName_idx)), OLED_FONT_SMALL_WIDTH),LINE_2_Y,OLED_FONT_SMALL,OLED_WHITE,get_string(CONTROLLERNAME_TXT, controllerName_idx));  // small size
	
	}
}

function display_edit_line3() {
	
// Clears text emplacement line 3
	rect_oled(13, 33, 102, OLED_FONT_SMALL_HEIGHT + 5, OLED_WHITE , OLED_BLACK);
	
	if(ControllerMenu)
	{
		display_toggle( controllerName_idx, ADS_BTN_C      , get_controller_layoutBTN_TXT(), toggle_ads_btn      );
		display_toggle( controllerName_idx, FIRE_BTN_C     , get_controller_layoutBTN_TXT(), toggle_fire_btn     );
		display_toggle( controllerName_idx, JUMP_BTN_C     , get_controller_layoutBTN_TXT(), toggle_jump_btn     );
		display_toggle( controllerName_idx, CROUCH_BTN_C   , get_controller_layoutBTN_TXT(), toggle_crouch_btn   );
		display_toggle( controllerName_idx, loot_BTN_C   , get_controller_layoutBTN_TXT(), toggle_loot_btn   );
		display_toggle( controllerName_idx, MELEE_BTN_C    , get_controller_layoutBTN_TXT(), toggle_melee_btn    );
		display_toggle( controllerName_idx, bumper_BTN_C    , get_controller_layoutBTN_TXT(), toggle_bumper    );
		display_toggle( controllerName_idx, SPRINT_BTN_C   , get_controller_layoutBTN_TXT(), toggle_sprint_btn   );
		display_toggle( controllerName_idx, reload_BTN_C  , get_controller_layoutBTN_TXT() , toggle_reload_btn  );
		display_toggle( controllerName_idx, MELEE2_BTN_C    , get_controller_layoutBTN_TXT(), toggle_melee2_btn    );
		display_toggle( controllerName_idx, dbup_C	       , get_controller_layoutBTN_TXT(), toggle_dbup         );
		display_toggle( controllerName_idx, dbdown_C	   , get_controller_layoutBTN_TXT(), toggle_dbdown       );
		display_toggle( controllerName_idx, dbleft_C       , get_controller_layoutBTN_TXT(), toggle_dbleft       );
		display_toggle( controllerName_idx, dbright_C	   , get_controller_layoutBTN_TXT(), toggle_dbright      );
		display_toggle( controllerName_idx, hold1_C	       , get_controller_layoutBTN_TXT(), toggle_hold1         );
		display_toggle( controllerName_idx, hold2_C	       , get_controller_layoutBTN_TXT(), toggle_hold2         );
		display_toggle( controllerName_idx, invert_M     , ONOFF_TXT       , toggle_invert     );
		display_toggle( controllerName_idx, deadshot_M  ,  get_controller_layoutBTN_TXT()  , toggle_deadshot[profile_idx]     );
		display_toggle( controllerName_idx, deadshot2_M  ,  get_controller_layoutBTN_TXT()  , toggle_deadshot2[profile_idx]     );
		display_toggle( controllerName_idx, accxl_M  ,  get_controller_layoutBTN_TXT()  , toggle_accxl[profile_idx]     );
		display_toggle( controllerName_idx, accxr_M  ,  get_controller_layoutBTN_TXT()  , toggle_accxr[profile_idx]     );
	}
	else
	{
	// Display toggle ON/OFF status
	    // Mods that may have different ON/OFF status depending on the active Profile
		display_toggle( modName_idx, ANTIRECOIL_M , ANTIRECOIL_TXT     , toggle_antirecoil[profile_idx]    );
		display_toggle( modName_idx, RAPIDFIRE_M  , RAPIDFIRE_TXT      , toggle_rapidfire[profile_idx]     );
		display_toggle( modName_idx, sensshot_M  , lmod_TXT          , toggle_sensshot[profile_idx]     );
		display_toggle( modName_idx, sensshot2_M  , rmod_TXT          , toggle_sensshot2[profile_idx]     );
		display_toggle( modName_idx, AIMASSIST_M  , SHAPES_TXT         , toggle_aimassist[profile_idx]     );
		display_toggle( modName_idx, camangle_M   , ONOFF_TXT          , toggle_camangle[profile_idx]      );
		display_toggle( modName_idx, HOLDBREATH_M , ONOFF_TXT          , toggle_holdBreath[profile_idx]    );
		display_toggle( modName_idx, polar_M , polar_TXT          , toggle_polar[profile_idx]    );
		display_toggle( modName_idx, quick_M     , quick_TXT         , toggle_quick[profile_idx]       );
		display_toggle( modName_idx, gyro_M    , gyro_TXT         , toggle_gyro[profile_idx]      );
		display_toggle( modName_idx, easyrun_M     , easyrun_TXT       , toggle_easyrun[profile_idx]     );
		display_toggle( modName_idx, AUTORUN_M     , lootrun_TXT       , toggle_autorun[profile_idx]     );
		display_toggle( modName_idx, AIMABUSE_M   , ONOFF_TXT          , toggle_aimabuse[profile_idx]      );
		display_toggle( modName_idx, switchstick_M    , switchstick_TXT       , toggle_switchstick[profile_idx]    );
		// Mods that have same ON/OFF status on every Profile
		display_toggle( modName_idx, dpad_M , dpad_TXT , toggle_dpad );
		display_toggle( modName_idx, SLIDECANCEL_M , SLIDECANCEL_TXT , toggle_slideCancel );
		display_toggle( modName_idx, vm_M , ONOFF_TXT , toggle_vm );
		display_toggle( modName_idx, cr_M , cr_TXT , toggle_reload );
		display_toggle( modName_idx, jump_M , jump_TXT , toggle_jump );
		display_toggle( modName_idx, hair_M , hair_TXT , toggle_hairTrigger );
		
	}
}

function display_edit_profiles() {
	if(profilesName_idx == PRIM_SEC_P)
	{		
	// Clears  text emplacement line 2 and 3
		rect_oled(13, 18, 102, OLED_FONT_SMALL_HEIGHT + 19, OLED_WHITE , OLED_BLACK); //  rectangle left (line 2 and 3)
		
		if(toggle_pressBTN[profilesName_idx] == 0)
			print(center_x(sizeof(PRESS_BTN) - 1, OLED_FONT_SMALL_WIDTH),LINE_2_3_Y,OLED_FONT_SMALL,OLED_WHITE,PRESS_BTN[0]);
		else
			print(center_x(get_string_length(get_string(get_controller_profileBTN_TXT(), toggle_pressBTN[profilesName_idx])), OLED_FONT_SMALL_WIDTH),LINE_2_3_Y,OLED_FONT_SMALL,OLED_WHITE,get_string(get_controller_profileBTN_TXT(), toggle_pressBTN[profilesName_idx]));
	}
	else
	{
	// Clears text emplacement line 2
		rect_oled(13, 17, 102, OLED_FONT_SMALL_HEIGHT + 5, OLED_WHITE , OLED_BLACK);
	// Clears text emplacement line 3
		rect_oled(13, 33, 102, OLED_FONT_SMALL_HEIGHT + 5, OLED_WHITE , OLED_BLACK);
		
		if(toggle_holdBTN[profilesName_idx] == 0)
			print(center_x(sizeof(HOLD_BTN) - 1, OLED_FONT_SMALL_WIDTH),LINE_2_Y,OLED_FONT_SMALL,OLED_WHITE,HOLD_BTN[0]);
		else
			print(center_x(get_string_length(get_string(get_controller_profileBTN_TXT(), toggle_holdBTN[profilesName_idx])), OLED_FONT_SMALL_WIDTH),LINE_2_Y,OLED_FONT_SMALL,OLED_WHITE,get_string(get_controller_profileBTN_TXT(), toggle_holdBTN[profilesName_idx]));
		
		if(toggle_pressBTN[profilesName_idx] == 0)
			print(center_x(sizeof(PRESS_BTN) - 1, OLED_FONT_SMALL_WIDTH),LINE_3_Y,OLED_FONT_SMALL,OLED_WHITE,PRESS_BTN[0]);
		else
			print(center_x(get_string_length(get_string(get_controller_profileBTN_TXT(), toggle_pressBTN[profilesName_idx])), OLED_FONT_SMALL_WIDTH),LINE_3_Y,OLED_FONT_SMALL,OLED_WHITE,get_string(get_controller_profileBTN_TXT(), toggle_pressBTN[profilesName_idx]));			
	}
	if(profilesName_idx == br1_C)
	{
	// Clears text emplacement line 2
		rect_oled(13, 17, 102, OLED_FONT_SMALL_HEIGHT + 5, OLED_WHITE , OLED_BLACK);
	// Clears text emplacement line 3
		rect_oled(13, 33, 102, OLED_FONT_SMALL_HEIGHT + 5, OLED_WHITE , OLED_BLACK);
		
		if(toggle_br1activat[profilesName_idx] == 0)
			print(center_x(sizeof(double_tap) - 1, OLED_FONT_SMALL_WIDTH),LINE_2_Y,OLED_FONT_SMALL,OLED_WHITE,double_tap[0]);
		else
			print(center_x(get_string_length(get_string(get_controller_profileBTN_TXT(), toggle_br1activat[profilesName_idx])), OLED_FONT_SMALL_WIDTH),LINE_2_Y,OLED_FONT_SMALL,OLED_WHITE,get_string(get_controller_profileBTN_TXT(), toggle_br1activat[profilesName_idx]));
		
		if(toggle_br1[profilesName_idx] == 0)
			print(center_x(sizeof(activate) - 1, OLED_FONT_SMALL_WIDTH),LINE_3_Y,OLED_FONT_SMALL,OLED_WHITE,activate[0]);
		else
			print(center_x(get_string_length(get_string(get_controller_profileBTN_TXT(), toggle_br1[profilesName_idx])), OLED_FONT_SMALL_WIDTH),LINE_3_Y,OLED_FONT_SMALL,OLED_WHITE,get_string(get_controller_profileBTN_TXT(), toggle_br1[profilesName_idx]));			
	}
		if(profilesName_idx == br2_C)
	{
	// Clears text emplacement line 2
		rect_oled(13, 17, 102, OLED_FONT_SMALL_HEIGHT + 5, OLED_WHITE , OLED_BLACK);
	// Clears text emplacement line 3
		rect_oled(13, 33, 102, OLED_FONT_SMALL_HEIGHT + 5, OLED_WHITE , OLED_BLACK);
		
		if(toggle_br1activat2[profilesName_idx] == 0)
			print(center_x(sizeof(double_tap) - 1, OLED_FONT_SMALL_WIDTH),LINE_2_Y,OLED_FONT_SMALL,OLED_WHITE,double_tap[0]);
		else
			print(center_x(get_string_length(get_string(get_controller_profileBTN_TXT(), toggle_br1activat2[profilesName_idx])), OLED_FONT_SMALL_WIDTH),LINE_2_Y,OLED_FONT_SMALL,OLED_WHITE,get_string(get_controller_profileBTN_TXT(), toggle_br1activat2[profilesName_idx]));
		
		if(toggle_br2[profilesName_idx] == 0)
			print(center_x(sizeof(activate) - 1, OLED_FONT_SMALL_WIDTH),LINE_3_Y,OLED_FONT_SMALL,OLED_WHITE,activate[0]);
		else
			print(center_x(get_string_length(get_string(get_controller_profileBTN_TXT(), toggle_br2[profilesName_idx])), OLED_FONT_SMALL_WIDTH),LINE_3_Y,OLED_FONT_SMALL,OLED_WHITE,get_string(get_controller_profileBTN_TXT(), toggle_br2[profilesName_idx]));			
	}
	if(profilesName_idx == remap1_C)
	{
	// Clears text emplacement line 2
		rect_oled(13, 17, 102, OLED_FONT_SMALL_HEIGHT + 5, OLED_WHITE , OLED_BLACK);
	// Clears text emplacement line 3
		rect_oled(13, 33, 102, OLED_FONT_SMALL_HEIGHT + 5, OLED_WHITE , OLED_BLACK);
		
		if(toggle_to1[profilesName_idx] == 0)
			print(center_x(sizeof(map) - 1, OLED_FONT_SMALL_WIDTH),LINE_2_Y,OLED_FONT_SMALL,OLED_WHITE,map[0]);
		else
			print(center_x(get_string_length(get_string(get_controller_profileBTN_TXT(), toggle_to1[profilesName_idx])), OLED_FONT_SMALL_WIDTH),LINE_2_Y,OLED_FONT_SMALL,OLED_WHITE,get_string(get_controller_profileBTN_TXT(), toggle_to1[profilesName_idx]));
		
		if(toggle_remap1[profilesName_idx] == 0)
			print(center_x(sizeof(to) - 1, OLED_FONT_SMALL_WIDTH),LINE_3_Y,OLED_FONT_SMALL,OLED_WHITE,to[0]);
		else
			print(center_x(get_string_length(get_string(get_controller_profileBTN_TXT(), toggle_remap1[profilesName_idx])), OLED_FONT_SMALL_WIDTH),LINE_3_Y,OLED_FONT_SMALL,OLED_WHITE,get_string(get_controller_profileBTN_TXT(), toggle_remap1[profilesName_idx]));			
	}
		if(profilesName_idx == remap2_C)
	{
	// Clears text emplacement line 2
		rect_oled(13, 17, 102, OLED_FONT_SMALL_HEIGHT + 5, OLED_WHITE , OLED_BLACK);
	// Clears text emplacement line 3
		rect_oled(13, 33, 102, OLED_FONT_SMALL_HEIGHT + 5, OLED_WHITE , OLED_BLACK);
		
		if(toggle_to2[profilesName_idx] == 0)
			print(center_x(sizeof(map) - 1, OLED_FONT_SMALL_WIDTH),LINE_2_Y,OLED_FONT_SMALL,OLED_WHITE,map[0]);
		else
			print(center_x(get_string_length(get_string(get_controller_profileBTN_TXT(), toggle_to2[profilesName_idx])), OLED_FONT_SMALL_WIDTH),LINE_2_Y,OLED_FONT_SMALL,OLED_WHITE,get_string(get_controller_profileBTN_TXT(), toggle_to2[profilesName_idx]));
		
		if(toggle_remap2[profilesName_idx] == 0)
			print(center_x(sizeof(to) - 1, OLED_FONT_SMALL_WIDTH),LINE_3_Y,OLED_FONT_SMALL,OLED_WHITE,to[0]);
		else
			print(center_x(get_string_length(get_string(get_controller_profileBTN_TXT(), toggle_remap2[profilesName_idx])), OLED_FONT_SMALL_WIDTH),LINE_3_Y,OLED_FONT_SMALL,OLED_WHITE,get_string(get_controller_profileBTN_TXT(), toggle_remap2[profilesName_idx]));			
	}
	if(profilesName_idx == remap3_C)
	{
	// Clears text emplacement line 2
		rect_oled(13, 17, 102, OLED_FONT_SMALL_HEIGHT + 5, OLED_WHITE , OLED_BLACK);
	// Clears text emplacement line 3
		rect_oled(13, 33, 102, OLED_FONT_SMALL_HEIGHT + 5, OLED_WHITE , OLED_BLACK);
		
		if(toggle_to3[profilesName_idx] == 0)
			print(center_x(sizeof(map) - 1, OLED_FONT_SMALL_WIDTH),LINE_2_Y,OLED_FONT_SMALL,OLED_WHITE,map[0]);
		else
			print(center_x(get_string_length(get_string(get_controller_profileBTN_TXT(), toggle_to3[profilesName_idx])), OLED_FONT_SMALL_WIDTH),LINE_2_Y,OLED_FONT_SMALL,OLED_WHITE,get_string(get_controller_profileBTN_TXT(), toggle_to3[profilesName_idx]));
		
		if(toggle_remap3[profilesName_idx] == 0)
			print(center_x(sizeof(to) - 1, OLED_FONT_SMALL_WIDTH),LINE_3_Y,OLED_FONT_SMALL,OLED_WHITE,to[0]);
		else
			print(center_x(get_string_length(get_string(get_controller_profileBTN_TXT(), toggle_remap3[profilesName_idx])), OLED_FONT_SMALL_WIDTH),LINE_3_Y,OLED_FONT_SMALL,OLED_WHITE,get_string(get_controller_profileBTN_TXT(), toggle_remap3[profilesName_idx]));			
	}
		if(profilesName_idx == remap4_C)
	{
	// Clears text emplacement line 2
		rect_oled(13, 17, 102, OLED_FONT_SMALL_HEIGHT + 5, OLED_WHITE , OLED_BLACK);
	// Clears text emplacement line 3
		rect_oled(13, 33, 102, OLED_FONT_SMALL_HEIGHT + 5, OLED_WHITE , OLED_BLACK);
		
		if(toggle_to4[profilesName_idx] == 0)
			print(center_x(sizeof(map) - 1, OLED_FONT_SMALL_WIDTH),LINE_2_Y,OLED_FONT_SMALL,OLED_WHITE,map[0]);
		else
			print(center_x(get_string_length(get_string(get_controller_profileBTN_TXT(), toggle_to4[profilesName_idx])), OLED_FONT_SMALL_WIDTH),LINE_2_Y,OLED_FONT_SMALL,OLED_WHITE,get_string(get_controller_profileBTN_TXT(), toggle_to4[profilesName_idx]));
		
		if(toggle_remap4[profilesName_idx] == 0)
			print(center_x(sizeof(to) - 1, OLED_FONT_SMALL_WIDTH),LINE_3_Y,OLED_FONT_SMALL,OLED_WHITE,to[0]);
		else
			print(center_x(get_string_length(get_string(get_controller_profileBTN_TXT(), toggle_remap4[profilesName_idx])), OLED_FONT_SMALL_WIDTH),LINE_3_Y,OLED_FONT_SMALL,OLED_WHITE,get_string(get_controller_profileBTN_TXT(), toggle_remap4[profilesName_idx]));			
	}
	if(profilesName_idx == presstime_C)
	{
	// Clears text emplacement line 2
		rect_oled(13, 17, 102, OLED_FONT_SMALL_HEIGHT + 5, OLED_WHITE , OLED_BLACK);
	// Clears text emplacement line 3
		rect_oled(13, 33, 102, OLED_FONT_SMALL_HEIGHT + 5, OLED_WHITE , OLED_BLACK);
		
		if(toggle_press[profilesName_idx] == 0)
			print(center_x(sizeof(map) - 1, OLED_FONT_SMALL_WIDTH),LINE_2_Y,OLED_FONT_SMALL,OLED_WHITE,map[0]);
		else
			print(center_x(get_string_length(get_string(get_controller_profileBTN_TXT(), toggle_press[profilesName_idx])), OLED_FONT_SMALL_WIDTH),LINE_2_Y,OLED_FONT_SMALL,OLED_WHITE,get_string(get_controller_profileBTN_TXT(), toggle_press[profilesName_idx]));
		
		if(toggle_presstime[profilesName_idx] == 0)
			print(center_x(sizeof(to) - 1, OLED_FONT_SMALL_WIDTH),LINE_3_Y,OLED_FONT_SMALL,OLED_WHITE,to[0]);
		else
			print(center_x(get_string_length(get_string(get_controller_profileBTN_TXT(), toggle_presstime[profilesName_idx])), OLED_FONT_SMALL_WIDTH),LINE_3_Y,OLED_FONT_SMALL,OLED_WHITE,get_string(get_controller_profileBTN_TXT(), toggle_presstime[profilesName_idx]));			
	}
}



function display_values() {

// Clears value zone
	rect_oled(38, 18, 51 , OLED_FONT_SMALL_HEIGHT + 3 , OLED_WHITE , OLED_BLACK); // small rectangle center (line 2 value)
	rect_oled(27, 31, 74 , OLED_FONT_SMALL_HEIGHT + 6 , OLED_WHITE , OLED_BLACK); // small rectangle center (line 3 value)
	
	// Mods that may have different values depending on the active Profile
	display_edit( START_V       , antirecoil_start[profile_idx]      );
	display_edit( END_V         , antirecoil_end[profile_idx]        );
	display_edit( TIME_V        , antirecoil_time[profile_idx]       );
	display_edit( HORIZ_V       , antirecoil_horizontal[profile_idx] );
	display_edit( RUMBLEPOWER_V , rumble_power[profile_idx]          );
	display_edit( RATE_V        , rate_of_fire[profile_idx]          );
				
	// Mods that have same value on every Profile
	display_edit( sens_V   , sens      );
	display_edit( RADIUS_V      , aimassist_radius       );
	display_edit( STEPS_V       , aimassist_angle        );
	display_edit( DAMRadius_V      , DAMRadius       );
	display_edit( DAMAngle_V       , DAMAngle        );
	display_edit( PolarABoost_v      , PolarAngle       );
	display_edit( PolarRBoost_V       , PolarRadius        );
	display_edit( PolarABoostc_v      , PolarAnglec       );
	display_edit( PolarRBoostc_V       , PolarRadiusc        );
	display_edit( lstors_V    , lstors          );
	display_edit( deadzonerx_V , deadzonerx       );
	display_edit( GENERAL_V     , genSens                );
	display_edit( ADS_V         , adsSens                );
	display_edit( FIRE_V        , hipSens                );
	display_edit( ADSFIRE_V     , adsfireSens            );
	display_edit( startrun_V      , startrun          );
	display_edit( loottime_V      , loottime          );
	display_edit( adsswitch_V      , adsswitch          );
	display_edit( jumptime_V      , jumptime          );
	display_edit( stop_V        , stop           );
	display_edit( HOLDTIME_V    , aimabuse_hold          );
	display_edit( RELEASETIME_V , aimabuse_release       );
	display_edit( rltime_V , rld_1       );
}

int profile_y;

function display_profile() {

	if(display_title)
		profile_y = 50; // Title screen
	else
		profile_y = 4; // Menus
	
    print(center_x(get_string_length(get_string(PROFILE_TXT, profile_idx)), OLED_FONT_SMALL_WIDTH),profile_y,OLED_FONT_SMALL,OLED_WHITE,get_string(PROFILE_TXT, profile_idx));
}

function display_edit(f_idx, f_val) { 
	
    if(valName_idx == f_idx)
    		number_to_string(f_val, find_digits(f_val));
}

function display_toggle(f_idx, f_name, f_txt, f_toggle) { 

    if(f_idx == f_name)
    	print(center_x(get_string_length(get_string(f_txt, f_toggle)), OLED_FONT_SMALL_WIDTH),LINE_3_Y,OLED_FONT_SMALL,OLED_WHITE,get_string(f_txt, f_toggle));
}

/////////////////////////////////////////////////////////////////////////////////////////// E D I T   V A L U E S   F U N C T I O N S 

function edit_val(f_idx, f_val, f_min, f_max, f_inc1, f_inc2) {  
	
	if(valName_idx == f_idx)
	{
    // +1 or -1															 
    	f_val    = value_change( f_val ,PS4_LEFT , inv(f_inc1), f_min, f_max ); 
    	f_val    = value_change( f_val ,PS4_RIGHT, f_inc1     , f_min, f_max ); 
   	 // +10 or -10
   	   	f_val    = value_change( f_val ,PS4_DOWN , inv(f_inc2), f_min, f_max ); 
       	f_val    = value_change( f_val ,PS4_UP   , f_inc2     , f_min, f_max ); 
	}		
	return f_val;
}

function value_change(f_val,f_btn,f_inc, f_rng_min, f_rng_max) { 

    if(press_hold(f_btn)) 
    {
        f_val += f_inc;
	// Substract    
	  	if(f_val < f_rng_min) 
	  		f_val = f_rng_min; 
	// Add   
	  	if(f_val > f_rng_max) 
	  		f_val = f_rng_max; 
    		
        display_new = TRUE; 
    }
    return f_val; 
} 

/////////////////////////////////////////////////////////////////////////////////////////// T O G G L E S   F U N C T I O N S 
int time_to_clear_screen;
function QT_MESSAGE_TIMEOUT (){     
	// Clear OLED Screen              
	cls_oled(0); // will clear oled   
	display_title  = FALSE;           
}            
function on_the_fly_display (f_string, f_print, f_val){
    cls_oled(0);  
    line_oled(1,18,127,18,1,1);
    printf(f_string, 0, OLED_FONT_MEDIUM, OLED_WHITE, f_print);  
    number_to_string(f_val, find_digits(f_val));
     time_to_clear_screen  = 2000;
}  

function toggle(f_idx, f_name, f_txt, f_val) { // toggle_antirecoil[profile_idx]    = toggle( modName_idx, ANTIRECOIL_M , ANTIRECOIL_TXT     , toggle_antirecoil[profile_idx]    );
	
	if(f_idx == f_name)
	{
		if(event_press(PS4_UP))
		{
			f_val = cycle(f_val + 1, 0, entry_count(f_txt));	
			Set_Rumble(f_val);
		}

		if(event_press(PS4_DOWN))
		{
			f_val = cycle(f_val - 1, 0, entry_count(f_txt));
			Set_Rumble(f_val);
		}
		
		if(modName_idx == ANTIRECOIL_M) 
			speed_toggle_UP[profile_idx] = f_val;
		else if(modName_idx == RAPIDFIRE_M) 
		{
			
			speed_toggle_RIGHT[profile_idx] = f_val;
		}		
		else if(modName_idx == AIMASSIST_M) 
		{
			
			speed_toggle_DOWN[profile_idx] = f_val;
		}
				else if(modName_idx == quick_M) 
		{
			
			speed_toggle_quick[profile_idx] = f_val;
		}		
		else if(modName_idx == sensshot2_M)
			speed_toggle_LEFT[profile_idx] = f_val;
		
	}
	return f_val;
}


int speed_toggle_UP[3], speed_toggle_RIGHT[3], speed_toggle_DOWN[3], speed_toggle_LEFT[3], speed_toggle_quick[3];


function speed_toggle(f_hold, f_press, f_val, f_idx, f_txt, f_st) { // toggle_antirecoil[profile_idx] = speed_toggle(PS4_L2, PS4_UP, toggle_antirecoil[profile_idx], ANTIRECOIL_M, ANTIRECOIL_TXT, speed_toggle_UP[profile_idx]);
	
	if(get_val(f_hold))
	{
		if(get_val(f_press) && get_ptime(f_press) == 500) 
		{
			modName_idx = f_idx;
			
			if(f_val)
				f_val = 0;
			else
			{
				f_val = set_toggle_val(f_st, f_val, f_txt, f_press, 0); 
			}
			Set_Rumble(f_val);
		} 
		
		if(event_press(f_press) && get_brtime(f_press) <= 200) 
		{		
			modName_idx = f_idx;
			if(f_val)
			{
				f_val = cycle(f_val++, 1, entry_count(f_txt));
				set_speed_toggle_val(f_press, f_val);
			}
			else
			{
				f_val = set_toggle_val(f_st, f_val, f_txt, f_press, 1); 
			}
			Set_Rumble(f_val);
		}
		set_val(f_press, 0)
	}
	return f_val;
}

function set_toggle_val(f_st, f_val, f_txt, f_press, f_min) { 

	if(!f_st)
	{
		f_val = cycle(f_val++, f_min, entry_count(f_txt));
		set_speed_toggle_val(f_press, f_val);
	}
	else
	{
		f_val = f_st;
	}
	
	return f_val;
}

function set_speed_toggle_val(f_press, f_val) {
	if(f_press == PS4_UP)
		speed_toggle_UP[profile_idx] = f_val;
	if(f_press == PS4_RIGHT)
		speed_toggle_RIGHT[profile_idx] =  f_val;
	if(f_press == PS4_DOWN)
		speed_toggle_DOWN[profile_idx] =  f_val;
	if(f_press == PS4_LEFT)
		speed_toggle_LEFT[profile_idx] =  f_val;
	if(f_press == PS4_PS)
		speed_toggle_quick[profile_idx] =  f_val;
}

function Set_Rumble(f_val){
	if(f_val == 0) combo_run(RUMBLE_OFF);
	else combo_run(RUMBLE_ON);
	display_new = TRUE; 
}

function check_toggle() {
	if(modName_idx == ANTIRECOIL_M  && toggle_antirecoil[profile_idx])      return TRUE;
	if(modName_idx == RAPIDFIRE_M   && toggle_rapidfire[profile_idx] > 1)   return TRUE;
	if(modName_idx == sensshot_M   && toggle_sensshot[profile_idx])       return TRUE;
	if(modName_idx == sensshot2_M   && toggle_sensshot2[profile_idx])       return TRUE;
	if(modName_idx == AIMASSIST_M   && toggle_aimassist[profile_idx])       return TRUE;
	if(modName_idx == camangle_M    && toggle_camangle[profile_idx])        return TRUE;
	if(modName_idx == polar_M    && toggle_polar[profile_idx])        return TRUE;
	if(modName_idx == jump_M     	&& toggle_jump)   						return TRUE;
	if(modName_idx == dpad_M  && toggle_dpad)                  return TRUE;
	if(modName_idx == easyrun_M    && toggle_easyrun[profile_idx])        return TRUE;
	if(modName_idx == AUTORUN_M    && toggle_autorun[profile_idx])        return TRUE;
	if(modName_idx == SLIDECANCEL_M  && toggle_slideCancel)                  return TRUE;
	if(modName_idx == AIMABUSE_M    && toggle_aimabuse[profile_idx])        return TRUE;
	if(modName_idx == switchstick_M    && toggle_switchstick[profile_idx])        return TRUE;
	if(modName_idx == quick_M    && toggle_quick[profile_idx])        return TRUE;
	if(modName_idx == gyro_M    && toggle_gyro[profile_idx])        return TRUE;
	if(modName_idx == cr_M    && toggle_reload[profile_idx])        return TRUE;
	if(modName_idx == hair_M    && toggle_hairTrigger)        return TRUE;
	return FALSE;
}

/////////////////////////////////////////////////////////////////////////////////////////// A R R A Y S   F U N C T I O N S 

define MODNAME_TXT = 0      , VALNAME_TXT = 1         , INFO_TOGGLE_PS_TXT = 2  , INFO_EDIT_PS_TXT = 3  , INFO_TOGGLE_XB_TXT = 4  , INFO_EDIT_XB_TXT = 5     , PROFILE_TXT = 6      ,
       MENUNAME_TXT = 7     , CONTROLLERNAME_TXT = 8  , ONOFF_TXT = 9           , PROFILESNAME_TXT = 10 , PROFILEBTN_PS_TXT = 11  , PROFILEBTN_XB_TXT = 12   , INFO_MAIN_PS_TXT = 13, 
       INFO_MAIN_XB_TXT = 14, INFO_CONTROL_PS_TXT = 15, INFO_CONTROL_XB_TXT = 16, LAYOUT_BTN_PS_TXT = 17, LAYOUT_BTN_XB_TXT = 18  , ANTIRECOIL_TXT = 19      , RAPIDFIRE_TXT = 20   , 
       SHAPES_TXT = 21      , jump_TXT = 22       , SHOT_ACTIVATOR_TXT = 23 , SENSITIVITY_TXT = 24  , INFO_PROFILE_PS_TXT = 25, INFO_PROFILE_XB_TXT = 26 , dpad_TXT = 27,
       lootrun_TXT = 28,		 SLIDECANCEL_TXT = 29,		easyrun_TXT = 30    ,		switchstick_TXT = 31,	quick_TXT = 32, 	gyro_TXT = 33, cr_TXT = 34, lmod_TXT = 35, rmod_TXT = 36, hair_TXT = 37,polar_TXT = 38;
       
function entry_count(f_array_idx) { // by Swizzy

    i = 0;
    if (f_array_idx == MODNAME_TXT) {              while (MODNAME[i] != -1) { i++; } }
    else if (f_array_idx == VALNAME_TXT) {         while (VALNAME[i] != -1) { i++; } }
    else if (f_array_idx == INFO_TOGGLE_PS_TXT) {  while (INFO_TOGGLE_PS[i] != -1) { i++; } }
    else if (f_array_idx == INFO_EDIT_PS_TXT) {    while (INFO_EDIT_PS[i] != -1) { i++; } }
    else if (f_array_idx == INFO_TOGGLE_XB_TXT) {  while (INFO_TOGGLE_XB[i] != -1) { i++; } }
    else if (f_array_idx == INFO_EDIT_XB_TXT) {    while (INFO_EDIT_XB[i] != -1) { i++; } }
    else if (f_array_idx == PROFILE_TXT) {         while (PROFILE[i] != -1) { i++; } }
    else if (f_array_idx == MENUNAME_TXT) {        while (MENUNAME[i] != -1) { i++; } }
    else if (f_array_idx == CONTROLLERNAME_TXT) {  while (CONTROLLERNAME[i] != -1) { i++; } }
    else if (f_array_idx == ONOFF_TXT) {           while (ONOFF[i] != -1) { i++; } }
    else if (f_array_idx == PROFILESNAME_TXT) {    while (PROFILESNAME[i] != -1) { i++; } }
    else if (f_array_idx == PROFILEBTN_PS_TXT) {   while (PROFILEBTN_PS[i] != -1) { i++; } }
    else if (f_array_idx == PROFILEBTN_XB_TXT) {   while (PROFILEBTN_XB[i] != -1) { i++; } }
    else if (f_array_idx == INFO_MAIN_PS_TXT) {    while (INFO_MAIN_PS[i] != -1) { i++; } }
    else if (f_array_idx == INFO_MAIN_XB_TXT) {    while (INFO_MAIN_XB[i] != -1) { i++; } }
    else if (f_array_idx == INFO_CONTROL_PS_TXT) { while (INFO_CONTROL_PS[i] != -1) { i++; } }
    else if (f_array_idx == LAYOUT_BTN_PS_TXT) {   while (LAYOUT_BTN_PS[i] != -1) { i++; } }
    else if (f_array_idx == LAYOUT_BTN_XB_TXT) {   while (LAYOUT_BTN_XB[i] != -1) { i++; } }
    else if (f_array_idx == ANTIRECOIL_TXT) {      while (ANTIRECOIL[i] != -1) { i++; } }
    else if (f_array_idx == RAPIDFIRE_TXT) {       while (RAPIDFIRE[i] != -1) { i++; } }
    else if (f_array_idx == SHAPES_TXT) {          while (SHAPES[i] != -1) { i++; } }
    else if (f_array_idx == jump_TXT) {        while (jump[i] != -1) { i++; } }
    else if (f_array_idx == SHOT_ACTIVATOR_TXT) {  while (SHOT_ACTIVATOR[i] != -1) { i++; } }
    else if (f_array_idx == SENSITIVITY_TXT) {     while (SENSITIVITY[i] != -1) { i++; } }
    else if (f_array_idx == INFO_PROFILE_PS_TXT) { while (INFO_PROFILE_PS[i] != -1) { i++; } }
    else if (f_array_idx == INFO_PROFILE_XB_TXT) { while (INFO_PROFILE_XB[i] != -1) { i++; } }
    else if (f_array_idx == dpad_TXT) {     while (dpad[i] != -1) { i++; } }
    else if (f_array_idx == lootrun_TXT) {     while (lootrun[i] != -1) { i++; } }
    else if (f_array_idx == SLIDECANCEL_TXT) {     while (SLIDECANCEL[i] != -1) { i++; } }
    else if (f_array_idx == easyrun_TXT) {     while (easyrun[i] != -1) { i++; } }
    else if (f_array_idx == switchstick_TXT) {     while (switchstick[i] != -1) { i++; } }
    else if (f_array_idx == quick_TXT) {     while (quick[i] != -1) { i++; } }
       else if (f_array_idx == gyro_TXT) {     while (gyro[i] != -1) { i++; } }
     else if (f_array_idx == cr_TXT) {     while (reload[i] != -1) { i++; } }
     else if (f_array_idx == lmod_TXT) {     while (lmod[i] != -1) { i++; } }
     else if (f_array_idx == rmod_TXT) {     while (rmod[i] != -1) { i++; } }
      else if (f_array_idx == hair_TXT) {     while (hair[i] != -1) { i++; } }
       else if (f_array_idx == polar_TXT) {     while (polar[i] != -1) { i++; } }
    return i - 1;
}

function get_string(f_array_idx, f_idx) { 

	if(f_array_idx == MODNAME_TXT)            return MODNAME[f_idx];
	if(f_array_idx == VALNAME_TXT)            return VALNAME[f_idx];
	if(f_array_idx == INFO_TOGGLE_PS_TXT)     return INFO_TOGGLE_PS[f_idx];
	if(f_array_idx == INFO_EDIT_PS_TXT)       return INFO_EDIT_PS[f_idx];
	if(f_array_idx == INFO_TOGGLE_XB_TXT)     return INFO_TOGGLE_XB[f_idx];
	if(f_array_idx == INFO_EDIT_XB_TXT)       return INFO_EDIT_XB[f_idx];
	if(f_array_idx == PROFILE_TXT)            return PROFILE[f_idx];
	if(f_array_idx == MENUNAME_TXT)           return MENUNAME[f_idx];
	if(f_array_idx == CONTROLLERNAME_TXT)     return CONTROLLERNAME[f_idx];
	if(f_array_idx == ONOFF_TXT)              return ONOFF[f_idx];
	if(f_array_idx == PROFILESNAME_TXT)       return PROFILESNAME[f_idx];
	if(f_array_idx == PROFILEBTN_PS_TXT)      return PROFILEBTN_PS[f_idx];
	if(f_array_idx == PROFILEBTN_XB_TXT)      return PROFILEBTN_XB[f_idx];
	if(f_array_idx == INFO_MAIN_PS_TXT)       return INFO_MAIN_PS[f_idx];
	if(f_array_idx == INFO_MAIN_XB_TXT)       return INFO_MAIN_XB[f_idx];
	if(f_array_idx == INFO_CONTROL_PS_TXT)    return INFO_CONTROL_PS[f_idx];
	if(f_array_idx == INFO_CONTROL_XB_TXT)    return INFO_CONTROL_XB[f_idx];
	if(f_array_idx == LAYOUT_BTN_PS_TXT)      return LAYOUT_BTN_PS[f_idx];
	if(f_array_idx == LAYOUT_BTN_XB_TXT)      return LAYOUT_BTN_XB[f_idx];
	if(f_array_idx == ANTIRECOIL_TXT)         return ANTIRECOIL[f_idx];
	if(f_array_idx == RAPIDFIRE_TXT)          return RAPIDFIRE[f_idx];
	if(f_array_idx == SHAPES_TXT)             return SHAPES[f_idx];
	if(f_array_idx == jump_TXT)           return jump[f_idx];
	if(f_array_idx == SHOT_ACTIVATOR_TXT)     return SHOT_ACTIVATOR[f_idx];
	if(f_array_idx == SENSITIVITY_TXT)        return SENSITIVITY[f_idx];
	if(f_array_idx == INFO_PROFILE_PS_TXT)    return INFO_PROFILE_PS[f_idx];
	if(f_array_idx == INFO_PROFILE_XB_TXT)    return INFO_PROFILE_XB[f_idx];
	if(f_array_idx == dpad_TXT)        return dpad[f_idx];
	if(f_array_idx == lootrun_TXT)        return lootrun[f_idx];
	if(f_array_idx == SLIDECANCEL_TXT)        return SLIDECANCEL[f_idx];
	if(f_array_idx == easyrun_TXT)        return easyrun[f_idx];
	if(f_array_idx == switchstick_TXT)        return switchstick[f_idx];
	if(f_array_idx == quick_TXT)        return quick[f_idx];
	if(f_array_idx == gyro_TXT)        return gyro[f_idx];
	if(f_array_idx == cr_TXT)        return reload[f_idx];
	if(f_array_idx == lmod_TXT)        return lmod[f_idx];
	if(f_array_idx == rmod_TXT)        return rmod[f_idx];
	if(f_array_idx == hair_TXT)        return hair[f_idx];
	if(f_array_idx == polar_TXT)        return polar[f_idx];
	return -1;
}

int stringLength;

function get_string_length(offset) { // by Swizzy

    stringLength = 0;
    while (duint8(offset++)) { stringLength++; }
    return stringLength + 1;
}

/////////////////////////////////////////////////////////////////////////////////////////// D R A W   M E N U S / A R R O W S   F U N C T I O N S 

function draw_base_menu() {
	rect_oled(0, 0, 128, 49, OLED_BLACK, OLED_WHITE); // white contour 
	line_oled(1, 16, 126, 16, 1, OLED_WHITE); // draw line 1
	
// Filled rectangle white (emplacement for the chars line 1)
	if(!ControllerMenu)
	{
		rect_oled(2, 2, OLED_FONT_SMALL_WIDTH + 4, OLED_FONT_SMALL_HEIGHT + 3, OLED_WHITE , OLED_WHITE); // rectangle left (line 1)
		rect_oled(115, 2, OLED_FONT_SMALL_WIDTH + 4, OLED_FONT_SMALL_HEIGHT + 3, OLED_WHITE, OLED_WHITE); // rectangle right (line 1)
	}
}

function draw_modMenu() {
// Clears text emplacement line 2 and 3 (value zone while in ModEdit)
	rect_oled(1, 17, 126, 31, OLED_WHITE, OLED_BLACK);
	
// Separate ex value zone
	line_oled(1, 32, 126, 32, 1, OLED_WHITE); // line 2 
	
// Filled rectangle white (emplacement for the chars line 2, 3)
	rect_oled(2, 18, OLED_FONT_SMALL_WIDTH + 4, OLED_FONT_SMALL_HEIGHT + 3, OLED_WHITE , OLED_WHITE); // rectangle left (line 2)
	rect_oled(115, 18, OLED_FONT_SMALL_WIDTH + 4, OLED_FONT_SMALL_HEIGHT + 3, OLED_WHITE, OLED_WHITE); // rectangle right (line 2)
	rect_oled(2, 34, OLED_FONT_SMALL_WIDTH + 4, OLED_FONT_SMALL_HEIGHT + 3, OLED_WHITE , OLED_WHITE); // rectangle left (line 3)
	rect_oled(115, 34, OLED_FONT_SMALL_WIDTH + 4, OLED_FONT_SMALL_HEIGHT + 3, OLED_WHITE, OLED_WHITE); // rectangle right (line 3)
}

function draw_modEdit() {
// Clears line 2 and 3
	rect_oled(1, 17, 126, 31, OLED_WHITE, OLED_BLACK);
	
// Filled rectangle white 
	// Emplacement for the chars line 2, 3)	
	rect_oled(2, 18, OLED_FONT_SMALL_WIDTH + 4, OLED_FONT_SMALL_HEIGHT + 4, OLED_WHITE , OLED_WHITE); // rectangle left (line 2)
	rect_oled(115, 18, OLED_FONT_SMALL_WIDTH + 4, OLED_FONT_SMALL_HEIGHT + 4, OLED_WHITE, OLED_WHITE); // rectangle right (line 2)
	rect_oled(2, 33, OLED_FONT_SMALL_WIDTH + 4, OLED_FONT_SMALL_HEIGHT + 4, OLED_WHITE , OLED_WHITE); // rectangle left (line 3)
	rect_oled(115, 33, OLED_FONT_SMALL_WIDTH + 4, OLED_FONT_SMALL_HEIGHT + 4, OLED_WHITE, OLED_WHITE); // rectangle right (line 3)
	// Emplacement for + / -
	rect_oled(14, 18, OLED_FONT_MEDIUM_WIDTH + 1, OLED_FONT_MEDIUM_HEIGHT + 11, OLED_WHITE , OLED_WHITE); // rectangle left (line 2 + 3)
	rect_oled(102, 18, OLED_FONT_MEDIUM_WIDTH + 1, OLED_FONT_MEDIUM_HEIGHT + 11, OLED_WHITE, OLED_WHITE); // rectangle right (line 2 + 3)

// Display - / +
	line_oled(16, 31, 23, 31, 2, OLED_BLACK); // left -
	putc_oled(1, 43); // +
	puts_oled(103, 24, OLED_FONT_MEDIUM, 1, OLED_BLACK); // right + 	    

}

function draw_profilesMenu() {
// Clears line 2 and 3
	rect_oled(1, 17, 126, 31, OLED_WHITE, OLED_BLACK);
	
// Filled rectangle white
	// Emplacement for the chars line 2, 3)
	rect_oled(2, 18, OLED_FONT_MEDIUM_WIDTH , OLED_FONT_MEDIUM_HEIGHT + 11, OLED_WHITE , OLED_WHITE); // rectangle left (line 2 + 3)
	rect_oled(115, 18, OLED_FONT_MEDIUM_WIDTH , OLED_FONT_MEDIUM_HEIGHT + 11, OLED_WHITE, OLED_WHITE); // rectangle right (line 2 + 3)
}	

function draw_main_menu() {
	rect_oled(0, 0, 128, 49, OLED_BLACK, OLED_WHITE); // white contour
	rect_oled(1, 1, 126, 47, OLED_WHITE, OLED_BLACK); // Filled rectangle white (emplacement for lines 1, 2, 3)
	btn_left = RIGHT;
	btn_right = LEFT;
	// Display arrows	
	putc_oled(1,btn_left); 
	puts_oled(LEFT_X + 2, LINE_2_Y, OLED_FONT_SMALL, 1, OLED_WHITE); 	
	putc_oled(1,btn_right); 
	puts_oled(RIGHT_X - 2, LINE_2_Y, OLED_FONT_SMALL, 1, OLED_WHITE);
	
}

define UP = 131, DOWN = 132, LEFT = 133, RIGHT = 134, TRIANGLE = 130, Y = 89, CROSS = 127, A = 65;
define LEFT_X = 4, RIGHT_X = 117;
define LINE_1_Y = 4, LINE_2_Y = 20, LINE_3_Y = 36, LINE_4_Y = 53, LINE_2_3_Y = 28;  
int btn_left;
int btn_right;

function draw_chars_line1() {
// Define button
	if(ModEdit)
	{
		btn_left = LEFT;
		btn_right = RIGHT;
	}
	else
	{		
		if(get_controller() == PIO_PS4)
		{
			btn_left = TRIANGLE;
			btn_right = TRIANGLE;
		}
		else
		{
			btn_left = Y;
			btn_right = Y;
		}
	}
	
	if(!ControllerMenu)
	{
	// Clears/fill rectangle
		rect_oled(3, 3, OLED_FONT_SMALL_WIDTH + 2, OLED_FONT_SMALL_HEIGHT + 1, OLED_WHITE , col_rec_left); // rectangle left (line 1)
		rect_oled(116, 3, OLED_FONT_SMALL_WIDTH + 2, OLED_FONT_SMALL_HEIGHT + 1, OLED_WHITE, col_rec_right); // rectangle right (line 1)
	// Display chars	
		putc_oled(1,btn_left); 
		puts_oled(LEFT_X, LINE_1_Y, OLED_FONT_SMALL, 1, col_char_left); 	
		putc_oled(1,btn_right); 
		puts_oled(RIGHT_X, LINE_1_Y, OLED_FONT_SMALL, 1, col_char_right); 
	}
}

function draw_chars_line2() {
// Define button
	btn_left = LEFT;
	btn_right = RIGHT;

// Clears/fill rectangle
	rect_oled(3, 19, OLED_FONT_SMALL_WIDTH + 2, OLED_FONT_SMALL_HEIGHT + 1, OLED_WHITE , col_rec_left); //  rectangle left (line 2)
	rect_oled(116, 19, OLED_FONT_SMALL_WIDTH + 2, OLED_FONT_SMALL_HEIGHT + 1, OLED_WHITE, col_rec_right); //  rectangle right (line 2)

// Display chars	
	putc_oled(1,btn_left); 
	puts_oled(LEFT_X, LINE_2_Y, OLED_FONT_SMALL, 1, col_char_left); 	
	putc_oled(1,btn_right); 
	puts_oled(RIGHT_X, LINE_2_Y, OLED_FONT_SMALL, 1, col_char_right); 
	
}

function draw_chars_line3() { 
// Define button
	btn_left = DOWN;
	btn_right = UP;
		
// Clears/fill rectangle
	rect_oled(3, 34, OLED_FONT_SMALL_WIDTH + 2, OLED_FONT_SMALL_HEIGHT + 2, OLED_WHITE , col_rec_left); // rectangle left (line 3)
	rect_oled(116, 34, OLED_FONT_SMALL_WIDTH + 2, OLED_FONT_SMALL_HEIGHT + 2, OLED_WHITE, col_rec_right); // rectangle right (line 3)	

// Display chars	
	putc_oled(1,btn_left); 
	puts_oled(LEFT_X, LINE_3_Y, OLED_FONT_SMALL, 1, col_char_left); 
	putc_oled(1,btn_right); 
	puts_oled(RIGHT_X, LINE_3_Y, OLED_FONT_SMALL, 1, col_char_right);  
}

function draw_hold_to_edit() { 
// Display chars	
	if(get_controller() == PIO_PS4)
	{
	// Clears/fill the inside of the "hold button" rectangle
		rect_oled(28, 19, OLED_FONT_SMALL_WIDTH + 1 , OLED_FONT_SMALL_HEIGHT , OLED_WHITE , col_rec_left); 
		rect_oled(91, 19, OLED_FONT_SMALL_WIDTH + 2, OLED_FONT_SMALL_HEIGHT  , OLED_WHITE, col_rec_right);
		
		putc_oled(1, CROSS);
		puts_oled(92, LINE_2_Y - 1, OLED_FONT_SMALL, 1, col_char_left);
		putc_oled(1, CROSS);
		puts_oled(28, LINE_2_Y - 1, OLED_FONT_SMALL, 1, col_char_right);
		
	// Contour for chars X / A (must be after display chars)
		rect_oled(27, 18, OLED_FONT_SMALL_WIDTH + 3 , OLED_FONT_SMALL_HEIGHT + 2 , OLED_BLACK , OLED_WHITE); // small rectangle left (line 2)
		rect_oled(91, 18, OLED_FONT_SMALL_WIDTH + 3, OLED_FONT_SMALL_HEIGHT + 2 , OLED_BLACK, OLED_WHITE); // small rectangle right (line 2)
	}
	else
	{
	// Clears/fill the inside of the "hold button" rectangle
		rect_oled(28, 19, OLED_FONT_SMALL_WIDTH + 2 , OLED_FONT_SMALL_HEIGHT , OLED_WHITE , col_rec_left); 
		rect_oled(91, 19, OLED_FONT_SMALL_WIDTH + 2, OLED_FONT_SMALL_HEIGHT  , OLED_WHITE, col_rec_right);
		
		putc_oled(1, A);
		puts_oled(92, LINE_2_Y , OLED_FONT_SMALL, 1, col_char_left);
		putc_oled(1, A);
		puts_oled(29, LINE_2_Y , OLED_FONT_SMALL, 1, col_char_right);
		
	// Contour for chars X / A (must be after display chars)
		rect_oled(27, 18, OLED_FONT_SMALL_WIDTH + 4 , OLED_FONT_SMALL_HEIGHT + 2 , OLED_BLACK , OLED_WHITE); // small rectangle left (line 2)
		rect_oled(90, 18, OLED_FONT_SMALL_WIDTH + 4, OLED_FONT_SMALL_HEIGHT + 2 , OLED_BLACK, OLED_WHITE); // small rectangle right (line 2)
	}
}

function draw_char_profiles() {
// Define button
	btn_left = LEFT;
	btn_right = RIGHT;

// Clears/fill rectangle
	rect_oled(3, 19, OLED_FONT_SMALL_WIDTH + 2, OLED_FONT_SMALL_HEIGHT + 17, OLED_WHITE , col_rec_left); //  rectangle left (line 2)
	rect_oled(116, 19, OLED_FONT_SMALL_WIDTH + 2, OLED_FONT_SMALL_HEIGHT + 17, OLED_WHITE, col_rec_right); //  rectangle right (line 2)
		
// Display chars

	putc_oled(1,btn_left); 
	puts_oled(LEFT_X, 28, OLED_FONT_SMALL, 1, col_char_left); 
	putc_oled(1,btn_right); 
	puts_oled(RIGHT_X, 28, OLED_FONT_SMALL, 1, col_char_right); 
}

int col_char_left; 
int col_char_right;
int col_rec_left = 1;
int col_rec_right = 1;

function button_animation() {
//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
	if(event_press(PS4_TRIANGLE))
	{
		col_char_left = 1;
		col_char_right = 1;
		col_rec_left = 0;
		col_rec_right = 0;
		
		if(!ModEdit && !MainMenu)
			draw_chars_line1();
	}
	else if(event_release(PS4_TRIANGLE))//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
	{
		col_char_left = 0;
		col_char_right = 0;
		col_rec_left = 1;
		col_rec_right = 1;
		
		if(ModMenu)
		{
			profile_idx = cycle(profile_idx + 1, 0, entry_count(PROFILE_TXT));
			display_new = TRUE; 
		}
		else if(ProfilesMenu)
		{
			profilesName_idx = cycle(profilesName_idx + 1, 0, entry_count(PROFILESNAME_TXT));
			
			if(profilesName_idx == PRIM_SEC_P)
			{
				draw_base_menu();
				draw_profilesMenu();	
				draw_chars_line1();	
				draw_char_profiles();
			}
			else
			{
				draw_base_menu();		
				draw_modMenu();		
				draw_chars_line1();		
				draw_chars_line2(); 
				draw_chars_line3();	
			}
						if(profilesName_idx == br1_C)
			{
				draw_chars_line2(); 
				draw_chars_line3();	
			}
									if(profilesName_idx == br2_C)
			{
				draw_chars_line2(); 
				draw_chars_line3();	
			}
			display_new = TRUE; 
		}
		if(!ModEdit && !MainMenu)
			draw_chars_line1();
	}	
//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
	if(event_press(PS4_LEFT))
	{
		col_char_left = 1;
		col_char_right = 0;
		col_rec_left = 0;
		col_rec_right = 1;
			
		if(ModEdit)
		{
			if(get_val(PS4_CROSS))
			{
				draw_chars_line2();
			}
			else
			{
				valName_idx -= 1;
			// Limits for Standard Anti-Recoil 
				if(modName_idx == ANTIRECOIL_M && toggle_antirecoil[profile_idx] == STANDARD)
				{	
					if(valName_idx == TIME_V)
						valName_idx = END_V;
					if(valName_idx < END_V)
						valName_idx = HORIZ_V;
				}
				draw_chars_line1();
				display_new = TRUE; 
			}
		}
		else if(ModMenu)
		{
			modName_idx = cycle(modName_idx - 1, 0, entry_count(MODNAME_TXT));  // create a loop in the values
			draw_chars_line2();
			display_new = TRUE; 
		}
		else if(ControllerMenu)
		{
			controllerName_idx = cycle(controllerName_idx - 1, 0, entry_count(CONTROLLERNAME_TXT)); // create a loop in the values
			draw_chars_line2();
			display_new = TRUE;
		}
		else if(ProfilesMenu)
		{
			if(profilesName_idx == PRIM_SEC_P)
			{
				toggle_pressBTN[profilesName_idx] = cycle(toggle_pressBTN[profilesName_idx] - 1, 0, entry_count(PROFILEBTN_PS_TXT));
				draw_char_profiles();
			}
			else
			{
				toggle_holdBTN[profilesName_idx] = cycle(toggle_holdBTN[profilesName_idx] - 1, 0, entry_count(PROFILEBTN_PS_TXT));  // create a loop in the values
				draw_chars_line2();
			}	
			display_new = TRUE; 
									if(profilesName_idx == br1_C)
			{
				toggle_br1activat[profilesName_idx] = cycle(toggle_br1activat[profilesName_idx] - 1, 0, entry_count(PROFILEBTN_PS_TXT)); // create a loop in the values
				draw_chars_line3();
				display_new = TRUE; 
			}
						if(profilesName_idx == br2_C)
			{
				toggle_br1activat2[profilesName_idx] = cycle(toggle_br1activat2[profilesName_idx] - 1, 0, entry_count(PROFILEBTN_PS_TXT)); // create a loop in the values
				draw_chars_line3();
				display_new = TRUE; 
			}
												if(profilesName_idx == remap1_C)
			{
				toggle_to1[profilesName_idx] = cycle(toggle_to1[profilesName_idx] - 1, 0, entry_count(PROFILEBTN_PS_TXT)); // create a loop in the values
				draw_chars_line3();
				display_new = TRUE; 
			}
						if(profilesName_idx == remap2_C)
			{
				toggle_to2[profilesName_idx] = cycle(toggle_to2[profilesName_idx] - 1, 0, entry_count(PROFILEBTN_PS_TXT)); // create a loop in the values
				draw_chars_line3();
				display_new = TRUE;}
														if(profilesName_idx == remap3_C)
			{
				toggle_to3[profilesName_idx] = cycle(toggle_to3[profilesName_idx] - 1, 0, entry_count(PROFILEBTN_PS_TXT)); // create a loop in the values
				draw_chars_line3();
				display_new = TRUE; 
			}
						if(profilesName_idx == remap4_C)
			{
				toggle_to4[profilesName_idx] = cycle(toggle_to4[profilesName_idx] - 1, 0, entry_count(PROFILEBTN_PS_TXT)); // create a loop in the values
				draw_chars_line3();
				display_new = TRUE;}
										if(profilesName_idx == presstime_C)
			{
				toggle_press[profilesName_idx] = cycle(toggle_press[profilesName_idx] - 1, 0, entry_count(PROFILEBTN_PS_TXT)); // create a loop in the values
				draw_chars_line3();
				display_new = TRUE;}
		}		
	}
	if(event_release(PS4_LEFT))//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
	{
		col_char_left = 0;
		col_char_right = 0;
		col_rec_left = 1;
		col_rec_right = 1;
			
		if(ModEdit)
		{
			if(get_val(PS4_CROSS))
				draw_chars_line2();
			else
				draw_chars_line1();
		}
		else if(ProfilesMenu)
		{
			if(profilesName_idx == PRIM_SEC_P)
				draw_char_profiles();
			else
				draw_chars_line2();
				
			if(profilesName_idx ==br2_C)
			draw_chars_line2();	
			else
			draw_char_profiles();	
			if(profilesName_idx ==br1_C)
			draw_chars_line2();	
			else
			draw_char_profiles();	
						if(profilesName_idx ==remap1_C)
			draw_chars_line2();	
			else
			draw_char_profiles();	
			if(profilesName_idx ==remap2_C)
			draw_chars_line2();	
			else
			draw_char_profiles();
									if(profilesName_idx ==remap3_C)
			draw_chars_line2();	
			else
			draw_char_profiles();	
			if(profilesName_idx ==remap4_C)
			draw_chars_line2();	
			else
			draw_char_profiles();
			
							if(profilesName_idx ==presstime_C)
			draw_chars_line2();	
			else
			draw_char_profiles();
		}	
		else if(!MainMenu)
			draw_chars_line2();
	}
//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
	if(event_press(PS4_RIGHT))
	{
		col_char_left = 0;
		col_char_right = 1;
		col_rec_left = 1;
		col_rec_right = 0;	
			
		if(ModEdit)
		{
			if(get_val(PS4_CROSS))
				draw_chars_line2();
			else
			{
				valName_idx += 1;				
			// Limits for Standard Anti-Recoil	
				if(modName_idx == ANTIRECOIL_M && toggle_antirecoil[profile_idx] == STANDARD)
				{								
					if(valName_idx == TIME_V)
						valName_idx = HORIZ_V;
					if(valName_idx > HORIZ_V)
						valName_idx = END_V;
				}
				draw_chars_line1();
				display_new = TRUE; 
			}
		}
		else if(ModMenu)
		{
			modName_idx = cycle(modName_idx + 1, 0, entry_count(MODNAME_TXT));  // create a loop in the values
			draw_chars_line2();
			display_new = TRUE; 
		}
		else if(ControllerMenu)
		{
			controllerName_idx = cycle(controllerName_idx + 1, 0, entry_count(CONTROLLERNAME_TXT)); // create a loop in the values
			draw_chars_line2();
			display_new = TRUE;
		}
		else if(ProfilesMenu)
		{
			if(profilesName_idx == PRIM_SEC_P)
			{
				toggle_pressBTN[profilesName_idx] = cycle(toggle_pressBTN[profilesName_idx] + 1, 0, entry_count(PROFILEBTN_PS_TXT));
				draw_char_profiles();
			}
			else
			{
				toggle_holdBTN[profilesName_idx] = cycle(toggle_holdBTN[profilesName_idx] + 1, 0, entry_count(PROFILEBTN_PS_TXT));  // create a loop in the values
				draw_chars_line2();
			}	
			display_new = TRUE;
						if(profilesName_idx == br1_C)
			{
				toggle_br1activat[profilesName_idx] = cycle(toggle_br1activat[profilesName_idx] + 1, 0, entry_count(PROFILEBTN_PS_TXT)); // create a loop in the values
				draw_chars_line3();
				display_new = TRUE; 
			}
						if(profilesName_idx == br2_C)
			{
				toggle_br1activat2[profilesName_idx] = cycle(toggle_br1activat2[profilesName_idx] + 1, 0, entry_count(PROFILEBTN_PS_TXT)); // create a loop in the values
				draw_chars_line3();
				display_new = TRUE; 
			}
												if(profilesName_idx == remap1_C)
			{
				toggle_to1[profilesName_idx] = cycle(toggle_to1[profilesName_idx] + 1, 0, entry_count(PROFILEBTN_PS_TXT)); // create a loop in the values
				draw_chars_line3();
				display_new = TRUE; 
			}
						if(profilesName_idx == remap2_C)
			{
				toggle_to2[profilesName_idx] = cycle(toggle_to2[profilesName_idx] + 1, 0, entry_count(PROFILEBTN_PS_TXT)); // create a loop in the values
				draw_chars_line3();
				display_new = TRUE;}
																		if(profilesName_idx == remap3_C)
			{
				toggle_to3[profilesName_idx] = cycle(toggle_to3[profilesName_idx] + 1, 0, entry_count(PROFILEBTN_PS_TXT)); // create a loop in the values
				draw_chars_line3();
				display_new = TRUE; 
			}
						if(profilesName_idx == remap4_C)
			{
				toggle_to4[profilesName_idx] = cycle(toggle_to4[profilesName_idx] + 1, 0, entry_count(PROFILEBTN_PS_TXT)); // create a loop in the values
				draw_chars_line3();
				display_new = TRUE;}
										if(profilesName_idx == presstime_C)
			{
				toggle_press[profilesName_idx] = cycle(toggle_press[profilesName_idx] + 1, 0, entry_count(PROFILEBTN_PS_TXT)); // create a loop in the values
				draw_chars_line3();
				display_new = TRUE;}
	
		}	
	}
	if(event_release(PS4_RIGHT))//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
	{
		col_char_left = 0;
		col_char_right = 0;
		col_rec_left = 1;
		col_rec_right = 1;
			
		if(ModEdit)
		{
			if(get_val(PS4_CROSS))
				draw_chars_line2();
			else
				draw_chars_line1();
		}
		else if(ProfilesMenu)
		{
			if(profilesName_idx == PRIM_SEC_P)
				draw_char_profiles();
			else
				draw_chars_line2();
			if(profilesName_idx ==br2_C)
			draw_chars_line2();	
			else
			draw_char_profiles();	
			
			if(profilesName_idx ==br1_C)
			draw_chars_line2();	
			else
			draw_char_profiles();	
						if(profilesName_idx ==remap1_C)
			draw_chars_line2();	
			else
			draw_char_profiles();	
			if(profilesName_idx ==remap2_C)
			draw_chars_line2();	
			else
			draw_char_profiles();
									if(profilesName_idx ==remap3_C)
			draw_chars_line2();	
			else
			draw_char_profiles();	
			if(profilesName_idx ==remap4_C)
			draw_chars_line2();	
			else
			draw_char_profiles();
						if(profilesName_idx ==presstime_C)
			draw_chars_line2();	
			else
			draw_char_profiles();
		}	
		else if(!MainMenu)
			draw_chars_line2();
	}
//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
	if(event_press(PS4_UP))
	{
		col_char_left = 0;
		col_char_right = 1;
		col_rec_left = 1;
		col_rec_right = 0;
		
		if(MainMenu)
		{
			menuName_idx = cycle(menuName_idx - 1, 0, entry_count(MENUNAME_TXT)); // create a loop in the values
			display_new = TRUE;
		}
		else if(ModEdit)
		{
			if(get_val(PS4_CROSS))
				draw_chars_line3();
		}
		else if(ProfilesMenu)
		{
			if(profilesName_idx != PRIM_SEC_P)
			{
				toggle_pressBTN[profilesName_idx] = cycle(toggle_pressBTN[profilesName_idx] + 1, 0, entry_count(PROFILEBTN_PS_TXT)); // create a loop in the values
				draw_chars_line3();
				display_new = TRUE; 
			}
			if(profilesName_idx == br1_C)
			{
				toggle_br1[profilesName_idx] = cycle(toggle_br1[profilesName_idx] + 1, 0, entry_count(PROFILEBTN_PS_TXT)); // create a loop in the values
				draw_chars_line3();
				display_new = TRUE; 
			}
						if(profilesName_idx == br2_C)
			{
				toggle_br2[profilesName_idx] = cycle(toggle_br2[profilesName_idx] + 1, 0, entry_count(PROFILEBTN_PS_TXT)); // create a loop in the values
				draw_chars_line3();
				display_new = TRUE; 
			}
												if(profilesName_idx == remap1_C)
			{
				toggle_remap1[profilesName_idx] = cycle(toggle_remap1[profilesName_idx] + 1, 0, entry_count(PROFILEBTN_PS_TXT)); // create a loop in the values
				draw_chars_line3();
				display_new = TRUE; 
			}
						if(profilesName_idx == remap2_C)
			{
				toggle_remap2[profilesName_idx] = cycle(toggle_remap2[profilesName_idx] + 1, 0, entry_count(PROFILEBTN_PS_TXT)); // create a loop in the values
				draw_chars_line3();
				display_new = TRUE;}
																		if(profilesName_idx == remap3_C)
			{
				toggle_remap3[profilesName_idx] = cycle(toggle_remap3[profilesName_idx] + 1, 0, entry_count(PROFILEBTN_PS_TXT)); // create a loop in the values
				draw_chars_line3();
				display_new = TRUE; 
			}
						if(profilesName_idx == remap4_C)
			{
				toggle_remap4[profilesName_idx] = cycle(toggle_remap4[profilesName_idx] + 1, 0, entry_count(PROFILEBTN_PS_TXT)); // create a loop in the values
				draw_chars_line3();
				display_new = TRUE;}
										if(profilesName_idx == presstime_C)
			{
				toggle_presstime[profilesName_idx] = cycle(toggle_presstime[profilesName_idx] + 1, 0, entry_count(PROFILEBTN_PS_TXT)); // create a loop in the values
				draw_chars_line3();
				display_new = TRUE;}
			
		}
		else if(!MainMenu)
			draw_chars_line3();
	}
	if(event_release(PS4_UP))//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
	{
		col_char_left = 0;
		col_char_right = 0;
		col_rec_left = 1;
		col_rec_right = 1;
			
		if(ModEdit)
		{
			if(get_val(PS4_CROSS))
				draw_chars_line3();
		}
		else if(ProfilesMenu)
		{
			if(profilesName_idx != PRIM_SEC_P)
				draw_chars_line3();

			if(profilesName_idx == br1_C)
				draw_chars_line3();

			if(profilesName_idx == br2_C)
				draw_chars_line3();
				
			if(profilesName_idx == remap1_C)
				draw_chars_line3();

			if(profilesName_idx == remap2_C)
				draw_chars_line3();
			
			if(profilesName_idx == remap3_C)
				draw_chars_line3();

			if(profilesName_idx == remap4_C)
				draw_chars_line3();

			if(profilesName_idx == presstime_C)
				draw_chars_line3();
		}
		 else if(!MainMenu)
			draw_chars_line3();
	}
//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
	if(event_press(PS4_DOWN))
	{
		col_char_left = 1;
		col_char_right = 0;
		col_rec_left = 0;
		col_rec_right = 1;
		
		if(MainMenu)
		{
			menuName_idx = cycle(menuName_idx + 1, 0, entry_count(MENUNAME_TXT)); // create a loop in the values
			display_new = TRUE;
		}
		else if(ModEdit)
		{
			if(get_val(PS4_CROSS))
				draw_chars_line3();
		}
		else if(ProfilesMenu)
		{
			if(profilesName_idx != PRIM_SEC_P)
			{
				toggle_pressBTN[profilesName_idx] = cycle(toggle_pressBTN[profilesName_idx] - 1, 0, entry_count(PROFILEBTN_PS_TXT));  // create a loop in the values
				draw_chars_line3();
				display_new = TRUE;
			}
						if(profilesName_idx == br1_C)
			{
				toggle_br1[profilesName_idx] = cycle(toggle_br1[profilesName_idx] - 1, 0, entry_count(PROFILEBTN_PS_TXT));  // create a loop in the values
				draw_chars_line3();
				display_new = TRUE;
			}
									if(profilesName_idx == br2_C)
			{
				toggle_br2[profilesName_idx] = cycle(toggle_br2[profilesName_idx] - 1, 0, entry_count(PROFILEBTN_PS_TXT));  // create a loop in the values
				draw_chars_line3();
				display_new = TRUE;
			}
									if(profilesName_idx == remap1_C)
			{
				toggle_remap1[profilesName_idx] = cycle(toggle_remap1[profilesName_idx] - 1, 0, entry_count(PROFILEBTN_PS_TXT));  // create a loop in the values
				draw_chars_line3();
				display_new = TRUE;
			}
									if(profilesName_idx == remap2_C)
			{
				toggle_remap2[profilesName_idx] = cycle(toggle_remap2[profilesName_idx] - 1, 0, entry_count(PROFILEBTN_PS_TXT));  // create a loop in the values
				draw_chars_line3();
				display_new = TRUE;
			}
																					if(profilesName_idx == remap3_C)
			{
				toggle_remap3[profilesName_idx] = cycle(toggle_remap3[profilesName_idx] - 1, 0, entry_count(PROFILEBTN_PS_TXT)); // create a loop in the values
				draw_chars_line3();
				display_new = TRUE; 
			}
						if(profilesName_idx == remap4_C)
			{
				toggle_remap4[profilesName_idx] = cycle(toggle_remap4[profilesName_idx] - 1, 0, entry_count(PROFILEBTN_PS_TXT)); // create a loop in the values
				draw_chars_line3();
				display_new = TRUE;}
										if(profilesName_idx == presstime_C)
			{
				toggle_presstime[profilesName_idx] = cycle(toggle_presstime[profilesName_idx] - 1, 0, entry_count(PROFILEBTN_PS_TXT)); // create a loop in the values
				draw_chars_line3();
				display_new = TRUE;}
		}
		else if(!MainMenu)
			draw_chars_line3();
	}
	if(event_release(PS4_DOWN))//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
	{
		col_char_left = 0;
		col_char_right = 0;
		col_rec_left = 1;
		col_rec_right = 1;
			
		if(ModEdit)
		{
			if(get_val(PS4_CROSS))
				draw_chars_line3();
		}
		else if(ProfilesMenu)
		{
			if(profilesName_idx != PRIM_SEC_P)
				draw_chars_line3();

			if(profilesName_idx == br1_C)
				draw_chars_line3();

			if(profilesName_idx == br2_C)
				draw_chars_line3();

			if(profilesName_idx == remap1_C)
				draw_chars_line3();
	
			if(profilesName_idx == remap2_C)
				draw_chars_line3();
				
			if(profilesName_idx == remap3_C)
				draw_chars_line3();

			if(profilesName_idx == remap4_C)
				draw_chars_line3();

			if(profilesName_idx == presstime_C)
				draw_chars_line3();
		}
		 if(!MainMenu)
			draw_chars_line3();
	}
//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
	if(event_press(PS4_CROSS))
	{
		col_char_left = 1;
		col_char_right = 1;
		col_rec_left = 0;
		col_rec_right = 0;
		
		if(ModEdit)	
			draw_hold_to_edit();
	}
	if(event_release(PS4_CROSS))//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
	{
		col_char_left = 0;
		col_char_right = 0;
		col_rec_left = 1;
		col_rec_right = 1;
		
		if(MainMenu)
		{
			if(menuName_idx == MODMENU_MM)
			{
				modName_idx = 0;
				ModMenu = TRUE;
				MainMenu = FALSE;			
				draw_modMenu();				
				draw_chars_line2(); 
				draw_chars_line3();	
			}
			
			else if(menuName_idx == CONTROLLER_MM)
			{
				controllerName_idx = 0;
				ControllerMenu = TRUE;
				MainMenu = FALSE;		
				draw_modMenu();				
				draw_chars_line2(); 
				draw_chars_line3();	
			}
			
			else if(menuName_idx == PROFILES_MM)
			{
				profilesName_idx = 0;
				ProfilesMenu = TRUE;
				MainMenu = FALSE;	
				draw_profilesMenu();	
				draw_char_profiles();
			}
			current_info = 0;
			draw_base_menu();
			draw_chars_line1();
			display_new = TRUE;
			display_info = TRUE;
		}
		else if(ModMenu) 
		{
			if(check_toggle()) // From ModMenu to ModEdit - if toggle is TRUE, I can enter Edit Menu	 
			{
				if(toggle_antirecoil[profile_idx] == 3)
					valName_idx = RUMBLEPOWER_V; // Display rumble power first
				else
					valName_idx = entry_count(VALNAME_TXT) + 1; // always display first val names available when enter in edition mod
						
				if(modName_idx == RAPIDFIRE_M) // RapidFire defaut values
				{
					if(toggle_rapidfire[profile_idx] == 2 && rate_of_fire[profile_idx] < 60)
						rate_of_fire[profile_idx] = 240;
					if(toggle_rapidfire[profile_idx] == 3 && rate_of_fire[profile_idx] > 25)
						rate_of_fire[profile_idx] = 24;
				}
					
				current_info = 0;		
				ModEdit = TRUE;
				ModMenu = FALSE;
				draw_modEdit();			
				draw_chars_line1();		
				draw_chars_line2();		
				draw_hold_to_edit();
				draw_chars_line3();	
				display_new = TRUE;
				display_info = TRUE;
			}
		}
		else if(ModEdit)	
			draw_hold_to_edit();
	}
//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
	if(event_press(PS4_CIRCLE))
	{
		if(MainMenu) //From ModMenu to Main Menu
		{
		save()
		}
		if(ModMenu) //From ModMenu to Main Menu
		{
			MainMenu = TRUE;
			ModMenu = FALSE;
			draw_main_menu();
		}
		if(ModEdit) // From ModEdit to ModMenu
		{
			ModMenu = TRUE;
			ModEdit = FALSE;
			draw_modMenu();		
			draw_chars_line1();	
			draw_chars_line2();	
			draw_chars_line3();
		}
		if(ControllerMenu) //From Controller Menu to Main Menu
		{
			MainMenu = TRUE;
			ControllerMenu = FALSE;
			draw_main_menu();
		}
		if(ProfilesMenu) //From Profiles Menu to Main Menu
		{
			MainMenu = TRUE;
			ProfilesMenu = FALSE;
			draw_main_menu();
		}
		current_info = 0;
		display_new = TRUE;
		display_info = TRUE;
	
	}
}

function draw_logo() {
	print(center_x(sizeof(TITLE1) - 1,OLED_FONT_MEDIUM_WIDTH),1,OLED_FONT_MEDIUM,OLED_WHITE,TITLE1[0]);
	print(center_x(sizeof(TITLE2) - 1,OLED_FONT_MEDIUM_WIDTH),22,OLED_FONT_MEDIUM,OLED_WHITE,TITLE2[0]);
}

/////////////////////////////////////////////////////////////////////////////////////////// C O N T R O L L E R  F U N C T I O N S 

function get_controller_profileBTN_TXT() {
	
	if(get_controller() == PIO_PS4) return PROFILEBTN_PS_TXT;
	else                            return PROFILEBTN_XB_TXT;
	
	return -1;
}

function get_controller_layoutBTN_TXT() {
	
	if(get_controller() == PIO_PS4) return LAYOUT_BTN_PS_TXT;
	else                            return LAYOUT_BTN_XB_TXT;
	
	return -1;
}

function get_controller_infoTXT() {

	if(get_controller() == PIO_PS4)
	{
		if(MainMenu)            return INFO_MAIN_PS_TXT;
		else if(ModMenu)        return INFO_TOGGLE_PS_TXT;
		else if(ModEdit)        return INFO_EDIT_PS_TXT;
		else if(ControllerMenu) return INFO_CONTROL_PS_TXT;
		else if(ProfilesMenu)   return INFO_PROFILE_PS_TXT;
	}
	else
	{
		if(MainMenu)            return INFO_MAIN_XB_TXT;
		else if(ModMenu)        return INFO_TOGGLE_XB_TXT;
		else if(ModEdit)        return INFO_EDIT_XB_TXT;
		else if(ControllerMenu) return INFO_CONTROL_XB_TXT;
		else if(ProfilesMenu)   return INFO_PROFILE_XB_TXT;
	}
	return -1;
}

/////////////////////////////////////////////////////////////////////////////////////////// M I S C   F U N C T I O N S 

int c,c_val;

function number_to_string(f_val,f_digits) {

    i = 1;  c_val = 10000;
    
	if(f_val < 0) //--neg numbers
	{          
         putc_oled(i,45);    //--add leading "-"
         i += 1;
         f_val = abs(f_val);
	} 
	
	for(c = 5; c >= 1; c--) 
	{
	    if(f_digits >= c) 
	    {
            putc_oled(i,ASCII_NUM[f_val / c_val]);
            f_val = f_val % c_val;
            i +=  1; 
            /*if(c == 4) 
            {
                putc_oled(i,44);   //--add ","
                i += 1;
            }*/
        }
        c_val /= 10;
    }
    if(display_title)
    	puts_oled(120, 54, OLED_FONT_SMALL, i - 1, OLED_WHITE); // display current # slot
    else
    	puts_oled(center_x(i - 1,OLED_FONT_MEDIUM_WIDTH),28,OLED_FONT_MEDIUM,i - 1,OLED_WHITE); // adjustable value centered in X - medium size
}

function cycle(f_val, f_lo, f_hi) {
	if(f_val > f_hi) return f_lo;
	if(f_val < f_lo) return f_hi;
	return f_val;
}

function find_digits(f_num) {

    f_num = abs(f_num);
    if(f_num / 10000 > 0) return 5;
    if(f_num /  1000 > 0) return 4;
    if(f_num /   100 > 0) return 3;
    if(f_num /    10 > 0) return 2;
                          return 1;
}

function center_x(f_chars,f_font) {

    return (OLED_WIDTH / 2) - ((f_chars * f_font) / 2);
}

function center_y(f_size) {

    return (OLED_HEIGHT  / 2) - (f_size / 2);
}

function press_hold(f_btn) { 

	return event_press(f_btn) || get_ival(f_btn) && get_ptime(f_btn) > 250 
	       && get_ptime(f_btn) % (get_rtime() * 8) == 0;
}

function led(f_color) {

   for(i = 0; i <= 3; i++) 
   {
     set_led(i,duint8((f_color * 4) + i));
   }
}

function block_btn() {

set_val(PS4_UP     , 0 ); 	set_val(PS4_DOWN  , 0 ); 	set_val(PS4_LEFT  , 0 );	set_val(PS4_RIGHT   , 0);
set_val(PS4_CROSS  , 0 ); 	set_val(PS4_CIRCLE, 0 ); 	set_val(PS4_SQUARE, 0 ); 	set_val(PS4_TRIANGLE, 0);
set_val(PS4_L1     , 0 ); 	set_val(PS4_R1    , 0 ); 	set_val(PS4_L3    , 0 ); 	set_val(PS4_R3      , 0);
set_val(PS4_OPTIONS, 0 ); 	set_val(PS4_SHARE , 0 );	set_val(PS4_TOUCH , 0 );	set_val(PS4_PS      , 0);
set_val(XB1_PL1    , 0 ); 	set_val(XB1_PL2   , 0 );	set_val(XB1_PR1   , 0 );	set_val(XB1_PR2     , 0);
/*set_val(PS4_LX, 0); 		set_val(PS4_LY, 0); 		set_val(PS4_RX, 0); 		set_val(PS4_RY, 0);
set_val(PS4_L2, 0); 		set_val(PS4_R2, 0);*/
}

/////////////////////////////////////////////////////////////////////////////////////////// S C R E E N   S A V E R   F U N C T I O N S 

int RT,MSC,SD1,DGT,DGR,TP1,TP2;
int X_1,Y_1,X_2,Y_2,X_3,Y_3, X_4,Y_4,X_5,Y_5,X_6,Y_6,X_7,Y_7,X_8,Y_8,RN1,RN2,RN3,RN4,RN5,RN6,RN7,RN8;
int SSMU1 = 1,SSMU2 = 8,SSMU3 = 15,SSMU4 = 22,SSMU5 = 29,SSMU6 = 36,SSMU7 = 43;
define SSA1 = 78,SSA2 = 79,SSA3 = 90,SSA4 = 66,SSA5 = 65,SSA6 = 82,SSA7 = 68,SSA8 = 82,SSA9 = 73,SSA10 = 70,SSA11 = 82,SSA13 = 50,SSA14 = 49,SAVER = 5000,SAVER1 = 10;

function name(){
	cls_oled(0);
	combo_run(RACE);
	combo_run(RN);
if (Y_1 > 64)  Y_1 =   0;
if (Y_2 > 64)  Y_2 =   0;
if (Y_3 > 64)  Y_3 =   0;
if (Y_4 > 64)  Y_4 =   0;
if (Y_5 > 64)  Y_5 =   0;
if (Y_6 > 64)  Y_6 =   0;
if (Y_7 > 64)  Y_7 =   0;
if (Y_8 > 64)  Y_8 =   0;
if (SD1 > 105) SD1 = -50;
if (TP1 > 45)  TP1 =   0;
if (TP2 < 0)   TP2 =  55;
	putc_oled(1,RN1);
	puts_oled(X_1,Y_1,0,1,1);
	putc_oled(1,RN2);
	puts_oled(X_2,Y_2,0,1,1);
	putc_oled(1,RN3);
	puts_oled(X_3,Y_3,0,1,1);
	putc_oled(1,RN4);
	puts_oled(X_4,Y_4,0,1,1);
	putc_oled(1,RN5);
	puts_oled(X_5,Y_5,0,1,1);
	putc_oled(1,RN6);
	puts_oled(X_6,Y_6,0,1,1);
	putc_oled(1,RN7);
	puts_oled(X_7,Y_7,0,1,1);
	putc_oled(1,RN8);
	puts_oled(X_8,Y_8,0,1,1);
	putc_oled(1,SSA1);
	puts_oled(SSMU1 + SD1,TP1 + 2,0,1,1);
	putc_oled(1,SSA2);
	puts_oled(SSMU2 + SD1,TP2 + 4,0,1,1);
	putc_oled(1,SSA2);
	puts_oled(SSMU3 + SD1,TP1 + 6,0,1,1);
	putc_oled(1,SSA3);
	puts_oled(SSMU4 + SD1,TP2 + 8,0,1,1);
	putc_oled(1,SSA4);
	puts_oled(SSMU5 + SD1,TP1 + 10,0,1,1);
	putc_oled(1,SSA5);
	puts_oled(SSMU6 + SD1,TP2 + 12,0,1,1);
	putc_oled(1,SSA6);
	puts_oled(SSMU7 + SD1,TP1 + 14,0,1,1);
}

/////////////////////////////////////////////////////////////////////////////////////////// S A V E   F U N C T I O N S

int mask;
int ret;
int pmemValue;

function set_15var(pvar, ret, position) { // values range = 0 ~ 1
	for(i = position; i < (1 + position); i++)
	{
		pvar = pvar & (~(1 << i));
	}
	pvar = pvar | (ret << position);
	
	return pvar;
}

function get_15var(pvar, position){
	mask = 0;
	ret = 0;
	for(i = 0; i < 1 ; i++)
	{
		mask = mask | (1 << i);
	}
	mask = mask << position
	ret = (pvar & mask) >> position
return ret;
}

function set_4var(_1, _2, _3, _4) { // values range = 0 ~ 15
	return 0xff00 & ((0xf0 & (_1 << 4) | _2) << 8) | (0xf0 & (_3 << 4) | _4); 
}

function get_4var(f_PMemory, f_dec_pos) { 
	return  (f_PMemory >> (4 * f_dec_pos)) & 0x0F; 
}

function set_2var(var1, var2) { // values range = -127 ~ 127
	ret = 0;
	
	if(var1 < 0)
   		var1 = abs(var1) | 0x80;

	ret = (abs(var2) << 8)|var1;
	
	if(var2 < 0)
		ret *= -1;
	
	return ret;
}

function get_2var(pvar, var) {
	ret = 0;
	
	if(var == 0)
	{	 
		ret = 0x80 & abs(pvar) ;
		ret = ret >> 7;
		ret = ((-2) * ret) + 1;
		ret = (abs(pvar) & 0x7F) * ret;
	}
	else
	{
		ret = pvar >> 8;

	    if(pvar < 0)
			ret += 1;
	}
	
	return ret;
}

function load_spvars() {

	 
	
	// Antirecoil vertical values
	pmemValue = get_pvar(SPVAR_1, -32768, 32767, 0);
	antirecoil_start[0] = get_2var(pmemValue, 0);		antirecoil_end[0] = get_2var(pmemValue, 1);

	pmemValue = get_pvar(SPVAR_2, -32768, 32767, 0);
	antirecoil_start[1] = get_2var(pmemValue, 0);		antirecoil_end[1] = get_2var(pmemValue, 1);

	pmemValue = get_pvar(SPVAR_3, -32768, 32767, 0);
	antirecoil_start[2] = get_2var(pmemValue, 0);		antirecoil_end[2] = get_2var(pmemValue, 1);
	
	antirecoil_time[0] = get_pvar(SPVAR_4, -32768, 32767, 0);
	antirecoil_time[1] = get_pvar(SPVAR_5, -32768, 32767, 0);
	antirecoil_time[2] = get_pvar(SPVAR_6, -32768, 32767, 0);

	// Antirecoil horizontal & rumble recoil values
	pmemValue = get_pvar(SPVAR_7, -32768, 32767, 0);
	antirecoil_horizontal[0] = get_2var(pmemValue, 0);		rumble_power[0] = get_2var(pmemValue, 1);
	
	pmemValue = get_pvar(SPVAR_8, -32768, 32767, 0);
	antirecoil_horizontal[1] = get_2var(pmemValue, 0);		rumble_power[1] = get_2var(pmemValue, 1);
	
	pmemValue = get_pvar(SPVAR_9, -32768, 32767, 0);
	antirecoil_horizontal[2] = get_2var(pmemValue, 0);		rumble_power[2] = get_2var(pmemValue, 1);	
	
	
   


	
	reset_spvar();
	toggle_quick    [0]= read_spvar(  0, 3,0);
	toggle_quick    [1]= read_spvar(  0, 3,0);
	toggle_quick    [2]= read_spvar(  0, 3,0);
	toggle_antirecoil    [0]= read_spvar(  0, 3,0);
	toggle_antirecoil    [1]= read_spvar(  0, 3,0);
	toggle_antirecoil    [2]= read_spvar(  0, 3,0);
	toggle_rapidfire   [0]= read_spvar(  0, 3,0);
	toggle_rapidfire   [1]= read_spvar(  0, 3,0);
	toggle_rapidfire   [2]= read_spvar(  0, 3,0);
	toggle_aimassist  [0]= read_spvar(  0, 6,0);
	toggle_aimassist  [1]= read_spvar(  0, 6,0);
	toggle_aimassist  [2]= read_spvar(  0, 6,0);
	toggle_polar   [0]= read_spvar(  0, 4,0);
	toggle_polar   [1]= read_spvar(  0, 4,0);
	toggle_polar   [2]= read_spvar(  0, 4,0);
	toggle_jump        [0]= read_spvar(  0, 3,0);
	toggle_jump        [1]= read_spvar(  0, 3,0);
	toggle_jump        [2]= read_spvar(  0, 3,0);
	toggle_reload      [0]= read_spvar(  0, 3,0);
	toggle_reload      [1]= read_spvar(  0, 3,0);
	toggle_reload      [2]= read_spvar(  0, 3,0);
	
	toggle_autorun     [0]= read_spvar(  0, 3,0);
	toggle_autorun     [1]= read_spvar(  0, 3,0);
	toggle_autorun     [2]= read_spvar(  0, 3,0);
	toggle_hairTrigger     [0]= read_spvar(  0, 3,0);
	toggle_hairTrigger     [1]= read_spvar(  0, 3,0);
	toggle_hairTrigger     [2]= read_spvar(  0, 3,0);
	toggle_dpad     = read_spvar(  0, 2,0);
	toggle_invert    [0]= read_spvar(  0, 1,0);
	toggle_invert    [1]= read_spvar(  0, 1,0);
	toggle_invert    [2]= read_spvar(  0, 1,0);
	toggle_aimabuse      [0]= read_spvar(  0, 1,0);
	toggle_aimabuse      [1]= read_spvar(  0, 1,0);
	toggle_aimabuse      [2]= read_spvar(  0, 1,0);
	toggle_holdBreath      [0]= read_spvar(  0, 1,0);
	toggle_holdBreath      [1]= read_spvar(  0, 1,0);
	toggle_holdBreath      [2]= read_spvar(  0, 1,0);
	toggle_vm      = read_spvar(  0, 1,0);
	toggle_slideCancel         = read_spvar(  0, 2,0);
	toggle_switchstick     [0]= read_spvar(  0, 3,0);
	toggle_switchstick     [1]= read_spvar(  0, 3,0);
	toggle_switchstick     [2]= read_spvar(  0, 3,0);
	toggle_easyrun    [0]= read_spvar(  0, 6,0);
	toggle_easyrun    [1]= read_spvar(  0, 6,0);
	toggle_easyrun    [2]= read_spvar(  0, 6,0);
	toggle_sensshot2    [0]= read_spvar(  0, 7,0);
	toggle_sensshot2    [1]= read_spvar(  0, 7,0);
	toggle_sensshot2    [2]= read_spvar(  0, 7,0);
	toggle_sensshot             [0]= read_spvar(  0, 7,0);
	toggle_sensshot             [1]= read_spvar(  0, 7,0);
	toggle_sensshot             [2]= read_spvar(  0, 7,0);
	toggle_camangle    [0]= read_spvar(  0, 1,0);
	toggle_camangle    [1]= read_spvar(  0, 1,0);
	toggle_camangle    [2]= read_spvar(  0, 1,0);
	toggle_pressBTN  [0]= read_spvar(  -1, 14,-1);
	toggle_pressBTN  [1]= read_spvar(  -1, 14,-1);
	toggle_pressBTN  [2]= read_spvar(  -1, 14,-1);
	toggle_br1[0]= read_spvar(  -1, 14,-1);
	toggle_br1[1]= read_spvar(  -1, 14,-1);
	toggle_br1[2]= read_spvar(  -1, 14,-1);
	toggle_holdBTN      [0] = read_spvar(  -1, 14,-1);
	toggle_holdBTN      [1] = read_spvar(  -1, 14,-1);
	toggle_holdBTN      [2] = read_spvar(  -1, 14,-1);
	toggle_br1activat       [0] = read_spvar(  -1, 14,-1);
	toggle_br1activat       [1] = read_spvar(  -1, 14,-1);
	toggle_br1activat       [2] = read_spvar(  -1, 14,-1);
	toggle_br2       [0] = read_spvar(  -1, 14,-1);
	toggle_br2       [0] = read_spvar(  -1, 14,-1);
	toggle_br2       [0] = read_spvar(  -1, 14,-1);
	toggle_remap1    [0] = read_spvar(  -1, 14,-1);
	toggle_remap1    [1] = read_spvar(  -1, 14,-1);
	toggle_remap1    [2] = read_spvar(  -1, 14,-1);	
	toggle_to1       [0] = read_spvar(  -1, 14,-1);
	toggle_to1       [1] = read_spvar(  -1, 14,-1);
	toggle_to1       [2] = read_spvar(  -1, 14,-1);
	toggle_remap2  [0] = read_spvar(  -1, 14,-1);
	toggle_remap2  [1] = read_spvar(  -1, 14,-1);
	toggle_remap2  [2] = read_spvar(  -1, 14,-1);
	toggle_to2    [0] = read_spvar(  -1, 14,-1);
	toggle_to2    [1] = read_spvar(  -1, 14,-1);
	toggle_to2    [2] = read_spvar(  -1, 14,-1);
	toggle_remap3[0]  = read_spvar(  -1,14,-1);
	toggle_remap3[1]  = read_spvar(  -1,14,-1);
	toggle_remap3[2] = read_spvar(  -1,14,-1);
	toggle_to3[0]  = read_spvar(  -1,14,-1);
	toggle_to3[1]  = read_spvar(  -1,14,-1);
	toggle_to3[2]  = read_spvar(  -1,14,-1);
	toggle_remap4[0] = read_spvar(  -1,14,-1);
	toggle_remap4[1] = read_spvar(  -1,14,-1);
	toggle_remap4[2] = read_spvar(  -1,14,-1);
	toggle_to4[0] = read_spvar(  -1,14,-1);
	toggle_to4[1] = read_spvar(  -1,14,-1);
	toggle_to4[2] = read_spvar(  -1,14,-1);
	toggle_ads_btn       = read_spvar( 0, 14,0);
	toggle_fire_btn  = read_spvar( 1, 14,1);
	toggle_jump_btn    			    = read_spvar( 1, 14,4);
	toggle_crouch_btn	    = read_spvar( 1, 14,5);
	toggle_sprint_btn = read_spvar(  1,14,9);
	toggle_melee_btn= read_spvar(  1,14,14);
	toggle_reload_btn       = read_spvar(  1,14,6);
	toggle_melee2_btn       = read_spvar(  1,14,14);
	toggle_bumper	   = read_spvar(  1,14,14);
	toggle_loot_btn	   = read_spvar(  1,14,7);
	toggle_dbup         = read_spvar(  1,14,14);
	toggle_dbdown         = read_spvar(  1,14,14);
	toggle_dbleft         = read_spvar(  1,14,14);
	toggle_dbright         = read_spvar(  1,14,14);
	toggle_hold1       = read_spvar(  1,14,14);
	toggle_hold2	   = read_spvar(  1,14,14);
	toggle_deadshot	   = read_spvar(  1,14,14);
	toggle_deadshot2         = read_spvar(  1,14,14);
	toggle_accxl         = read_spvar(  1,14,14);
	toggle_accxr         = read_spvar(  1,14,14);

 	deadzonerx = read_spvar(1, 100, 80);	
 	lstors = read_spvar(1, 200, 100);
 	stop = read_spvar(1, 10000, 2000);	
   	cancel_time  = read_spvar(1,300,80);
    aimabuse_hold = read_spvar(1,500,10);
    aimabuse_release = read_spvar(1,500,50);
   	jumptime = read_spvar(1, 1000, 350);
   	loottime = read_spvar(1, 1000, 150);
   	rld_1 = read_spvar(1, 10000, 4000);
   	sens = read_spvar(1, 100, 95);
   	rate_of_fire     [0]  = read_spvar(  60, 750, 24);
	rate_of_fire     [1]  = read_spvar(  60, 750, 24);
	rate_of_fire     [2]  = read_spvar(  60, 750, 24);
	adsswitch     = read_spvar(1, 100, 5);
	startrun		  = read_spvar(1, 100, 95);
   	aimassist_radius [0] = read_spvar(1, 50, 20);
   	aimassist_radius [1] = read_spvar(1, 50, 20);
   	aimassist_radius [2] = read_spvar(1, 50, 20);
   	aimassist_angle   [0] = read_spvar(1, 50, 15);
   	aimassist_angle   [1] = read_spvar(1, 50, 15);
   	aimassist_angle   [2] = read_spvar(1, 50, 15);
   	DAMRadius   [0] = read_spvar(1, 50, 20);
   	DAMRadius   [1] = read_spvar(1, 50, 20);
   	DAMRadius   [2] = read_spvar(1, 50, 20);
   	DAMAngle    [0] = read_spvar(1, 50, 25);
   	DAMAngle    [1] = read_spvar(1, 50, 25);
   	DAMAngle    [2] = read_spvar(1, 50, 25);
   	PolarRadius        [0] = read_spvar(1, 50, 10);
	PolarRadius        [1] = read_spvar(1, 50, 10);
	PolarRadius        [2] = read_spvar(1, 50, 10);
   	PolarAngle  [0] = read_spvar(1, 50, 15);
   	PolarAngle  [1] = read_spvar(1, 50, 15);
   	PolarAngle  [2] = read_spvar(1, 50, 15);
	PolarRadiusc    [0] = read_spvar(1, 50, 15);
	PolarRadiusc    [1] = read_spvar(1, 50, 15);
	PolarRadiusc    [2] = read_spvar(1, 50, 15);
	PolarAnglec     [0] = read_spvar(1, 50, 20);
	PolarAnglec     [1] = read_spvar(1, 50, 20);
	PolarAnglec     [2] = read_spvar(1, 50, 20);

}

// -- Save all user preferanced variables to the persistent memory for later
function save() {
	MainMenu = FALSE;
	ModMenu = FALSE;
	ModEdit = FALSE;
	ControllerMenu = FALSE;
	ProfilesMenu = FALSE;
	cls_oled(OLED_BLACK);
	print(center_x(sizeof(SAVE) - 1,OLED_FONT_LARGE_WIDTH),center_y(OLED_FONT_LARGE_HEIGHT),OLED_FONT_LARGE,OLED_WHITE,SAVE[0]); 	// display SAVED... centered in X Y 
	combo_run(SAVE);

	// Antirecoil vertical values
	pmemValue = set_2var(antirecoil_start[0], antirecoil_end[0]);
	set_pvar(SPVAR_1,pmemValue);
	
	pmemValue = set_2var(antirecoil_start[1], antirecoil_end[1]);
	set_pvar(SPVAR_2,pmemValue);
	
	pmemValue = set_2var(antirecoil_start[2], antirecoil_end[2]);
	set_pvar(SPVAR_3,pmemValue);
	
	set_pvar(SPVAR_4,antirecoil_time[0]);
	set_pvar(SPVAR_5,antirecoil_time[1]);
	set_pvar(SPVAR_6,antirecoil_time[2]);
	
	// Antirecoil horizontal & rumble recoil values
	pmemValue = set_2var(antirecoil_horizontal[0], rumble_power[0]);
	set_pvar(SPVAR_7,pmemValue);
	
	pmemValue = set_2var(antirecoil_horizontal[1], rumble_power[1]);
	set_pvar(SPVAR_8,pmemValue);
	
	pmemValue = set_2var(antirecoil_horizontal[2], rumble_power[2]);
	set_pvar(SPVAR_9,pmemValue);
  
   

	reset_spvar();
	save_spvar(toggle_quick    [0],  0, 3,FALSE);
	save_spvar(toggle_quick    [1],  0, 3,FALSE);
	save_spvar(toggle_quick    [2],  0, 3,FALSE);
	save_spvar(toggle_antirecoil    [0],  0, 3,FALSE);
	save_spvar(toggle_antirecoil    [1],  0, 3,FALSE);
	save_spvar(toggle_antirecoil    [2],  0, 3,FALSE);
	save_spvar(toggle_rapidfire   [0],  0, 3,FALSE);
	save_spvar(toggle_rapidfire   [1],  0, 3,FALSE);
	save_spvar(toggle_rapidfire   [2],  0, 3,FALSE);
	save_spvar(toggle_aimassist  [0],  0, 6,FALSE);
	save_spvar(toggle_aimassist  [1],  0, 6,FALSE);
	save_spvar(toggle_aimassist  [2],  0, 6,FALSE);
	save_spvar(toggle_polar[0],  0, 4,FALSE);
	save_spvar(toggle_polar[1],  0, 4,FALSE);
	save_spvar(toggle_polar[2],  0, 4,FALSE);
	save_spvar(toggle_jump        [0],  0, 3,FALSE);
	save_spvar(toggle_jump        [1],  0, 3,FALSE);
	save_spvar(toggle_jump        [2],  0, 3,FALSE);
	save_spvar(toggle_reload      [0],  0, 3,FALSE);
	save_spvar(toggle_reload      [1],  0, 3,FALSE);
	save_spvar(toggle_reload      [2],  0, 3,FALSE);
    save_spvar(toggle_autorun     [0],  0, 3,FALSE);
	save_spvar(toggle_autorun     [1],  0, 3,FALSE);
	save_spvar(toggle_autorun     [2],  0, 3,FALSE);
	save_spvar(toggle_hairTrigger     [0],  0, 3,FALSE);
	save_spvar(toggle_hairTrigger     [1],  0, 3,FALSE);
	save_spvar(toggle_hairTrigger     [2],  0, 3,FALSE);
	save_spvar(toggle_dpad     ,  0, 2,FALSE);
	save_spvar(toggle_invert    [0],  0, 1,FALSE);
	save_spvar(toggle_invert    [1],  0, 1,FALSE);
	save_spvar(toggle_invert    [2],  0, 1,FALSE);
	save_spvar(toggle_aimabuse      [0],  0, 1,FALSE);
	save_spvar(toggle_aimabuse      [1],  0, 1,FALSE);
	save_spvar(toggle_aimabuse      [2],  0, 1,FALSE);
	save_spvar(toggle_holdBreath      [0],  0, 1,FALSE);
	save_spvar(toggle_holdBreath      [1],  0, 1,FALSE);
	save_spvar(toggle_holdBreath      [2],  0, 1,FALSE);
	save_spvar(toggle_vm      ,  0, 1,FALSE);
	save_spvar(toggle_slideCancel         ,  0, 2,FALSE);
	save_spvar(toggle_switchstick     [0],  0, 3,FALSE);
	save_spvar(toggle_switchstick     [1],  0, 3,FALSE);
	save_spvar(toggle_switchstick     [2],  0, 3,FALSE);
	save_spvar(toggle_easyrun    [0],  0, 6,FALSE);
	save_spvar(toggle_easyrun    [1],  0, 6,FALSE);
	save_spvar(toggle_easyrun    [2],  0, 6,FALSE);
	save_spvar(toggle_sensshot2    [0],  0, 7,FALSE);
	save_spvar(toggle_sensshot2    [1],  0, 7,FALSE);
	save_spvar(toggle_sensshot2    [2],  0, 7,FALSE);
	save_spvar(toggle_sensshot             [0],  0, 7,FALSE);
	save_spvar(toggle_sensshot             [1],  0, 7,FALSE);
	save_spvar(toggle_sensshot             [2],  0, 7,FALSE);
	save_spvar(toggle_camangle    [0],  0, 1,FALSE);
	save_spvar(toggle_camangle    [1],  0, 1,FALSE);
	save_spvar(toggle_camangle    [2],  0, 1,FALSE);
	save_spvar(toggle_pressBTN  [0],  -1, 14,FALSE);
	save_spvar(toggle_pressBTN  [1],  -1, 14,FALSE);
	save_spvar(toggle_pressBTN  [2],  -1, 14,FALSE);
	save_spvar(toggle_br1[0], -1, 14,FALSE);
	save_spvar(toggle_br1[1], -1, 14,FALSE);
	save_spvar(toggle_br1[2], -1, 14,FALSE);
	save_spvar(toggle_holdBTN      [0] , -1, 14,FALSE);
	save_spvar(toggle_holdBTN      [1] , -1, 14,FALSE);
	save_spvar(toggle_holdBTN      [2] , -1, 14,FALSE);
	save_spvar(toggle_br1activat       [0] , -1, 14,FALSE);
	save_spvar(toggle_br1activat       [1] ,-1, 14,FALSE);
	save_spvar(toggle_br1activat       [2] ,-1, 14,FALSE);
	save_spvar(toggle_br2       [0] ,-1, 14,FALSE);
	save_spvar(toggle_br2       [1] ,-1, 14,FALSE);
	save_spvar(toggle_br2       [2] , -1, 14,FALSE);
	save_spvar(toggle_remap1    [0] , -1, 14,FALSE);
	save_spvar(toggle_remap1    [1] , -1, 14,FALSE);
	save_spvar(toggle_remap1    [2] , -1, 14,FALSE);
	save_spvar(toggle_to1       [0] ,-1, 14,FALSE);
	save_spvar(toggle_to1       [1] , -1, 14,FALSE);
	save_spvar(toggle_to1       [2] ,-1, 14,FALSE);
	save_spvar(toggle_remap2  [0] ,-1, 14,FALSE);
	save_spvar(toggle_remap2  [1] ,-1, 14,FALSE);
	save_spvar(toggle_remap2  [2] ,-1, 14,FALSE);
	save_spvar(toggle_to2    [0] , -1, 14,FALSE);
	save_spvar(toggle_to2    [1] , -1, 14,FALSE);
	save_spvar(toggle_to2    [2] , -1, 14,FALSE);
	save_spvar(toggle_remap3[0]  ,-1, 14,FALSE);
	save_spvar(toggle_remap3[1]  ,-1, 14,FALSE);
	save_spvar(toggle_remap3[2] , -1, 14,FALSE);
	save_spvar(toggle_to3[0]  ,-1, 14,FALSE);
	save_spvar(toggle_to3[1]  ,-1, 14,FALSE);
	save_spvar(toggle_to3[2]  ,-1, 14,FALSE);
	save_spvar(toggle_remap4[0] , -1, 14,FALSE);
	save_spvar(toggle_remap4[1] , -1, 14,FALSE);
	save_spvar(toggle_remap4[2] , -1, 14,FALSE);
	save_spvar(toggle_to4[0] , -1, 14,FALSE);
	save_spvar(toggle_to4[1] , -1, 14,FALSE);
	save_spvar(toggle_to4[2] , -1, 14,FALSE);
	save_spvar(toggle_ads_btn       , 1, 14,FALSE);
	save_spvar(toggle_fire_btn    			   , 1,14,FALSE);
	save_spvar(toggle_jump_btn    			   , 1, 14,FALSE);
	save_spvar(toggle_crouch_btn	   , 1, 14,FALSE);
	save_spvar(toggle_sprint_btn , 1, 14,FALSE);
	save_spvar(toggle_melee_btn, 1, 14,FALSE);
	save_spvar(toggle_reload_btn       ,  1,14,FALSE);
	save_spvar(toggle_melee2_btn       ,  1,14,FALSE);
	save_spvar(toggle_bumper	    ,  1,14,FALSE);
	save_spvar(toggle_loot_btn,  1,14,FALSE);
	save_spvar(toggle_dbup        ,  1,14,FALSE);
	save_spvar(toggle_dbdown         ,  1,14,FALSE);
	save_spvar(toggle_dbleft        ,  1,14,FALSE);
	save_spvar(toggle_dbright         ,  1,14,FALSE);
	save_spvar(toggle_hold1        ,  1,14,FALSE);
	save_spvar(toggle_hold2         ,  1,14,FALSE);
	save_spvar(toggle_deadshot         ,  1,14,FALSE);
	save_spvar(toggle_deadshot2        ,  1,14,FALSE);
	save_spvar(toggle_accxl         ,  1,14,FALSE);
	save_spvar(toggle_accxr        ,  1,14,FALSE);


	
	save_spvar(deadzonerx ,1, 100,FALSE);	
	save_spvar(lstors ,1, 200,FALSE);
	save_spvar(stop ,1, 10000,FALSE);	
	save_spvar(cancel_time ,1,300,FALSE);
	save_spvar(aimabuse_hold,1,500,FALSE);
	save_spvar(aimabuse_release ,1,500,FALSE);
	save_spvar(jumptime ,1, 1000,FALSE);
	save_spvar(loottime ,1, 1000,FALSE);
	save_spvar(rld_1,1, 10000,FALSE);
	save_spvar(sens ,1, 100,FALSE);
	save_spvar(rate_of_fire     [0]  ,  60, 750,FALSE);
	save_spvar(rate_of_fire     [1]  ,  60, 750,FALSE);
	save_spvar(rate_of_fire     [2]  ,  60, 750,FALSE);
	save_spvar(adsswitch     ,1, 100,FALSE);
	save_spvar(startrun     ,1, 100,FALSE);
	save_spvar(aimassist_radius [0] ,1, 50,FALSE);
	save_spvar(aimassist_radius [1] ,1, 50,FALSE);
	save_spvar(aimassist_radius [2] ,1, 50,FALSE);
	save_spvar(aimassist_angle   [0] ,1, 50,FALSE);
	save_spvar(aimassist_angle   [1] ,1, 50,FALSE);
	save_spvar(aimassist_angle   [2] ,1, 50,FALSE);
	save_spvar(DAMRadius   [0],1, 50,FALSE);
	save_spvar(DAMRadius   [1] ,1, 50,FALSE);
	save_spvar(DAMRadius   [2] ,1, 50,FALSE);
	save_spvar(DAMAngle    [0] ,1, 50,FALSE);
	save_spvar(DAMAngle    [1] ,1, 50,FALSE);
	save_spvar(DAMAngle    [2] ,1, 50,FALSE);
	save_spvar(PolarRadius        [0]  ,1, 50,FALSE);
	save_spvar(PolarRadius        [1]  ,1, 50,FALSE);
	save_spvar(PolarRadius        [2]  ,1, 50,FALSE);
	save_spvar(PolarAngle  [0] ,1, 50,FALSE);
	save_spvar(PolarAngle  [1] ,1, 50,FALSE);
	save_spvar(PolarAngle  [2] ,1, 50,FALSE);
	save_spvar(PolarRadiusc    [0] ,1, 50,FALSE);
	save_spvar(PolarRadiusc    [1] ,1, 50,FALSE);
	save_spvar(PolarRadiusc    [2] ,1, 50,FALSE);
	save_spvar(PolarAnglec     [0] ,1, 50,FALSE);
	save_spvar(PolarAnglec     [1] ,1, 50,FALSE);
	save_spvar(PolarAnglec     [2] ,1, 50,TRUE);
	

 

}

// -- Where to start storing data
function reset_spvar() {

  p_current_slot = SPVAR_10;
  p_current_bit = 0;
  p_current_value = 0;

}

function get_bit_count(f_val) {

  if(f_val < 0)
    return get_bit_count(abs(f_val + 1));

  p_temp = 0;

  do {
    p_temp ++;
    f_val = f_val >> 1;  // -- Shift the value down 1 bit
  }
  while(f_val);

  return p_temp;

}

function get_bit_count_2(f_min, f_max) {

  p_temp = max(get_bit_count(f_min), get_bit_count(f_max));

  if(is_signed_2(f_min, f_max))
    p_temp ++;

  return p_temp;

}

function is_signed_2(f_min, f_max) {

  return f_min < 0 || f_max < 0;

}

function make_full_mask(f_bits) {

  if(f_bits == 32)
    return P_Full_Bitmask;

  return (P_Full_Bitmask & (~(1 << (32 - 1)))) >> (32 - f_bits - 1);

}

function make_sign(f_bits) {

  return 1 << clamp(f_bits - 1, 0, 32 - 1);

}

function make_sign_mask(f_bits) {

  return ~ make_sign(f_bits);

}

function pack_unsigned(f_val, f_bits) {

  return f_val & make_full_mask(f_bits);

}

function pack_signed(f_val, f_bits) {

  if(f_val < 0)
    return (abs(f_val) & make_sign_mask(f_bits)) | make_sign(f_bits);

  return f_val & make_sign_mask(f_bits);

}

function unpack_signed(f_val, f_bits) {

  if(f_val & make_sign(f_bits))
    return 0 - (f_val & make_sign_mask(f_bits));

  return f_val & make_sign_mask(f_bits);

}

function read_spvar_slot(f_slot) {

  return get_pvar(f_slot, 0 - (P_Full_Bitmask & (1 << (32 - 1))), 0 - ((0 - (P_Full_Bitmask & (1 << (32 - 1)))) + 1), 0);

}

function save_spvar(f_val, f_min, f_max, f_save) {

  p_bits = get_bit_count_2(f_min, f_max);  // -- Set min to be the bits we're going to need to store this value

  if(is_signed_2(f_min, f_max))
    f_val = pack_signed(f_val, p_bits);  // -- Pack as signed value
  f_val = pack_unsigned(f_val, p_bits);  // -- Pack as unsigned value - because this is more inclusive than signed, we don't need an else here - just always do it (micro optimization)

  if(p_bits > 32 - p_current_bit) {  // -- If we cannot fit the value here, we need to store what we can and move to the next slot
    p_current_value = p_current_value | (f_val << p_current_bit);  // -- Add what we can to the current value
    set_pvar(p_current_slot, p_current_value);  // -- Force save, we're moving to the next value
    p_current_slot ++;  // -- Move to the next slot
    p_bits -= (32 - p_current_bit);  // -- Update the required bits according to our needs for the next slot
    f_val = f_val >> (32 - p_current_bit);  // -- Move the remaining bits to their new location
    p_current_bit = 0;
    p_current_value = 0;
  }

  p_current_value = p_current_value | (f_val << p_current_bit);  // -- Add the value to the current position
  p_current_bit += p_bits;  // -- Increment the bit position

  if(p_current_bit >= 32) {
    p_current_bit -= 32;  // -- Went beyond the end, this is too big apparently
    set_pvar(p_current_slot, p_current_value);
    p_current_slot ++;
    if(!p_current_bit)
      p_current_value = 0;
  }

  if(f_save)
    set_pvar(p_current_slot, p_current_value);

}

function read_spvar(f_min, f_max, f_default) {

  p_current_value = read_spvar_slot(p_current_slot);  // -- Load the value so we always have it where we need it to be
  p_bits = get_bit_count_2(f_min, f_max);  // -- Set min to be the bits we're going to need to store this value
  p_current_value = pack_unsigned(p_current_value >> p_current_bit, p_bits);  // -- Shift our bits into position

  if(p_bits > 32 - p_current_bit) {  // -- if the value doesn't fit in this variable, we need to fetch the next value aswell and merge them accordingly
    p_current_slot ++;  // -- Move to the next slot
    p_temp = read_spvar_slot(p_current_slot);  // -- load the new slot into a temporary variable
    p_temp = pack_unsigned(p_temp, p_bits - (32 - p_current_bit));  // -- Get the bits we need
    p_temp = p_temp << (32 - p_current_bit);  // -- Shift the bits into their correct position
    p_current_value = pack_unsigned(p_current_value, (p_bits - (32 - p_current_bit)));
    p_current_value = p_current_value | p_temp;  // -- put all bits together again
    p_current_bit = p_current_bit - 32;  // -- Reset the bit position so we get the correct position next
  }

  p_current_bit += p_bits;  // -- move to the next variable position

  if(p_current_bit >= 32) {
    p_current_bit -= 32;  // -- We went beyond the end here, this is too big apparently
    p_current_slot ++;
  }

  p_current_value = pack_unsigned(p_current_value, p_bits);  // -- Extract all bits included for this value

  if(is_signed_2(f_min, f_max))  // -- Check if we have a sign bit
    p_current_value = unpack_signed(p_current_value, p_bits);  // -- Restore signed value

  if(p_current_value < f_min || p_current_value > f_max)  // -- Check if the value is below the specified min or above the specified max, if so - return the default value instead
    return f_default;

  return p_current_value;

}


//////////////////////////////////////////////////////////////////////////////////////////////////////////////////// M I S C   T E X T   T O   D I S P L A Y

	const string TITLE1 = "ONE FOR";
	const string TITLE2 = "ALL";
	const string SAVE = "SAVED";
	const string ALL = "Every Profiles";
	const string MUTE = "Script OFF";
	const string HOLD = "Dbl-Tap CIRCLE/B";
	const string ACTIVE = "to turn ON"
	const string CONTROLLER = "Controller"
	const string ANTIRECOIL_VERTICAL = "AR Vertical";
	const string PRESS_BTN = "Press BTN";
	const string HOLD_BTN = "Hold BTN";
	const string double_tap = "Doble tap";
	const string activate = "Activate";
	const string map = "Remap";
	const string to = "To";
	
	const string ONOFF[] = { 
	"OFF", "ON" }; 
	
	const string PROFILE[] = {
	"Primary", "Secondary", "Custom" };
	
	const string INFO_MAIN_PS[] = {
	"Switch menus:", "tap UP or DOWN", "Enter a menu:", "tap CROSS", "Close OLED Menus:", "hold L2 +", "tap OPTION", "Save and exit:", "tap PS"};
	
	const string INFO_TOGGLE_PS[] = {
	"Switch Profile:", "tap TRIANGLE", "Switch Mod:", "tap LEFT or RIGHT", "Toggle ON/OFF:", "tap UP or DOWN", 
	"Edit Menu:", "tap CROSS", "MainMenu:", "tap CIRCLE", "Close OLED Menus:", "hold L2 +", "tap OPTION", "Save and exit:", "tap PS"}; 
	
	const string INFO_EDIT_PS[] = {
	"Switch Value:", "tap LEFT or RIGHT", "Edit Value:", "hold CROSS + tap", "UP DOWN LEFT RIGHT", 
	"ModMenu:", "tap CIRCLE", "Close OLED Menus:", "hold L2 +", "tap OPTION", "Save and exit:", "tap PS"}; 
	
	const string INFO_CONTROL_PS[] = {
	"Navigate options:", "tap LEFT or RIGHT", "Edit options:", "tap UP or DOWN", 
	"MainMenu:", "tap CIRCLE", "Close OLED Menus:", "hold L2 +", "tap OPTION", "Save and exit:", "tap PS"}; 
	
	const string INFO_PROFILE_PS[] = {
	"Navigate options:", "tap TRIANGLE", "Edit options:", "tap" , "UP DOWN LEFT RIGHT",
	"MainMenu:", "tap CIRCLE", "Close OLED Menus:", "hold L2 +", "tap OPTION", "Save and exit:", "tap PS"};

	const string INFO_MAIN_XB[] = {
	"Switch menus:", "tap UP or DOWN", "Enter a menu:", "tap A", "Close OLED Menus:", "hold LT +", "tap MENU", "Save and exit:", "tap XBOX"}; 
	
	const string INFO_TOGGLE_XB[] = {
	"Switch Profile:", "tap Y", "Switch Mod:", "tap LEFT or RIGHT", "Toggle ON/OFF:", "tap UP or DOWN", 
	"Edit Menu:", "tap A", "MainMenu:", "tap B", "Close OLED Menus:", "hold LT +", "tap MENU", "Save and exit:", "tap XBOX"}; 
	
	const string INFO_EDIT_XB[] = {
	"Switch Value:", "tap LEFT or RIGHT", "Edit Value:", "hold A + tap", "UP DOWN LEFT RIGHT", 
	"ModMenu:", "tap B", "Close OLED Menus:", "hold LT +", "tap MENU", "Save and exit:", "tap XBOX"}; 
	
	const string INFO_CONTROL_XB[] = {
	"Navigate options:", "tap LEFT or RIGHT", "Edit options:", "tap UP or DOWN",  
	"MainMenu:", "tap B", "Close OLED Menus:", "hold LT +", "tap MENU", "Save and exit:", "tap XBOX"}; 
	
	const string INFO_PROFILE_XB[] = {
	"Navigate options:", "tap Y", "Edit options:", "tap" , "UP DOWN LEFT RIGHT",
	"MainMenu:", "tap B", "Close OLED Menus:", "hold LT +", "tap MENU", "Save and exit:", "tap XBOX"}; 
	
	
	 